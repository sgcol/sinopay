(this.webpackJsonpsinopay=this.webpackJsonpsinopay||[]).push([[0],{1049:function(e,t,a){"use strict";a.r(t);var r,n=a(2),c=a(0),s=a.n(c),i=a(22),o=a.n(i),l=(a(537),a(6)),d=a(1174),j=a(1162),b=a(33),u=a(15),O=a(168),m=a(119),h=a(200);function f(e){return e.forEach((function(e){null!=e._id&&(e.id=e._id,e._id=void 0)})),e}function p(e){return null!=e.id&&(e._id=e.id,e.id=void 0),e}function x(e,t){return(t=t||{}).headers?(t.headers instanceof Headers||(t.headers=new Headers(t.headers)),t.headers.set("accToken",localStorage.getItem("accToken"))):t.headers=new Headers({accToken:localStorage.getItem("accToken")}),m.a.fetchJson(e,t).then((function(e){return e.json&&e.json.err?Promise.reject(new h.a(e.json.err,500,e.json)):Promise.resolve(e)}))}function v(e){switch(e){case"managers":case"agents":return"users";case"disbursements":case"recon":return"bills";default:return e}}var g=function(e,t){if("/"===e[0])var a="".concat(r).concat(e);else a="".concat(r,"/").concat(e);return x(a,t)},y=a(20),w=a(26),S=a(12),N=a.n(S),I=a(58),C=a(242),k=a(1127),D=a(1052),T=a(1053),E=a(1051),P=a(490),R=a(1115),F=a(42),A=a(1181),_=a(225),B=a.n(_),M=a(8),H=a.n(M),W=a(86),U=a(161),L=a(218),J=a(239),V=a(426),Y=a(436),z=a(438),X=a(72),$=a(1191),q=a(1192),G=a(16),Q=a(40),K=a(501),Z=a(302),ee=a.n(Z),te=a(425),ae=a.n(te),re=a(301),ne=a.n(re),ce=a(213),se=a.n(ce),ie=a(241),oe=Object(I.a)((function(e){return{wrapIcon:{verticalAlign:"middle",display:"inline-flex"},rightIcon:{marginLeft:e.spacing(1)}}})),le=function(e){var t,a=e.className,r=e.record,c=void 0===r?{}:r,s=e.source,i=Object(u.a)(e,["className","record","source"]);return Object(n.jsx)(F.a,Object(l.a)(Object(l.a)({component:"span",variant:"body2",className:a},Object(Q.a)(i)),{},{children:(t="object"===typeof c?c[s]:c,"Invalid Date"===(t=new Date(t))?"Invalid Date":t.toLocaleDateString()+" "+t.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1"))}))},de=function(e){var t=e.className,a=(e.emptyText,e.record),r=e.source,c=Object(u.a)(e,["className","emptyText","record","source"]),s=decodeURIComponent("object"===typeof a?a[r]:a);return Object(n.jsx)(F.a,Object(l.a)(Object(l.a)({component:"span",variant:"body2",className:t},Object(Q.a)(c)),{},{children:s}))},je=function(e){var t,a=e.className,r=e.record,c=void 0===r?{}:r,s=e.source,i=Object(u.a)(e,["className","record","source"]),o=oe(),d=Object(ie.get)(c,"lasterr"),j=Object(ie.get)(c,"merchant_return");if(d)t=Object(n.jsx)(K.a,{title:d,children:Object(n.jsx)(se.a,{className:o.rightIcon,style:{color:ae.a.A700}})});else if(j)try{var b=JSON.parse(j);b.err&&(t=Object(n.jsx)(K.a,{title:b.err,children:Object(n.jsx)(ne.a,{className:o.rightIcon,style:{color:ee.a.A700}})}))}catch(O){t=Object(n.jsx)(K.a,{title:"merchant_return is not a valid json",children:Object(n.jsx)(ne.a,{className:o.rightIcon,style:{color:ee.a.A700}})})}return Object(n.jsxs)(F.a,Object(l.a)(Object(l.a)({component:"span",variant:"body2",className:H()(o.wrapIcon,a)},Object(Q.a)(i)),{},{children:[Object(ie.get)(c,s,""),t]}))},be=a(311),ue=a(491),Oe=a(98),me=a(488),he=a(499),fe=a(485),pe=a(1067),xe=a(1117),ve=s.a.forwardRef((function(e,t){var a=Object(V.a)(e),r=e.body,i=void 0===r?Object(n.jsx)(be.b,{}):r,o=e.children,d=(e.classes,e.className),j=e.expand,b=e.hasBulkActions,O=void 0!==b&&b,m=e.hover,h=e.isRowSelectable,f=e.resource,p=e.rowClick,x=e.rowStyle,v=e.size,g=void 0===v?"small":v,y=e.footerResource,S=Object(u.a)(e,["body","children","classes","className","expand","hasBulkActions","hover","isRowSelectable","resource","rowClick","rowStyle","size","footerResource"]),N=Object(ue.a)(e),I=N.basePath,C=N.currentSort,k=N.data,R=N.ids,F=N.loaded,A=N.onSelect,_=N.onToggleItem,B=N.selectedIds,M=N.setSort,U=(N.total,Object(Oe.a)()),L=Object(c.useCallback)((function(e){e.stopPropagation();var t=e.currentTarget.dataset.field,a=C.field===t?"ASC"===C.order?"DESC":"ASC":e.currentTarget.dataset.order;M(t,a)}),[C.field,C.order,M]),J=Object(c.useCallback)((function(e){if(e.target.checked){var t=R.concat(B.filter((function(e){return!R.includes(e)})));A(h?t.filter((function(e){return h(k[e])})):t)}else A([])}),[k,R,A,h,B]),Y=Object(W.a)(),z=Object(c.useState)(),X=Object(w.a)(z,2),$=X[0],q=X[1],G=Object(c.useState)(!1),Q=Object(w.a)(G,2),K=Q[0],Z=Q[1];if(Object(c.useEffect)((function(){y?Y.getOne(y,e.filterValues).then((function(e){var t=e.data;q(t),Z(!0)})).catch((function(e){q([]),Z(!0)})):Z(!0)}),[e.filterValues]),!1===F||!1===K)return Object(n.jsx)(me.a,{classes:a,className:d,expand:j,hasBulkActions:O,nbChildren:s.a.Children.count(o),size:g});var ee=h?R.filter((function(e){return h(k[e])})):R,te=function(){if(null==R[0])return o;for(var e=k[R[0]],t=1;t<R.length;t++)e=Object(l.a)(Object(l.a)({},e),k[R[t]]);return c.Children.toArray(o).filter((function(t){return t.props.alwaysOn||e.hasOwnProperty(t.props.source)}))}();return Object(n.jsxs)(D.a,Object(l.a)(Object(l.a)({ref:t,className:H()(a.table,d),size:g},Object(he.c)(S)),{},{children:[Object(n.jsx)(T.a,{className:a.thead,children:Object(n.jsxs)(E.a,{className:H()(a.row,a.headerRow),children:[j&&Object(n.jsx)(P.a,{padding:"none",className:H()(a.headerCell,a.expandHeader)}),O&&Object(n.jsx)(P.a,{padding:"checkbox",className:a.headerCell,children:Object(n.jsx)(pe.a,{className:"select-all",color:"primary",checked:B.length>0&&ee.length>0&&ee.every((function(e){return B.includes(e)})),onChange:J})}),te.map((function(e,t){return Object(c.isValidElement)(e)?Object(n.jsx)(fe.a,{className:a.headerCell,currentSort:C,field:e,isSorting:C.field===(e.props.sortBy||e.props.source),resource:f,updateSort:L},e.props.source||t):null}))]})}),Object(c.cloneElement)(i,{basePath:I,className:a.tbody,classes:a,expand:j,rowClick:p,data:k,hasBulkActions:O,hover:m,ids:R,onToggleItem:_,resource:f,rowStyle:x,selectedIds:B,isRowSelectable:h,version:U},te),y?Object(n.jsx)(xe.a,{children:Object(n.jsx)(E.a,{children:s.a.Children.map(te,(function(t){return Object(n.jsx)(P.a,{children:$?t.props.footerText?t.props.footerText:t.props.footerSource?$[t.props.footerSource]:t.props.footerRender?t.props.footerRender($):null:null},"footer-".concat(e.id,"-").concat(t.props.source))}))},"__footer")}):null]}))})),ge=a(1190),ye=function(e){var t=e.className,a=e.classes,r=void 0===a?{}:a,c=e.source,s=e.record,i=Object(u.a)(e,["className","classes","source","record"]);return Object(n.jsx)(ge.a,Object(l.a)({className:H()(r.chip,t),label:null!==c&&void 0!==c?N()(s,c):s},Object(Q.a)(i)))},we=a(1194),Se=a(1187),Ne=(a(432),a(431),a(74)),Ie=(a(626),a(222)),Ce=Object(I.a)((function(e){var t;return{root:{padding:0,marginBottom:0,"& > li:last-child":{borderBottom:"none"}},line:(t={display:"flex",listStyleType:"none",borderBottom:"solid 1px ".concat(e.palette.divider)},Object(b.a)(t,e.breakpoints.down("xs"),{display:"block"}),Object(b.a)(t,"&.fade-enter",{opacity:.01,transform:"translateX(100vw)"}),Object(b.a)(t,"&.fade-enter-active",{opacity:1,transform:"translateX(0)",transition:"all 500ms ease-in"}),Object(b.a)(t,"&.fade-exit",{opacity:1,transform:"translateX(0)"}),Object(b.a)(t,"&.fade-exit-active",{opacity:.01,transform:"translateX(100vw)",transition:"all 500ms ease-in"}),t),index:{minWidth:"6em",paddingTop:"1em"},form:{flex:2},action:{paddingTop:"0.5em"},leftIcon:{marginRight:e.spacing(1)}}}),{name:"RaObjectFormIterator"}),ke=function(e){e.addButton,e.removeButton;var t=e.basePath,a=e.children,r=e.className,s=e.fields,i=e.record,o=e.resource,d=e.source,j=e.disabled,b=(e.disableAdd,e.disableRemove,e.variant),O=e.margin,m=e.TransitionProps,h=e.defaultValue,f=Ce(e),p=Object(c.useRef)(null),x=Object(c.useRef)(s),v=N()(i,d);return x?Object(n.jsx)("ul",{className:H()(f.root,r),children:Object(n.jsx)(we.a,{component:null,children:function(){var e=[];for(var r in x.current){x.current[r]&&e.push(Object(n.jsx)(Se.a,Object(l.a)(Object(l.a)({nodeRef:p,timeout:500,classNames:"fade"},m),{},{children:Object(n.jsxs)("li",{className:f.line,children:[Object(n.jsx)(F.a,{variant:"caption",className:f.index,display:"block",component:"div",children:r}),Object(n.jsx)("section",{className:f.form,children:c.Children.map(a,(function(e,a){if(!Object(c.isValidElement)(e))return null;var s=e.props,i=s.source,m=Object(u.a)(s,["source"]);return Object(n.jsx)(Ie.a,{basePath:e.props.basePath||t,input:Object(c.cloneElement)(e,Object(l.a)({source:i?"".concat(d,".").concat(r,".").concat(i):r,index:i?void 0:a,label:"undefined"===typeof e.props.label?i?"resources.".concat(o,".fields.").concat(i):void 0:e.props.label,disabled:j,defaultValue:N()(h,[r,i],null)},m)),record:v&&v[r]||{},resource:o,variant:b,margin:O})}))})]})}),"".concat(d,"-").concat(r)))}return e}()})}):null},De=a(111),Te=a(433),Ee=a(171),Pe=a(1118),Re=a(492),Fe=a(502),Ae=function(e){var t=e.basePath,a=e.className,r=e.defaultValue,s=e.label,i=(e.loaded,e.loading),o=e.children,d=e.record,j=e.resource,b=e.source,O=e.validate,m=e.variant,h=e.disabled,f=e.margin,p=void 0===f?"dense":f,x=Object(u.a)(e,["basePath","className","defaultValue","label","loaded","loading","children","record","resource","source","validate","variant","disabled","margin"]);return i?Object(n.jsx)(De.a,{label:s,source:b,resource:j,className:a,children:Object(n.jsx)(Te.a,{})}):Object(n.jsxs)(Re.a,Object(l.a)(Object(l.a)({fullWidth:!0,margin:"normal",className:a},x),{},{children:[Object(n.jsx)(Fe.a,{htmlFor:b,shrink:!0,children:Object(n.jsx)(Ee.a,{label:s,source:b,resource:j,isRequired:Object(Pe.a)(O)})}),Object(c.cloneElement)(c.Children.only(o),{fields:Object(l.a)(Object(l.a)({},r),N()(d,b)),basePath:"".concat(t,"/").concat(b),record:d,resource:j,source:b,variant:m,margin:p,disabled:h,defaultValue:r})]}))},_e=Object(I.a)((function(e){var t;return{root:{padding:0,marginBottom:0,"& > li:last-child":{borderBottom:"none"}},line:(t={display:"flex",listStyleType:"none",borderBottom:"solid 1px ".concat(e.palette.divider)},Object(b.a)(t,e.breakpoints.down("xs"),{display:"block"}),Object(b.a)(t,"&.fade-enter",{opacity:.01,transform:"translateX(100vw)"}),Object(b.a)(t,"&.fade-enter-active",{opacity:1,transform:"translateX(0)",transition:"all 500ms ease-in"}),Object(b.a)(t,"&.fade-exit",{opacity:1,transform:"translateX(0)"}),Object(b.a)(t,"&.fade-exit-active",{opacity:.01,transform:"translateX(100vw)",transition:"all 500ms ease-in"}),t),index:Object(b.a)({width:"3em",paddingTop:"1em"},e.breakpoints.down("sm"),{display:"none"}),form:{flex:2},action:{paddingTop:"0.5em"},leftIcon:{marginRight:e.spacing(1)}}}),{name:"RaArrayFormIterator"}),Be=function(e){var t=e.history,a=e.bills,r=e.users,c=e.provider,s=(Object(u.a)(e,["history","bills","users","provider"]),_e()),i=(Object(W.a)(),Object(U.a)()),o=Object(G.useFormState)().values,l=Object(L.a)();return Object(n.jsx)(J.a,{children:Object(n.jsxs)(C.a,{variant:"contained",type:"button",color:"primary","aria-label":"Save",onClick:function(){var e={};r.forEach((function(t){e[t.id]=t}));var n=a.map((function(t){var a=t.orderId,r=t.money,n=t.time,s=t.paymentMethod,l=(t.originData,o["order"+a]);if(!l)return i("all the owner must be specified");if("system"===l)return{_id:a,money:r,currency:"IDR",userid:l,paymentMethod:s,provider:c,time:n};var d=e[l],j=d.share,b=d.paymentMethod;return{_id:a,money:r,userid:l,merchantName:d.name,share:j,provider:c,payment:b,paymentMethod:s,currency:"IDR",time:n}}));g("/bills/add",{method:"POST",body:JSON.stringify(n)}).then((function(e){e.headers;var a=e.json.insertedCount;i("".concat(a," records inserted"),"success"),setTimeout((function(){t.goBack()}),800)})).catch((function(e){var t=e.message,a=e.status;if(401===a||403===a)return l();i(t,"warning")}))},children:[Object(n.jsx)(B.a,{className:s.leftIcon}),"Save"]})})},Me=function(e){e.options;var t=e.history,a=e.className,r=Object(V.a)(e),s=t.location.state,i=s.bills,o=s.provider,d=Object(W.a)(),j=Object(U.a)(),u=Object(c.useState)(),O=Object(w.a)(u,2),m=O[0],h=O[1];if(Object(c.useEffect)((function(){d.getList("users",{filter:{acl:["agent","merchant"]}}).then((function(e){var t=e.data;h(t)})).catch((function(e){j(e.message,"error")}))}),[]),!i)return Object(n.jsx)(Y.a,{error:"bills not found, you may enter this page by accident"});if(!m)return Object(n.jsx)(z.a,{});var f=[],p=[];m.forEach((function(e){var t=e.acl,a=e.name,r=e.id;"merchant"==t?f.push({name:a,id:r}):"agent"==t&&p.push({name:a,id:r})}));var x={recharge:f,disbursment:f.concat(p),withdrawal:[{id:"system",name:"system"}].concat(p).concat(f),topup:[{id:"system",name:"system"}].concat(p).concat(f)};return Object(n.jsxs)(k.a,{children:[Object(n.jsx)(X.b,{defaultTitle:"Refill Bills"}),Object(n.jsx)(A.a,{severity:"error",children:"These orders are not exist in our system, please fill them first"}),Object(n.jsx)($.a,{toolbar:Object(n.jsx)(Be,Object(l.a)(Object(l.a)({},e),{},{bills:i,users:m,provider:o})),submitOnEnter:!1,children:Object(n.jsxs)(D.a,{className:H()(r.table,a),children:[Object(n.jsx)(T.a,{className:r.thead,children:Object(n.jsxs)(E.a,{className:H()(r.row,r.headerRow),children:[Object(n.jsx)(P.a,{className:r.headerCell,children:"orderId"}),Object(n.jsx)(P.a,{className:r.headerCell,children:"money"}),Object(n.jsx)(P.a,{className:r.headerCell,children:"fee"}),Object(n.jsx)(P.a,{className:r.headerCell,children:"payment"}),Object(n.jsx)(P.a,{className:r.headerCell,children:"time"}),Object(n.jsx)(P.a,{className:r.headerCell,children:"owner"}),Object(n.jsx)(P.a,{className:r.headerCell,children:"outstandingOrder"})]})}),Object(n.jsx)(R.a,{className:H()("datagrid-body",a),children:i.map((function(e,t){var a;return Object(n.jsxs)(E.a,{className:H()(r.row,(a={},Object(b.a)(a,r.rowEven,t%2===0),Object(b.a)(a,r.rowOdd,t%2!==0),a)),children:[Object(n.jsx)(P.a,{className:r.cell,children:e.orderId}),Object(n.jsx)(P.a,{className:r.cell,children:e.money}),Object(n.jsx)(P.a,{className:r.cell,children:e.fee||0}),Object(n.jsx)(P.a,{className:r.cell,children:e.paymentMethod}),Object(n.jsx)(P.a,{className:r.cell,children:Object(n.jsx)(le,{record:e.time})}),Object(n.jsx)(P.a,{className:r.cell,children:Object(n.jsx)(q.a,{choices:x[e.paymentMethod]||x.recharge,source:"order"+e.orderId,label:"owner"})}),Object(n.jsx)(P.a,{className:r.cell,children:Object(n.jsx)(F.a,{variant:"body2",color:"textSecondary",children:JSON.stringify(e.originData)})})]})}))})]})})]})},He=[Object(n.jsx)(y.b,{exact:!0,path:"/refill-bills",component:Me})],We=a(1142),Ue=a(139),Le=a.n(Ue),Je=a(1119),Ve=a(1184),Ye=a(1129),ze=a(439),Xe=a(1176),$e=a(1185),qe=a(115),Ge=a(1193),Qe=a(1183),Ke=a(1178),Ze=a(1180),et=a(1137),tt=a(1138),at=a(1139),rt=a(1175),nt=a(1140),ct=a(1141),st=a(1136),it=a(1134),ot=a(114),lt=a.n(ot),dt=a(361),jt=a(635),bt=a(636).defaultShare,ut=function(e){var t=e.handleSubmitWithRedirect,a=e.acl,r=Object(u.a)(e,["handleSubmitWithRedirect","acl"]),s=r.redirect,i=Object(G.useForm)(),o=Object(c.useCallback)((function(){var e=i.getState().values;if(e.pwd){var r=Math.random().toString(36).substring(7);i.change("salt",r),i.change("password",lt()(r+e.pwd)),i.change("pwd",void 0)}if(e.paymentMethod)for(var n in e.paymentMethod){var c=e.paymentMethod[n],o=parseFloat(c.mdr);o>=1&&(o=Number((o/100).toFixed(4))),i.change("paymentMethod.".concat(n,".mdr"),o)}if(a&&i.change("acl",a),e.providers)for(var l in e.providers){var d=e.providers[l];null!=d.enabled&&(i.change("providers."+l+".disabled",!d.enabled),i.change("providers."+l+".enabled",void 0))}t(s)}),[i]);return Object(n.jsx)(Je.a,Object(l.a)(Object(l.a)({},r),{},{handleSubmitWithRedirect:o}))},Ot=function(e){var t=e.redirect;return Object(n.jsx)(J.a,Object(l.a)(Object(l.a)({},e),{},{children:Object(n.jsx)(ut,Object(l.a)({label:"Save",redirect:t,submitOnEnter:!1},e))}))},mt=function(e){var t=e.contents,a=(Object(u.a)(e,["contents"]),Object(G.useForm)().getState().values),r=[];return t.providers&&t.providers.forEach((function(e){var t=!jt.get(a,["providers",e.id,"disabled"],!1);r.push(Object(n.jsxs)("div",{children:[Object(n.jsx)(Ve.a,{source:"providers.".concat(e.id,".disabled"),parse:function(e){return!e},format:function(e){return!e},label:"".concat(e.name)}),Object(n.jsx)(Ye.a,{children:function(a){a.formData,Object(u.a)(a,["formData"]);if(t){var r=[];return e.options&&e.options.forEach((function(t){r.push(Object(n.jsx)(q.a,{source:"providers.".concat(e.id,".").concat(t.name),choices:t.values.map((function(e){return{id:e,name:e}})),label:t.name}))})),e.params&&e.params.forEach((function(t){r.push(Object(n.jsx)(ze.a,{source:"providers.".concat(e.id,".").concat(t),label:t}))})),r}}})]},e.id))})),r};function ht(e,t){var a=gt(t),r=t.className,s=Object(W.a)(),i=Object(c.useState)(),o=Object(w.a)(i,2),d=o[0],j=o[1],b=Object(c.useState)(),u=Object(w.a)(b,2),O=u[0],m=u[1],h=Object(c.useState)(!0),f=Object(w.a)(h,2),p=f[0],x=f[1],v=Object(c.useState)(),g=Object(w.a)(v,2),y=g[0],S=g[1];if(Object(c.useEffect)((function(){s.getList("users",{filter:{acl:"agent"}}).then((function(e){var t=e.data;j(t),x(!1)})).catch((function(e){S(e),x(!1)})),s.getList("providers").then((function(e){var t=e.data;m(t)})).catch((function(e){S(e)}))}),[]),p)return Object(n.jsx)(z.a,{});if(y)return Object(n.jsx)(Y.a,{});if(p)return Object(n.jsx)(z.a,{});var N,I=function(t){return"Create"===e?Object(n.jsx)(ze.a,Object(l.a)({},t)):null};return N="Create"===e?Object(n.jsx)(Ot,{acl:"merchant"}):Object(n.jsx)(Ot,{}),Object(n.jsxs)(Xe.a,{toolbar:N,children:[Object(n.jsxs)($e.a,{label:"General",children:[Object(n.jsx)(ze.a,{source:"name",label:"\u663e\u793a\u540d"}),Object(n.jsx)(I,{source:"id",label:"\u767b\u5f55\u540d"}),Object(n.jsx)(ze.a,{source:"pwd",label:"\u5bc6\u7801",type:"password"}),Object(n.jsx)("input",{name:"acl",hidden:!0,value:"merchant"}),Object(n.jsx)(Ve.a,{source:"debugMode"}),Object(n.jsx)(Ae,{source:"paymentMethod",label:"Share by payment",defaultValue:bt,children:Object(n.jsxs)(ke,{children:[Object(n.jsx)(ze.a,{source:"mdr",variant:"standard",label:"mdr"}),Object(n.jsx)(ze.a,{className:H()(a.fixFee,r),source:"fix_fee",variant:"standard",label:"fixed fee"})]})}),Object(n.jsx)(q.a,{source:"parent",choices:[{id:null,name:"none"}].concat(d),label:"agent"})]}),Object(n.jsx)($e.a,{label:"Providers",children:Object(n.jsx)(mt,{contents:{providers:O}})})]})}var ft=function(e){var t=e.basePath;return Object(n.jsx)(qe.a,{children:Object(n.jsx)(Ge.a,{basePath:t})})},pt=function(e){return Object(n.jsx)(Qe.a,Object(l.a)(Object(l.a)({},e),{},{children:ht("Create",Object(l.a)(Object(l.a)({},e),{},{redirect:"list",acl:"merchant",initialValues:{debugMode:!0}}))}))},xt=function(e){return Object(n.jsx)(Ke.a,Object(l.a)(Object(l.a)({},e),{},{children:ht("Edit",Object(l.a)(Object(l.a)({},e),{},{redirect:"list"}))}))},vt=function(e){return Object(n.jsx)(Ze.a,Object(l.a)(Object(l.a)({},e),{},{children:Object(n.jsxs)(et.a,{children:[Object(n.jsx)(tt.a,{source:"name",label:"\u663e\u793a\u540d"}),Object(n.jsx)(tt.a,{source:"key"}),Object(n.jsx)(tt.a,{label:"partnerId",source:"merchantid"}),Object(n.jsx)(at.a,{label:"\u8d26\u6237\u4f59\u989d",source:"balance",options:{minimumFractionDigits:2,maximumFractionDigits:2}}),Object(n.jsx)(at.a,{label:"\u5e94\u6536",source:"receivable",options:{minimumFractionDigits:2,maximumFractionDigits:2}}),Object(n.jsx)(at.a,{label:"\u624b\u7eed\u8d39",source:"commission",options:{minimumFractionDigits:2,maximumFractionDigits:2}})]})}))},gt=Object(I.a)((function(e){return{message:{textAlign:"center",opacity:"light"===e.palette.type?.5:.8,margin:"0 1em",color:"light"===e.palette.type?"inherit":e.palette.text.primary},icon:{width:"9em",height:"9em"},toolbar:{textAlign:"center",marginTop:"2em"},drawer:{width:380,flexShrink:0},drawerPaper:{width:380},fixFee:{"-webkit-appearance":"none !important",margin:0}}}),{name:"RaEmpty"}),yt=function(e){var t=Object(ue.a)(e).basePath,a=gt(e),r=Object(Ne.a)();return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:a.message,children:[Object(n.jsx)(Le.a,{className:a.icon}),Object(n.jsx)(F.a,{variant:"h4",paragraph:!0,children:r("No partners yet")}),Object(n.jsx)(F.a,{variant:"body1",children:r("")})]}),Object(n.jsx)("div",{className:a.toolbar,children:Object(n.jsx)(Ge.a,{variant:"contained",basePath:t})})]})},wt={list:function(e){var t=gt(e),a=function(){e.history.push("/users")};return Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsx)(rt.a,Object(l.a)(Object(l.a)({},e),{},{filter:{acl:"merchant"},exporter:!1,title:"\u5546\u6237",actions:Object(n.jsx)(ft,{}),empty:Object(n.jsx)(yt,{}),children:Object(n.jsxs)(nt.a,{rowClick:"show",children:[Object(n.jsx)(tt.a,{source:"name",label:"\u663e\u793a\u540d"}),Object(n.jsx)(de,{source:"id",label:"\u767b\u5f55\u540d"}),Object(n.jsx)(le,{source:"createTime",label:"\u521b\u5efa\u65f6\u95f4"}),Object(n.jsx)(ct.a,{source:"debugMode",label:"\u8c03\u8bd5"}),Object(n.jsx)(at.a,{label:"\u8d26\u6237\u4f59\u989d",source:"balance",options:{minimumFractionDigits:2,maximumFractionDigits:2}}),Object(n.jsx)(at.a,{label:"\u5e94\u6536",source:"receivable",options:{minimumFractionDigits:2,maximumFractionDigits:2}}),Object(n.jsx)(at.a,{label:"\u624b\u7eed\u8d39",source:"commission",options:{minimumFractionDigits:2,maximumFractionDigits:2}}),Object(n.jsx)(st.a,{}),Object(n.jsx)(it.a,{})]})})),Object(n.jsx)(y.b,{path:"/users/create",children:function(r){var c=r.match;return Object(n.jsx)(We.a,{className:t.drawer,open:!!c,anchor:"right",onClose:a,classes:{paper:t.drawerPaper},children:Object(n.jsx)(pt,Object(l.a)({onCancel:a},e))})}}),Object(n.jsx)(y.b,{path:"/users/:id/show",children:function(t){var r=t.match,c=r&&r.params&&r.params.id,s=c&&"create"!==c;return s?Object(n.jsx)(We.a,{open:s,anchor:"right",onClose:a,children:s?Object(n.jsx)(vt,Object(l.a)({id:decodeURIComponent(c)},e)):null}):null}}),Object(n.jsx)(y.b,{path:"/users/:id",children:function(r){var c=r.match,s=r.location,i=c&&c.params&&"create"!==c.params.id;return i&&(c.isExact||"1"===dt.basename(s.pathname))?Object(n.jsx)(We.a,{open:i,anchor:"right",onClose:a,className:t.drawer,classes:{paper:t.drawerPaper},children:i?Object(n.jsx)(xt,Object(l.a)({id:i?decodeURIComponent(c.params.id):null,onCancel:a},e)):null}):null}})]})}},St=a(450),Nt=a(451),It=a(486),Ct=a(483),kt=function(e){var t=e.handleSubmitWithRedirect,a=e.acl,r=Object(u.a)(e,["handleSubmitWithRedirect","acl"]),s=r.redirect,i=Object(G.useForm)(),o=Object(c.useCallback)((function(){var e=i.getState().values;if(e.pwd){var r=Math.random().toString(36).substring(7);i.change("salt",r),i.change("password",lt()(r+e.pwd)),i.change("pwd",void 0)}a&&i.change("acl",a),t(s)}),[i]);return Object(n.jsx)(Je.a,Object(l.a)(Object(l.a)({},r),{},{handleSubmitWithRedirect:o}))},Dt=function(e){var t=e.redirect;return Object(n.jsx)(J.a,Object(l.a)(Object(l.a)({},e),{},{children:Object(n.jsx)(kt,Object(l.a)({label:"Save",redirect:t,submitOnEnter:!1},e))}))};function Tt(e,t){return Object(n.jsxs)($.a,{toolbar:Object(n.jsx)(Dt,{}),children:[Object(n.jsx)(ze.a,{source:"name",label:"\u663e\u793a\u540d"}),"Create"===e?Object(n.jsx)(ze.a,{source:"id",label:"\u767b\u5f55\u540d"}):null,Object(n.jsx)(ze.a,{source:"pwd",label:"\u5bc6\u7801",type:"password"})]})}var Et=function(e){return Object(n.jsx)(Qe.a,Object(l.a)(Object(l.a)({},e),{},{children:Tt("Create",Object(l.a)(Object(l.a)({},e),{},{redirect:"list",acl:"manager",initialValues:{debugMode:!0}}))}))},Pt=function(e){return Object(n.jsx)(Ke.a,Object(l.a)(Object(l.a)({},e),{},{children:Tt("Edit",Object(l.a)(Object(l.a)({},e),{},{redirect:"list"}))}))},Rt=function(e){var t=e.basePath;return Object(n.jsx)(qe.a,{children:Object(n.jsx)(Ge.a,{basePath:t})})},Ft={list:function(e){Object(It.a)(a,e);var t=Object(Ct.a)(a);function a(){var e;Object(St.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).handleClose=function(){e.props.history.goBack()},e}return Object(Nt.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=(t.push,t.classes,Object(u.a)(t,["push","classes"]));return Object(n.jsxs)(c.Fragment,{children:[Object(n.jsx)(rt.a,Object(l.a)(Object(l.a)({},a),{},{filter:{acl:["admin","manager"]},exporter:!1,title:"\u7ba1\u7406\u5458",actions:Object(n.jsx)(Rt,{}),children:Object(n.jsxs)(nt.a,{children:[Object(n.jsx)(tt.a,{source:"name",label:"\u663e\u793a\u540d"}),Object(n.jsx)(tt.a,{source:"id",label:"\u767b\u5f55\u540d"}),Object(n.jsx)(le,{source:"createTime",label:"\u521b\u5efa\u65f6\u95f4"}),Object(n.jsx)(st.a,{})]})})),Object(n.jsx)(y.b,{path:"/managers/create",children:function(t){var r=t.match;return Object(n.jsx)(We.a,{open:!!r,anchor:"right",onClose:e.handleClose,children:Object(n.jsx)(Et,Object(l.a)({onCancel:e.handleClose},a))})}}),Object(n.jsx)(y.b,{path:"/managers/:id",children:function(t){var r=t.match,c=r&&r.params&&"create"!==r.params.id;return Object(n.jsx)(We.a,{open:c,anchor:"right",onClose:e.handleClose,children:c?Object(n.jsx)(Pt,Object(l.a)({id:c?decodeURIComponent(r.params.id):null,onCancel:e.handleClose},a)):null})}})]})}}]),a}(s.a.Component)},At=a(361),_t=Object(I.a)((function(e){return{message:{textAlign:"center",opacity:"light"===e.palette.type?.5:.8,margin:"0 1em",color:"light"===e.palette.type?"inherit":e.palette.text.primary},icon:{width:"9em",height:"9em"},toolbar:{textAlign:"center",marginTop:"2em"},drawer:{width:380,flexShrink:0},drawerPaper:{width:380},fixFee:{"-webkit-appearance":"none !important",margin:0}}}),{name:"RaEmpty"}),Bt={creditCard:{mdr:.03,fix_fee:5e3},eWallet:{mdr:.028,fix_fee:0},va:{mdr:0,fix_fee:7500},retailOutlets:{mdr:0,fix_fee:8500},disbursement:{mdr:0,fix_fee:7500}},Mt=function(e){var t=e.handleSubmitWithRedirect,a=e.acl,r=Object(u.a)(e,["handleSubmitWithRedirect","acl"]),s=r.redirect,i=Object(G.useForm)(),o=Object(c.useCallback)((function(){var e=i.getState().values;if(e.pwd){var r=Math.random().toString(36).substring(7);i.change("salt",r),i.change("password",lt()(r+e.pwd)),i.change("pwd",void 0)}var n=parseFloat(e.share);if(n>=1&&(n=Number((Number(n)/100).toFixed(4))),i.change("share",n),e.paymentMethod)for(var c in e.paymentMethod){var o=e.paymentMethod[c],l=parseFloat(o.mdr);l>=1&&(l=Number((l/100).toFixed(4))),i.change("paymentMethod.".concat(c,".mdr"),l)}i.change("baseShare",void 0),a&&i.change("acl",a),t(s)}),[i]);return Object(n.jsx)(Je.a,Object(l.a)(Object(l.a)({},r),{},{handleSubmitWithRedirect:o}))},Ht=function(e){var t=e.redirect;return Object(n.jsx)(J.a,Object(l.a)(Object(l.a)({},e),{},{children:Object(n.jsx)(Mt,Object(l.a)({label:"Save",redirect:t,submitOnEnter:!1},e))}))},Wt=function(e){var t=Object(ue.a)(e).basePath,a=_t(e),r=Object(Ne.a)();return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:a.message,children:[Object(n.jsx)(Le.a,{className:a.icon}),Object(n.jsx)(F.a,{variant:"h4",paragraph:!0,children:r("No agents yet")}),Object(n.jsx)(F.a,{variant:"body1",children:r("")})]}),Object(n.jsx)("div",{className:a.toolbar,children:Object(n.jsx)(Ge.a,{variant:"contained",basePath:t})})]})};function Ut(e,t){var a=Object(W.a)(),r=Object(c.useState)(),s=Object(w.a)(r,2),i=(s[0],s[1]),o=Object(c.useState)(!0),d=Object(w.a)(o,2),j=d[0],b=d[1],O=Object(c.useState)(),m=Object(w.a)(O,2),h=m[0],f=m[1],p=_t(t),x=t.className;if(Object(c.useEffect)((function(){a.getList("users",{filter:{acl:"agent"}}).then((function(e){var t=e.data;i(t),b(!1)})).catch((function(e){f(e),b(!1)}))}),[]),j)return Object(n.jsx)(z.a,{});if(h)return Object(n.jsx)(Y.a,{});if(j)return Object(n.jsx)(z.a,{});var v,g=function(t){return"Create"===e?Object(n.jsx)(ze.a,Object(l.a)({},t)):null};return v="Create"===e?Object(n.jsx)(Ht,{acl:"agent"}):Object(n.jsx)(Ht,{}),Object(n.jsxs)($.a,{toolbar:v,children:[Object(n.jsx)(ze.a,{source:"name",label:"\u663e\u793a\u540d"}),Object(n.jsx)(g,{source:"id",label:"\u767b\u5f55\u540d"}),Object(n.jsx)(ze.a,{source:"pwd",label:"\u5bc6\u7801",type:"password"}),Object(n.jsx)(ze.a,{source:"share",defaultValue:"20%"}),Object(n.jsx)(Ye.a,{children:function(e){var t=e.formData,a=(Object(u.a)(e,["formData"]),[]);return t.paymentMethod?a.push(Object(n.jsx)(Ve.a,{source:"baseShare",label:"\u8bbe\u7f6e\u4ee3\u7406\u4ef7",defaultValue:!0})):a.push(Object(n.jsx)(Ve.a,{source:"baseShare",label:"\u8bbe\u7f6e\u4ee3\u7406\u4ef7",defaultValue:!1})),t.baseShare&&a.push(Object(n.jsx)(Ae,{source:"paymentMethod",label:"",defaultValue:Bt,children:Object(n.jsxs)(ke,{children:[Object(n.jsx)(ze.a,{source:"mdr",variant:"standard",label:"mdr"}),Object(n.jsx)(ze.a,{className:H()(p.fixFee,x),source:"fix_fee",variant:"standard",label:"fixed fee"})]})})),a}})]})}var Lt,Jt=function(e){return Object(n.jsx)(Qe.a,Object(l.a)(Object(l.a)({},e),{},{children:Ut("Create",Object(l.a)(Object(l.a)({},e),{},{redirect:"list",acl:"agent",initialValues:{debugMode:!0}}))}))},Vt=function(e){return Object(n.jsx)(Ke.a,Object(l.a)(Object(l.a)({},e),{},{children:Ut("Edit",Object(l.a)(Object(l.a)({},e),{},{redirect:"list"}))}))},Yt={list:function(e){var t=_t(e),a=function(){e.history.goBack()};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(rt.a,Object(l.a)(Object(l.a)({},e),{},{filter:{acl:"agent"},exporter:!1,title:"Agents",empty:Object(n.jsx)(Wt,{}),children:Object(n.jsxs)(nt.a,{children:[Object(n.jsx)(tt.a,{source:"name",label:"\u663e\u793a\u540d"}),Object(n.jsx)(tt.a,{source:"id",label:"\u767b\u5f55\u540d"}),Object(n.jsx)(le,{source:"createTime",label:"\u521b\u5efa\u65f6\u95f4"}),Object(n.jsx)(at.a,{source:"share",label:"\u5206\u6210",options:{style:"percent"}}),Object(n.jsx)(at.a,{source:"balance",label:"\u8d26\u6237\u4f59\u989d",options:{minimumFractionDigits:2,maximumFractionDigits:2}}),Object(n.jsx)(st.a,{})]})})),Object(n.jsx)(y.b,{path:"/agents/create",children:function(r){var c=r.match;return Object(n.jsx)(We.a,{className:t.drawer,open:!!c,anchor:"right",onClose:a,classes:{paper:t.drawerPaper},children:Object(n.jsx)(Jt,Object(l.a)({onCancel:a},e))})}}),Object(n.jsx)(y.b,{path:"/agents/:id",children:function(r){var c=r.match,s=r.location,i=c&&c.params&&"create"!==c.params.id;return i&&(c.isExact||"1"===At.basename(s.pathname))?Object(n.jsx)(We.a,{open:i,anchor:"right",onClose:a,className:t.drawer,classes:{paper:t.drawerPaper},children:i?Object(n.jsx)(Vt,Object(l.a)({id:i?decodeURIComponent(c.params.id):null,onCancel:a},e)):null}):null}})]})}},zt=a(1144),Xt=a(1186),$t=a(1143),qt=a(1145),Gt=a(11),Qt=a(51),Kt=function(e){var t=Object(W.a)(),a=Object(U.a)(),r=Object(c.useState)(),s=Object(w.a)(r,2),i=s[0],o=s[1];return Object(c.useEffect)((function(){t.getList("providers").then((function(e){var t=e.data;return o(t)})).catch((function(e){return a(e.message,"warning")}))}),[]),Object(n.jsxs)(Xt.a,Object(l.a)(Object(l.a)({},e),{},{children:[Object(n.jsx)(ze.a,{label:"\u8ba2\u5355id",source:"id"}),Object(n.jsx)(ze.a,{label:"\u5546\u6237\u8ba2\u5355",source:"merchantOrderId",alwaysOn:!0}),Object(n.jsx)(ze.a,{label:"\u4f9b\u5e94\u5546\u8ba2\u5355",source:"providerOrderId"}),Object(n.jsx)(ze.a,{label:"\u5546\u6237",source:"merchantName",alwaysOn:!0}),Object(n.jsx)($t.a,{label:"\u5f00\u59cb\u65e5\u671f",source:"startTime"}),Object(n.jsx)($t.a,{label:"\u7ed3\u675f\u65e5\u671f",source:"endTime"}),Object(n.jsx)(q.a,{label:"\u8ba2\u5355\u72b6\u6001",source:"used",choices:[{id:!0,name:"\u5df2\u5b8c\u6210"},{id:{$ne:!0},name:"\u672a\u5b8c\u6210"},{id:void 0,name:"\u5168\u90e8"}]}),Object(n.jsx)(q.a,{label:"\u4f9b\u5e94\u5546",source:"provider",choices:i})]}))},Zt=function(e){e.permissions;var t=Object(u.a)(e,["permissions"]).record,a=Object(Gt.e)(),r=Object(U.a)();function c(e,t){return g("".concat(e,"/").concat(t.action),{method:"POST",body:JSON.stringify({_id:decodeURIComponent(t.id)})}).then((function(e){var t=e.json;return r("done","info"),{data:t}})).catch((function(e){r(e.message,"warning")}))}return Object(n.jsxs)(zt.a,{variant:"text",color:"primary","aria-label":"text primary button group",children:[Object(n.jsx)(C.a,{onClick:function(){c("bills",{action:"notify",id:t.id})},children:"notify"}),Object(n.jsx)(C.a,{onClick:function(){c("bills",{action:"refund",id:t.id}).then((function(){a(Object(Qt.e)())}))},children:"refund"})]})},ea=function(e){var t=N()(e,["payment",e.paymentMethod],{}),a="";return t.mdr&&(a+=(100*t.mdr).toFixed(2)+"%"),t.fix_fee&&(a+=(a.length?"+":"")+t.fix_fee),a},ta={list:function(e){var t=e.permissions,a=Object(u.a)(e,["permissions"]);return Object(n.jsx)(rt.a,Object(l.a)(Object(l.a)({},a),{},{filters:Object(n.jsx)(Kt,{}),filterDefaultValues:{used:!0,paymentMethod:{$nin:["disbursement","topup","withdrawal"]}},exporter:!1,title:"\u5145\u503c\u8ba2\u5355",bulkActionButtons:!1,sort:{field:"time",order:"DESC"},children:Object(n.jsxs)(ve,{footerResource:"billsSummary",children:[Object(n.jsx)(tt.a,{source:"id",footerText:"Total"}),Object(n.jsx)(tt.a,{source:"merchantName",label:"\u5546\u6237"}),Object(n.jsx)(tt.a,{source:"merchantOrderId",label:"\u5546\u6237\u8ba2\u5355"}),Object(n.jsx)(tt.a,{source:"providerOrderId",label:"\u4f9b\u5e94\u5546\u8ba2\u5355"}),Object(n.jsx)(tt.a,{source:"provider",label:"\u4f9b\u5e94\u5546"}),Object(n.jsx)(tt.a,{source:"paymentMethod",label:"\u652f\u4ed8\u65b9\u5f0f"}),Object(n.jsx)(qt.a,{label:"\u8d39\u7528",alwaysOn:!0,render:ea}),Object(n.jsx)(at.a,{source:"money",footerSource:"money"}),Object(n.jsx)(tt.a,{source:"currency"}),Object(n.jsx)(le,{source:"time",label:"\u521b\u5efa\u65f6\u95f4"}),Object(n.jsx)(je,{source:"status"}),Object(n.jsx)(Zt,{permissions:t,alwaysOn:!0})]})}))},show:function(e){return Object(n.jsx)(Ze.a,Object(l.a)(Object(l.a)({},e),{},{children:Object(n.jsxs)(et.a,{children:[Object(n.jsx)(tt.a,{source:"name",label:"\u663e\u793a\u540d"}),Object(n.jsx)(tt.a,{source:"key"}),Object(n.jsx)(tt.a,{source:"merchantid"}),Object(n.jsx)(at.a,{source:"daily",label:"\u5f53\u65e5\u6536\u5165",options:{minimumFractionDigits:2,maximumFractionDigits:2}}),Object(n.jsx)(at.a,{source:"profit",label:"\u8d26\u6237\u4f59\u989d",options:{minimumFractionDigits:2,maximumFractionDigits:2}})]})}))}},aa=function(e){var t=Object(W.a)(),a=Object(U.a)(),r=Object(c.useState)(),s=Object(w.a)(r,2),i=s[0],o=s[1];return Object(c.useEffect)((function(){t.getList("providers").then((function(e){var t=e.data;return o(t)})).catch((function(e){return a(e.message,"warning")}))}),[]),Object(n.jsxs)(Xt.a,Object(l.a)(Object(l.a)({},e),{},{children:[Object(n.jsx)(ze.a,{label:"\u8ba2\u5355id",source:"id"}),Object(n.jsx)(ze.a,{label:"\u5546\u6237\u8ba2\u5355",source:"merchantOrderId",alwaysOn:!0}),Object(n.jsx)(ze.a,{label:"\u4f9b\u5e94\u5546\u8ba2\u5355",source:"providerOrderId"}),Object(n.jsx)(ze.a,{label:"\u5546\u6237",source:"merchantName",alwaysOn:!0}),Object(n.jsx)($t.a,{label:"\u5f00\u59cb\u65e5\u671f",source:"startTime"}),Object(n.jsx)($t.a,{label:"\u7ed3\u675f\u65e5\u671f",source:"endTime"}),Object(n.jsx)(q.a,{label:"\u8ba2\u5355\u72b6\u6001",source:"used",choices:[{id:!0,name:"\u5df2\u5b8c\u6210"},{id:{$ne:!0},name:"\u672a\u5b8c\u6210"},{id:void 0,name:"\u5168\u90e8"}]}),Object(n.jsx)(q.a,{label:"\u4f9b\u5e94\u5546",source:"provider",choices:i})]}))},ra=function(e){e.permissions;var t=Object(u.a)(e,["permissions"]).record,a=(Object(Gt.e)(),Object(U.a)());return Object(n.jsx)(zt.a,{variant:"text",color:"primary","aria-label":"text primary button group",children:Object(n.jsx)(C.a,{onClick:function(){var e,r;e="bills",r={action:"notify",id:t.id},g("".concat(e,"/").concat(r.action),{method:"POST",body:JSON.stringify({_id:decodeURIComponent(r.id)})}).then((function(e){var t=e.json;return a("done","info"),{data:t}})).catch((function(e){a(e.message,"warning")}))},children:"notify"})})},na=function(e){var t=N()(e,["payment",e.paymentMethod],{}),a="";return t.mdr&&(a+=(100*t.mdr).toFixed(2)+"%"),t.fix_fee&&(a+=(a.length?"+":"")+t.fix_fee),a},ca={list:function(e){var t=e.permissions,a=Object(u.a)(e,["permissions"]);return Object(n.jsx)(rt.a,Object(l.a)(Object(l.a)({},a),{},{filters:Object(n.jsx)(aa,{}),filterDefaultValues:{used:!0,paymentMethod:"disbursement"},exporter:!1,title:"\u5145\u503c\u8ba2\u5355",bulkActionButtons:!1,sort:{field:"time",order:"DESC"},children:Object(n.jsxs)(ve,{footerResource:"billsSummary",children:[Object(n.jsx)(tt.a,{source:"id",footerText:"Total"}),Object(n.jsx)(tt.a,{source:"merchantName",label:"\u5546\u6237"}),Object(n.jsx)(tt.a,{source:"merchantOrderId",label:"\u5546\u6237\u8ba2\u5355"}),Object(n.jsx)(tt.a,{source:"providerOrderId",label:"\u4f9b\u5e94\u5546\u8ba2\u5355"}),Object(n.jsx)(tt.a,{source:"provider",label:"\u4f9b\u5e94\u5546"}),Object(n.jsx)(qt.a,{label:"\u8d39\u7528",alwaysOn:!0,render:na}),Object(n.jsx)(at.a,{source:"money",footerSource:"money"}),Object(n.jsx)(tt.a,{source:"currency"}),Object(n.jsx)(le,{source:"time",label:"\u521b\u5efa\u65f6\u95f4"}),Object(n.jsx)(tt.a,{source:"status"}),Object(n.jsx)(ra,{permissions:t,alwaysOn:!0})]})}))},show:function(e){return Object(n.jsx)(Ze.a,Object(l.a)(Object(l.a)({},e),{},{children:Object(n.jsxs)(et.a,{children:[Object(n.jsx)(tt.a,{source:"name",label:"\u663e\u793a\u540d"}),Object(n.jsx)(tt.a,{source:"key"}),Object(n.jsx)(tt.a,{source:"merchantid"}),Object(n.jsx)(at.a,{source:"daily",label:"\u5f53\u65e5\u6536\u5165",options:{minimumFractionDigits:2,maximumFractionDigits:2}}),Object(n.jsx)(at.a,{source:"profit",label:"\u8d26\u6237\u4f59\u989d",options:{minimumFractionDigits:2,maximumFractionDigits:2}})]})}))}},sa=a(1146),ia=a(1147),oa=function(e){var t=(e.balance||0)+(e.receivable||0);return 0===t?"0":"".concat(t,"=B").concat(e.balance,"+R").concat(e.receivable)},la=function(e){if(e.outstandingBalanceError)return e.outstandingBalanceError;var t=(e.outstandingBalance||0)+(e.outstandingReceivable||0);return 0===t?"0":"".concat(t,"=B").concat(e.outstandingBalance,"+R").concat(e.outstandingReceivable)},da=function(e){var t=e.data,a=e.ids,r=(Object(u.a)(e,["data","ids"]),Object(W.a)()),s=Object(U.a)(),i=Object(c.useState)(),o=Object(w.a)(i,2),l=o[0],d=o[1],j=Object(c.useState)(),b=Object(w.a)(j,2),O=b[0],m=b[1];return Object(c.useEffect)((function(){0!==a.length&&(r.getList("providerBalances",{filter:{account:a}}).then((function(e){var t=e.data;d(t)})).catch((function(e){s("object"===typeof e?e.message:e.toString(),"warning")})),r.getList("outstandingBalances",{filter:{account:a}}).then((function(e){var t=e.data;return m(t)})).catch((function(e){s("object"===typeof e?e.message:e.toString(),"warning")})))}),[a]),l&&O?(l.forEach((function(e){t[e.id].balance=e.balance||0,t[e.id].receivable=e.receivable||0})),O.forEach((function(e){e.err?t[e.id].outstandingBalanceError=e.err:(t[e.id].outstandingBalance=e.balance,t[e.id].outstandingReceivable=e.receivable)})),Object(n.jsxs)(nt.a,{children:[Object(n.jsx)(tt.a,{source:"name"}),Object(n.jsx)(ct.a,{source:"forecore",label:"\u56db\u65b9"}),Object(n.jsx)(ct.a,{source:"withdrawal",label:"\u652f\u6301\u4ee3\u4ed8"}),Object(n.jsx)(ct.a,{source:"reconciliation",label:"\u81ea\u52a8\u5bf9\u8d26"}),Object(n.jsx)(sa.a,{source:"supportedMethods",label:"\u652f\u4ed8\u65b9\u5f0f",children:Object(n.jsx)(ia.a,{children:Object(n.jsx)(ye,{})})}),Object(n.jsx)(qt.a,{label:"Local Account",render:oa}),Object(n.jsx)(qt.a,{label:"Outstanding Account",render:la})]})):Object(n.jsx)(z.a,{})},ja={list:function(e){return Object(n.jsx)(rt.a,Object(l.a)(Object(l.a)({},e),{},{exporter:!1,title:"\u4f9b\u5e94\u5546",bulkActionButtons:!1,children:Object(n.jsx)(da,Object(l.a)({},e))}))}},ba=a(1149),ua=a(1150),Oa=a(1151),ma=a(1130),ha=a(1057),fa=a(454),pa=a.n(fa),xa=a(455),va=a.n(xa),ga=a(1182),ya=a(1148),wa=a(740).default,Sa=Object(I.a)((function(e){return{header:{borderBottom:"1px solid #e9ecef",display:"flex",fontSize:"1.25em",margin:0,minHeight:"64px",overflow:"hidden",padding:"0 16px",textOverflow:"ellipsis",whiteSpace:"nowrap",width:"100%"},item:{color:"#333",padding:"15px 40px 0px 30px","margin-bottom":"15px"},subtitle:{display:"block",overflow:"visible",color:"#333","margin-bottom":"10px","margin-top":0,"font-size":"32px"},paper:{padding:e.spacing(2),margin:"auto",maxWidth:500},image:{width:128,height:128},img:{margin:"auto",display:"block",maxWidth:"100%",maxHeight:"100%"}}})),Na={code:function(e){e.language;var t=e.value;return Object(n.jsx)(ga.a,{style:ya.a,language:"javascript",children:t})}},Ia={list:function(e){var t=e.options,a=(e.permissions,Object(u.a)(e,["options","permissions"]),Sa()),r=Object(ba.a)().identity,s=Object(W.a)(),i=Object(c.useState)(),o=Object(w.a)(i,2),l=o[0],d=o[1];return Object(c.useEffect)((function(){r&&"merchant"==r.acl&&s.getOne("users",{id:r.id}).then((function(e){var t=e.data;return d(t)})).catch((function(){}))}),[r]),Object(n.jsxs)("div",{className:"show-page",children:[Object(n.jsx)(X.b,{defaultTitle:t.label}),l?Object(n.jsxs)(k.a,{children:[Object(n.jsx)(ua.a,{title:"\u5bf9\u63a5\u53c2\u6570",className:a.header}),Object(n.jsxs)(Oa.a,{container:!0,direction:"row",children:[Object(n.jsxs)(Oa.a,{item:!0,xs:4,className:a.item,children:[Object(n.jsx)(F.a,{variant:"subtitle1",children:"MD5 Key"}),Object(n.jsx)(F.a,{variant:"body2",gutterBottom:!0,children:l.key})]}),Object(n.jsx)(ma.a,{orientation:"vertical",flexItem:!0}),Object(n.jsxs)(Oa.a,{item:!0,xs:4,className:a.item,children:[Object(n.jsx)(F.a,{variant:"subtitle1",children:"PartnerId"}),Object(n.jsx)(F.a,{variant:"body2",gutterBottom:!0,children:l.merchantid})]})]})]}):null,Object(n.jsx)(k.a,{children:Object(n.jsx)(ha.a,{children:Object(n.jsx)(pa.a,{plugins:[va.a],renders:Na,children:wa})})})]})}},Ca=a(7),ka=(a(459),a(1152)),Da=a(1189),Ta=a(1153),Ea=a(1188),Pa=(Object(Ca.a)((function(e){var t;return{root:(t={},Object(b.a)(t,e.breakpoints.up("sm"),{order:-1,width:"15em",marginRight:"1em"}),Object(b.a)(t,e.breakpoints.down("sm"),{display:"none"}),t)}}))(k.a),function(e){return e.balance+e.commission}),Ra={list:function(e){e.permissions;var t=Object(u.a)(e,["permissions"]);return Object(n.jsx)(rt.a,Object(l.a)(Object(l.a)({},t),{},{title:"\u62a5\u8868",bulkActionButtons:!1,sort:{field:"time",order:"DESC"},children:Object(n.jsxs)(ve,{footerResource:"statementsSummary",children:[Object(n.jsx)(Ta.a,{source:"time",footerText:"Total"}),Object(n.jsx)(Ea.a,{label:"\u5546\u6237",source:"account",reference:"users",link:!1,children:Object(n.jsx)(tt.a,{source:"name"})}),Object(n.jsx)(tt.a,{source:"paymentMethod",label:"\u652f\u4ed8\u65b9\u5f0f"}),Object(n.jsx)(qt.a,{source:"balance",label:"\u6536\u5165",render:Pa,footerRender:Pa}),Object(n.jsx)(at.a,Object(b.a)({source:"commission",label:"\u624b\u7eed\u8d39",footerSource:"money",options:{maximumFractionDigits:2}},"footerSource","commission")),Object(n.jsx)(at.a,{source:"count",label:"\u4ea4\u6613\u7b14\u6570",footerSource:"money",options:{maximumFractionDigits:0}})]})}))}},Fa=a(169),Aa=a.n(Fa),_a=a(309),Ba=a(498),Ma=a(1120),Ha=a(1154),Wa=a(35),Ua=a(1056),La=function(){},Ja=Object(I.a)({actionButton:{marginBottom:"29px"}}),Va=function(e){var t=e.className,a=Object(u.a)(e,["className"]),r=Object(W.a)(),s=Object(c.useState)(),i=Object(w.a)(s,2),o=i[0],d=i[1],j=Object(U.a)();Object(c.useEffect)((function(){r.getList("providers").then((function(e){var t=e.data;d(t)})).catch((function(e){j(e.message,"warning")}))}),[]);var b=Ja(),O=Object(Ua.a)(),m=[{id:null,name:"All"}];return o&&(m=m.concat(o)),Object(n.jsx)(qe.a,Object(l.a)(Object(l.a)({className:t},Object(he.c)(a)),{},{children:Object(n.jsx)(G.Form,{onSubmit:La,children:function(e){var t=e.handleSubmit;return Object(n.jsx)("form",{onSubmit:t,children:Object(n.jsxs)(Ba.a,{display:"flex",alignItems:"flex-end",mb:1,children:[Object(n.jsx)(Ba.a,{component:"span",mr:2,children:Object(n.jsx)(q.a,{label:"\u4f9b\u5e94\u5546",choices:m,source:"provider"})}),Object(n.jsx)(Ba.a,{component:"span",mr:2,children:Object(n.jsx)(Ha.a,{label:"\u65e5\u671f",source:"date"})}),Object(n.jsx)(Ba.a,{component:"span",mr:2,children:Object(n.jsx)(Ye.a,{children:function(e){var t=e.formData;Object(u.a)(e,["formData"]);return Object(n.jsx)(Wa.a,{className:b.actionButton,variant:"contained",size:"medium",onClick:Object(_a.a)(Aa.a.mark((function e(){var a;return Aa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.date){e.next=2;break}return e.abrupt("return",j("Date must be specified","error"));case 2:return e.prev=2,e.next=5,r.actions("recon",Object(l.a)({method:"check"},t));case 5:if(a=e.sent){e.next=8;break}return e.abrupt("return");case 8:O(),j("".concat(a.data.modified," records updated"),"info"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),j(e.t0.message,"warning");case 15:case"end":return e.stop()}}),e,null,[[2,12]])}))),label:"\u91cd\u65b0\u5bf9\u8d26"})}})})]})})}})}))},Ya={list:function(e){return Object(n.jsx)(rt.a,Object(l.a)(Object(l.a)({},e),{},{exporter:!1,actions:Object(n.jsx)(Va,{}),title:"\u5bf9\u8d26\u5355",bulkActionButtons:!1,sort:{field:"time",order:"DESC"},children:Object(n.jsxs)(ve,{children:[Object(n.jsx)(Ta.a,{source:"time",label:"\u65f6\u95f4"}),Object(n.jsx)(tt.a,{source:"account",label:"\u4f9b\u5e94\u5546"}),Object(n.jsx)(tt.a,{source:"recon_tag",label:"\u5bf9\u8d26\u6807\u8bb0"}),Object(n.jsx)(at.a,{source:"received",label:"\u6536\u6b3e"}),Object(n.jsx)(at.a,{source:"commission",label:"\u624b\u7eed\u8d39"})]})}))},create:function(e){var t=Object(Ma.a)(),a=Object(W.a)(),r=Object(U.a)();return Object(n.jsx)(G.Form,{onSubmit:La,children:function(e){var c=e.handleSubmit;return Object(n.jsxs)("form",{onSubmit:c,children:[Object(n.jsx)("p",{children:"\u9009\u62e9\u521d\u59cb\u5bf9\u8d26\u7684\u65e5\u671f"}),Object(n.jsx)(Ha.a,{label:"\u65e5\u671f",source:"date"}),Object(n.jsx)(Ye.a,{children:function(e){var c=e.formData;Object(u.a)(e,["formData"]);return Object(n.jsx)(J.a,{children:Object(n.jsx)(Wa.a,{variant:"contained",size:"medium",label:"\u521d\u59cb\u5316\u5bf9\u8d26\u6570\u636e",onClick:Object(_a.a)(Aa.a.mark((function e(){var n;return Aa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.date){e.next=2;break}return e.abrupt("return",r("Date must be specified","error"));case 2:return e.prev=2,e.next=5,a.actions("recon",Object(l.a)({method:"check",end:new Date},c));case 5:if(n=e.sent){e.next=8;break}return e.abrupt("return");case 8:if(0!==n.data.modified){e.next=10;break}return e.abrupt("return",r("no data received, system will check data per 30 mins. you will see the results if ","warning"));case 10:t("/recon"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),r(e.t0.message,"warning");case 16:case"end":return e.stop()}}),e,null,[[2,13]])})))})})}})]})}})}},za=a(1123),Xa=a(1124),$a=a(1155),qa=a(1157),Ga=a(1158),Qa=a(1179),Ka=a(1156),Za=a(1159),er=function(){},tr=Object(I.a)((function(e){return{actionButton:{marginBottom:"29px"},leftIcon:{marginRight:e.spacing(1)}}})),ar=function(e){e.className,e.variant;var t=e.disabled,a=e.history,r=Object(L.a)(),s=Object(U.a)(),i=tr(e),o=Object(c.useState)(),l=Object(w.a)(o,2);l[0],l[1];return Object(n.jsx)(J.a,{children:Object(n.jsx)(Ye.a,{children:function(e){var c=e.formData;Object(u.a)(e,["formData"]);return Object(n.jsxs)(C.a,{varirant:"contained",disabled:t,type:"button",color:"primary",onClick:function(){var e=new FormData;e.append("settlement",c.file.rawFile,c.file.title),e.append("provider",c.provider),g("recon/upload",{method:"POST",body:e}).then((function(e){e.headers;var t=e.json.modified;s("".concat(t," records updated"),"success")})).catch((function(e){var t=e.message,n=e.status;if(401===n||403===n)return r();if(t){if(Array.isArray(t)){if(t.findIndex((function(e){return"orderId not exists"==e.err}))>=0)return a.push({pathname:"/refill-bills",state:{bills:t,provider:c.provider}});var i=t.find((function(e){return"orderId not exists"!=e.err}));if(i)return s(i.err,"warning")}return s(t.toString(),"warning")}}))},children:[Object(n.jsx)($a.a,{size:18,thickness:2,className:i.leftIcon}),"Upload"]})}})})},rr=function(e){var t=e.onClose,a=(e.selectedValue,e.open),r=e.providers,c=Object(u.a)(e,["onClose","selectedValue","open","providers"]);return a?Object(n.jsxs)(za.a,{onClose:t,"aria-labelledby":"upload-dialog",open:a,children:[Object(n.jsx)(Xa.a,{id:"upload-dialog",children:"Select settlement file"}),Object(n.jsxs)($.a,{handleSubmit:er,toolbar:Object(n.jsx)(ar,Object(l.a)({},c)),children:[Object(n.jsx)(q.a,{source:"provider",choices:[].concat(r),variant:"standard"}),Object(n.jsx)(Qa.a,{source:"file",accept:"text/csv",children:Object(n.jsx)(Ka.a,{source:"src",title:"title"})})]})]}):null},nr=function(e){var t=e.className,a=(e.providers,Object(u.a)(e,["className","providers"])),r=Object(c.useState)(),s=Object(w.a)(r,2),i=s[0],o=s[1];return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(rr,Object(l.a)({open:i,onClose:function(){return o(!1)}},e)),Object(n.jsxs)(qe.a,Object(l.a)(Object(l.a)({className:t},Object(he.c)(a)),{},{children:[Object(n.jsx)(Wa.a,{label:"upload",onClick:function(){o(!0)},children:Object(n.jsx)($a.a,{})}),Object(n.jsx)(Wa.a,{onClick:er,label:"batch",children:Object(n.jsx)(qa.a,{})})]}))]})},cr=function(e){return Object(n.jsx)(Wa.a,{label:"Settlement",children:Object(n.jsx)(qa.a,{})})},sr=function(e){var t=e.providers,a=[];return t&&(a=a.concat(t)),Object(n.jsx)(ka.a,{label:"Providers",icon:Object(n.jsx)(Ga.a,{}),children:a.map((function(e){return Object(n.jsx)(Da.a,{label:e.name,value:{provider:e.id}})}))})},ir=function(e){return Object(n.jsxs)(ka.a,{label:"unsettled Only",icon:Object(n.jsx)(qa.a,{}),children:[Object(n.jsx)(Da.a,{label:"Yes",value:{unsettled:!0}}),Object(n.jsx)(Da.a,{label:"No",value:{unsettled:!1}})]})},or=Object(Ca.a)((function(e){var t;return{root:(t={},Object(b.a)(t,e.breakpoints.up("sm"),{order:-1,width:"15em",marginRight:"1em"}),Object(b.a)(t,e.breakpoints.down("sm"),{display:"none"}),t)}}))(k.a),lr=function(e){return Object(n.jsx)(or,{children:Object(n.jsxs)(ha.a,{children:[Object(n.jsx)(Za.a,{source:"id"}),Object(n.jsx)(sr,Object(l.a)({},e)),Object(n.jsx)(ir,Object(l.a)({},e))]})})},dr=function(e){var t=e.record;Object(u.a)(e,["record"]);return t.recon_id?null:Object(n.jsx)(Wa.a,{label:"Settle"})},jr={Recon:Ya,ReconManual:{list:function(e){var t=Object(W.a)(),a=Object(c.useState)(),r=Object(w.a)(a,2),s=r[0],i=r[1],o=Object(U.a)();return Object(c.useEffect)((function(){t.getList("providers").then((function(e){var t=e.data;i(t)})).catch((function(e){o(e.message,"warning")}))}),[]),s?Object(n.jsx)(rt.a,Object(l.a)(Object(l.a)({},e),{},{resource:"recon",aside:Object(n.jsx)(lr,Object(l.a)({providers:s},e)),filterDefaultValues:{unsettled:!0},actions:Object(n.jsx)(nr,Object(l.a)({providers:s},e)),bulkActionButtons:Object(n.jsx)(cr,Object(l.a)({},e)),exporter:!1,title:"\u4eba\u5de5\u5bf9\u8d26",sort:{field:"time",order:"DESC"},children:Object(n.jsxs)(ve,{children:[Object(n.jsx)(tt.a,{source:"id"}),Object(n.jsx)(tt.a,{source:"merchantName",label:"\u5546\u6237"}),Object(n.jsx)(tt.a,{source:"providerOrderId",label:"\u4f9b\u5e94\u5546\u8ba2\u5355"}),Object(n.jsx)(tt.a,{source:"provider",label:"\u4f9b\u5e94\u5546"}),Object(n.jsx)(at.a,{source:"money",footerSource:"money"}),Object(n.jsx)(tt.a,{source:"currency"}),Object(n.jsx)(le,{source:"time",label:"\u521b\u5efa\u65f6\u95f4"}),Object(n.jsx)(tt.a,{label:"\u5bf9\u8d26ID",source:"recon_id",alwaysOn:!0}),Object(n.jsx)(dr,{alwaysOn:!0})]})})):Object(n.jsx)(z.a,{})}}},br=a(1160),ur=Object(I.a)((function(e){return{mb2:{marginBottom:"2em"},header:{borderBottom:"1px solid #e9ecef",display:"flex",fontSize:"1.25em",margin:"0px",minHeight:"64px",overflow:"hidden",padding:"0 16px",textOverflow:"ellipsis",whiteSpace:"nowrap",width:"100%"},item:{color:"#333",padding:"15px 40px 0px 30px","margin-bottom":"15px"},subtitle:{display:"block",overflow:"visible",color:"#333","margin-bottom":"10px","margin-top":0,"font-size":"32px"},paper:{padding:e.spacing(2),margin:"auto",maxWidth:500},image:{width:128,height:128},img:{margin:"auto",display:"block",maxWidth:"100%",maxHeight:"100%"}}})),Or=function(e){var t=e.user,a=Object(u.a)(e,["user"]),r=Object(W.a)(),s=(Object(Ua.a)(),Object(c.useState)()),i=Object(w.a)(s,2),o=i[0],d=i[1],j=Object(n.jsx)(C.a,{color:"inherit",size:"small",onClick:function(){r.update("users",{data:{debugMode:!1}}).then((function(){d(!0)}))},children:"DISABLE DEBUG"});return Object(n.jsx)(br.a,{in:!o&&t&&t.debugMode,children:Object(n.jsx)(A.a,Object(l.a)(Object(l.a)({severity:"warning",variant:"filled"},a),{},{action:j,children:"\u60a8\u6b63\u5728\u4f7f\u7528\u8c03\u8bd5\u63a5\u53e3\uff0c\u5728\u6b63\u5f0f\u4e0a\u7ebf\u4e4b\u524d\u8bf7\u52a1\u5fc5\u5173\u95ed\u8c03\u8bd5\u6a21\u5f0f"}))})},mr=function(e,t){if(!e)return null;switch(e.acl){case"admin":case"manager":return t.commission;default:return t.balance}},hr={list:function(e){var t=e.options,a=(e.permissions,Object(u.a)(e,["options","permissions"]),ur()),r=Object(ba.a)().identity,s=Object(W.a)(),i=Object(c.useState)(),o=Object(w.a)(i,2),l=o[0],d=o[1];return Object(c.useEffect)((function(){r&&s.getOne("users",{id:"admin"===r.acl||"manager"==r.acl?"system":r.id}).then((function(e){var t=e.data;return d(t)})).catch((function(){}))}),[r]),Object(n.jsxs)("div",{className:"show-page",children:["merchant"===N()(r,"acl")&&Object(n.jsx)(Or,{user:l,className:a.mb2}),Object(n.jsx)(X.b,{defaultTitle:t.label}),l?Object(n.jsxs)(k.a,{children:[Object(n.jsx)(ua.a,{title:"Summary",className:a.header}),Object(n.jsxs)(Oa.a,{container:!0,direction:"row",children:[Object(n.jsxs)(Oa.a,{item:!0,xs:3,className:a.item,children:[Object(n.jsx)(F.a,{variant:"subtitle1",className:a.subtitle,children:mr(r,l)||0}),Object(n.jsx)(F.a,{variant:"body2",gutterBottom:!0,children:"Balance"})]}),Object(n.jsx)(ma.a,{orientation:"vertical",flexItem:!0}),Object(n.jsxs)(Oa.a,{item:!0,xs:3,className:a.item,children:[Object(n.jsx)(F.a,{variant:"subtitle1",className:a.subtitle,children:l.count||0}),Object(n.jsx)(F.a,{variant:"body2",gutterBottom:!0,children:"Total Transaction"})]}),"merchant"===N()(r,"acl")?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(ma.a,{orientation:"vertical",flexItem:!0}),Object(n.jsxs)(Oa.a,{item:!0,xs:3,className:a.item,children:[Object(n.jsx)(F.a,{variant:"subtitle1",className:a.subtitle,children:l.receivable||0}),Object(n.jsx)(F.a,{variant:"body2",gutterBottom:!0,children:"Receivable"})]})]}):null]})]}):null]})}},fr=a(1161),pr=a(1125),xr=a(1126),vr=a(466),gr=a.n(vr),yr=a(167),wr=a.n(yr),Sr=a(467),Nr=a.n(Sr),Ir=a(468),Cr=a.n(Ir),kr=a(469),Dr=a.n(kr),Tr=a(470),Er=a.n(Tr),Pr=Object(I.a)((function(e){return{qrcode:{display:"flex",flexDirection:"column",margin:"auto",width:"fit-content"},leftIcon:{marginRight:e.spacing(1)}}})),Rr=function(e){e.providers;var t=e.users,a=Object(G.useFormState)().values,r=Object(U.a)(),s=Object(c.useState)(),i=Object(w.a)(s,2),o=i[0],l=i[1],d=Object(c.useState)(),j=Object(w.a)(d,2),b=(j[0],j[1]),u=Pr(),O=function(e){var n=t.find((function(e){return e.id==a.partner}));if(!n)return r("no such partner","error");var c=window.location.origin+"/";if(window.location.search){var s=wr.a.parse(window.location.search.slice(1)).server;if(s){var i=s.charAt(s.length-1);"/"!=i&&"\\"!=i||(s=s.slice(0,-1)),c=Nr.a.format({protocol:window.location.protocol,host:s})+"/"}}var o=new Date,l={cb_url:c+"demo/result",currency:"CNY",partnerId:n.merchantid,money:a.money,outOrderId:"TESTORDER"+o.getTime(),return_url:window.location.href,time:o.getTime(),userId:a.userId,provider:a.provider};if(!l.userId||!l.money)return r("\u8bf7\u6b63\u786e\u586b\u5199\u53c2\u6570","warning");var d=n.key;l.sign=lt()(d+wr.a.stringify(Cr()(l))),fetch(c+"forecore/order?"+wr.a.stringify(l),{mode:"cors"}).then((function(e){return e.json()})).then((function(t){var a=t.err,n=t.detail,c=t.url;if(a)return r(n||a,"warning");e(null,c)})).catch((function(e){return r(e.message,"warning")}))},m=function(){l(null)};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(za.a,{open:!!o,onClose:m,maxWidth:"sm",children:[Object(n.jsx)(Xa.a,{children:"Scan me"}),Object(n.jsx)(pr.a,{children:Object(n.jsx)(gr.a,{className:u.qrcode,value:o||"",size:256})}),Object(n.jsx)(xr.a,{children:Object(n.jsx)(C.a,{onClick:m,color:"primary",children:"Close"})})]}),Object(n.jsxs)(J.a,{children:[Object(n.jsxs)(C.a,{variant:"contained",type:"button",color:"primary","aria-label":"Recharge",onClick:function(){O((function(e,t){window.location.href=t}))},children:[Object(n.jsx)(Dr.a,{className:u.leftIcon}),"Jump to the url"]}),Object(n.jsxs)(C.a,{variant:"contained",type:"button",color:"primary","aria-label":"QRcode",onClick:function(){O((function(e,t){l(t),b(!0)}))},children:[Object(n.jsx)(Er.a,{className:u.leftIcon}),"Make a QRCode"]})]})]})},Fr={list:function(e){var t=e.options,a=e.permissions,r=(Object(u.a)(e,["options","permissions"]),Object(W.a)()),s=Object(c.useState)(),i=Object(w.a)(s,2),o=i[0],l=i[1],d=Object(c.useState)(),j=Object(w.a)(d,2),b=j[0],O=j[1];return Object(c.useEffect)((function(){r.getList("providers").then((function(e){var t=e.data;return l(t)})).catch((function(){})),r.getList("users",{filter:{acl:"merchant"}}).then((function(e){var t=e.data;return O(t)})).catch((function(){}))}),[]),Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(k.a,{children:[Object(n.jsx)(X.b,{defaultTitle:t.label}),null==o||null==b?Object(n.jsx)(z.a,{}):Object(n.jsxs)($.a,{toolbar:Object(n.jsx)(Rr,{providers:o,users:b}),submitOnEnter:!1,children:[Object(n.jsx)(q.a,{source:"partner",label:"Partner",choices:b}),Object(n.jsx)(ze.a,{source:"userId",label:"UserId"}),Object(n.jsx)(fr.a,{source:"money",label:"money"}),"merchant"==a||"agent"==a?null:Object(n.jsx)(q.a,{source:"provider",label:"Provider",choices:o.map((function(e){return{id:e.name,name:e.name}}))})]})]})})}},Ar=a(1163),_r=a(1164),Br=a(1165),Mr=a(1166),Hr=a(1167),Wr=a(1168),Ur=a(1169),Lr=a(1170),Jr=a(1171),Vr=a(1172),Yr=a(1173),zr=window.location,Xr=new URLSearchParams(zr.search).get("server");Xr?(0!==Xr.indexOf("//")&&(Xr="//"+Xr),"/"===(Lt=zr.protocol+Xr)[Lt.length-1]&&(Lt=Lt.slice(0,-1))):Lt=zr.protocol+"//"+zr.hostname+(zr.port?":"+zr.port:"");var $r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x;return r=e,{getList:function(a,r){var n,c,s,i,o;if(r){if(r.pagination){var l=r.pagination,d=l.page,j=l.perPage;n=(d-1)*j,c=j}r.sort&&(s=r.sort.field,i=r.sort.order),r.filter&&(o=JSON.stringify(p(r.filter)))}var b={offset:n,limit:c,sort:s,order:i,filter:o},u="".concat(e,"/").concat(v(a),"?").concat(Object(O.stringify)(b));return t(u,{}).then((function(e){e.headers;var t=e.json;return f(t.rows),{data:t.rows,total:t.total}}))},getOne:function(a,r){return t("".concat(e,"/").concat(v(a),"?").concat(Object(O.stringify)({filter:JSON.stringify(p(r))}))).then((function(e){var t=e.json;if(t.err)throw new h.a(t.err,500,t);var a=t.rows[0];return a?(a.id=a._id,a._id=void 0,{data:a}):{data:null}}))},getMany:function(a,r){var n=r.ids,c=Object(u.a)(r,["ids"]),s={filter:JSON.stringify(Object(l.a)({_id:n},c))},i="".concat(e,"/").concat(v(a),"?").concat(Object(O.stringify)(s));return t(i).then((function(e){var t=e.json,a={};return t.rows.forEach((function(e){return a[e._id]=e})),{data:r.ids.map((function(e){return Object(l.a)({id:e},a[e])})),total:r.ids.length}}))},getManyReference:function(a,r){var n=r.pagination,c=n.page,s=n.perPage,i=r.sort,o={sort:i.field,order:i.order,offset:(c-1)*s,limit:s,filter:JSON.stringify(Object(l.a)(Object(l.a)({},p(r.filter)),{},Object(b.a)({},r.target,r.id)))},d="".concat(e,"/").concat(v(a),"?").concat(Object(O.stringify)(o));return t(d).then((function(e){var t=e.json;return f(t.rows),{data:t.rows,total:t.total}}))},update:function(a,r){return r.data.id=void 0,r.data._id=void 0,t("".concat(e,"/").concat(v(a),"/").concat(r.id),{method:"PUT",body:JSON.stringify(r.data)}).then((function(e){return{data:e.json}}))},updateMany:function(a,r){return r.data.id=void 0,r.data._id=void 0,t("".concat(e,"/").concat(v(a),"/").concat(JSON.stringify(r.ids)),{method:"PUT",body:JSON.stringify(r.data)}).then((function(e){return{data:e.json}}))},create:function(a,r){return t("".concat(e,"/").concat(v(a)),{method:"POST",body:JSON.stringify(r.data)}).then((function(e){var t=e.json;return{data:Object(l.a)(Object(l.a)({},r.data),{},{id:t._id})}}))},delete:function(a,r){return t("".concat(e,"/").concat(v(a),"/").concat(r.id),{method:"DELETE"}).then((function(e){return{data:e.json}}))},deleteMany:function(a,r){return t("".concat(e,"/").concat(v(a),"/").concat(JSON.stringify(r.ids)),{method:"DELETE"}).then((function(e){return{data:e.json}}))},actions:function(a,r){var n=void 0;return r.id&&(n=decodeURIComponent(r.id),r.id=void 0),t("".concat(e,"/").concat(v(a),"/").concat(r.method),{method:"POST",body:JSON.stringify(Object(l.a)({_id:n},r))}).then((function(e){return{data:e.json}}))}}}(Lt),qr=function(){return Object(n.jsx)(d.a,{customRoutes:He,dataProvider:$r,authProvider:(e=Lt,{login:function(t){var a=t.username,r=t.password;return fetch(e+"/admin/login",{body:JSON.stringify({u:a,p:r}),method:"PUT",headers:new Headers({"Content-Type":"application/json"})}).then((function(e){return e.json()})).then((function(e){var t=e.err,a=e.a,r=e.o;return t?Promise.reject(t):(localStorage.setItem("userInfo",JSON.stringify(r)),localStorage.setItem("accToken",a),Promise.resolve())})).catch((function(e){return"string"===typeof e?Promise.reject(e):"object"===typeof e?Promise.reject("the server is unreachable right now"):Promise.reject(e.toString())}))},logout:function(){return localStorage.removeItem("accToken"),localStorage.removeItem("userInfo"),Promise.resolve()},checkError:function(e){var t=e.status;return 401===t||403===t?(localStorage.removeItem("accToken"),localStorage.removeItem("userInfo"),Promise.reject()):Promise.resolve()},checkAuth:function(){return localStorage.getItem("accToken")?Promise.resolve():Promise.reject()},getPermissions:function(){var e=localStorage.getItem("userInfo");try{return e=JSON.parse(e),Promise.resolve(e.acl)}catch(t){return Promise.reject()}},getIdentity:function(){var e=localStorage.getItem("userInfo");try{return e=JSON.parse(e),Promise.resolve({fullName:e.name,id:e._id,acl:e.acl})}catch(t){return Promise.reject()}}}),children:function(e){var t=[];return t.push(Object(n.jsx)(j.a,Object(l.a)(Object(l.a)({name:"dashboard"},hr),{},{icon:Ar.a,options:{label:"Dashboard"}}),"dashboard")),"admin"!==e&&"manager"!==e||(t=t.concat([Object(n.jsx)(j.a,Object(l.a)(Object(l.a)({name:"managers",icon:_r.a},Ft),{},{options:{label:"Administrators",menuParent:"userManager"}}),"managers"),Object(n.jsx)(j.a,Object(l.a)(Object(l.a)({name:"users",icon:Br.a},wt),{},{options:{label:"Partners",menuParent:"userManager"}}),"users"),Object(n.jsx)(j.a,Object(l.a)(Object(l.a)({name:"agents",icon:Mr.a},Yt),{},{options:{label:"Agents",menuParent:"userManager"}}),"agents"),Object(n.jsx)(j.a,Object(l.a)(Object(l.a)({name:"providers",icon:Ga.a},ja),{},{options:{label:"Providers"}}),"providers"),Object(n.jsx)(j.a,Object(l.a)(Object(l.a)({name:"recon",icon:Hr.a},jr.Recon),{},{options:{label:"Auto Reconcilition"}}),"financial_recon"),Object(n.jsx)(j.a,Object(l.a)(Object(l.a)({name:"recon_manual",icon:Wr.a},jr.ReconManual),{},{options:{label:"Manual Reconcilition"}}),"financial_recon_manual")])),t.push(Object(n.jsx)(j.a,Object(l.a)(Object(l.a)({name:"bills",icon:Ur.a},ta),{},{options:{label:"Transactions"}}),"bills")),t.push(Object(n.jsx)(j.a,Object(l.a)(Object(l.a)({name:"disbursements",icon:Lr.a},ca),{},{options:{label:"Disbursements"}}),"disbursements")),t.push(Object(n.jsx)(j.a,Object(l.a)(Object(l.a)({name:"statements",icon:Jr.a},Ra),{},{options:{label:"Billings"}}),"statements")),t.push(Object(n.jsx)(j.a,Object(l.a)(Object(l.a)({name:"docs",icon:Vr.a},Ia),{},{options:{label:"Integrations"}}),"docs")),t.push(Object(n.jsx)(j.a,Object(l.a)(Object(l.a)({name:"demo",icon:Yr.a},Fr),{},{options:{label:"Demo"}}),"demo")),t}});var e};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(qr,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},537:function(e,t,a){},636:function(e,t,a){e.exports=a(637)},637:function(e,t){e.exports={locale:"ID",lanuage:"en",providers:["xendit","midtrans","espay","testcase"],defaultShare:{creditCard:{mdr:.03,fix_fee:5e3},eWallet:{mdr:.028,fix_fee:0},va:{mdr:0,fix_fee:7500},retailOutlets:{mdr:0,fix_fee:8500},disbursement:{mdr:0,fix_fee:7500}}}},740:function(e,t,a){"use strict";a.r(t),t.default="Sinopay \u56db\u65b9\u63a5\u53e3\n===========\n\n1. \u4e0b\u5355\n---------------\n>http://**url**/forecore/order\n\nparameters:\n\n| name | desc |\n| -------- | ----------------------------------------------- |\n| cb_url   | \u5145\u503c\u7ed3\u679c\u56de\u8c03\u5730\u5740\uff0c\u4ee5http\u6216https\u5f00\u5934\uff0c\u5982 http://mydomain.com/pay/result |\n| currency | \u5145\u503c\u5e01\u79cd\uff0c\u53d6\u51b3\u4e8e\u60a8\u63a5\u5165\u7684\u901a\u9053\u4e0d\u540c\uff0c\u76ee\u524d\u652f\u6301 CAD\uff0cUSD, CNY\uff0cIDR\uff0cTHB |\n| money    | \u5145\u503c\u6570\u91cf\uff0c\u4ee5\u5143\u4e3a\u5355\u4f4d\uff0c\u5982 1.25\uff0c\u8bf7\u6ce8\u610f\u8fd9\u91cc\u76f4\u63a5\u4ee5\u5f53\u5730\u8d27\u5e01\u8ba1\u4ef7\uff0c\u4e0d\u662f\u4eba\u6c11\u5e01 |\n| country  | \u56fd\u5bb6/\u5730\u533a\uff0c\u5177\u4f53\u53c2\u6570\u8be2\u95ee\u5bf9\u63a5\u5c0f\u4f19\u4f34 |\n| outOrderId \t| \u4f60\u65b9\u7cfb\u7edf\u7684\u8ba2\u5355\u53f7\uff0c\u5fc5\u987b\u662f\u552f\u4e00\u7684 |\n| return_url \t| \u5145\u503c\u754c\u9762\u7684\u56de\u8df3\u5730\u5740\uff0c\u4e00\u822c\u5c31\u663e\u793a\u5145\u503c\u6210\u529f |\n| time \t| \u5f53\u524d\u65f6\u95f4\uff0c\u6beb\u79d2\u5355\u4f4d |c\n| userId \t| \u4f60\u65b9\u7cfb\u7edf\u4e2d\u5145\u503c\u7528\u6237\u7684id |\n| type \t| \u53ef\u4ee5\u662f WECHATPAYH5\uff0cALIPAYH5\uff0cUNIONPAYH5\uff0cUSERSELECT, \u4e0d\u540c\u901a\u9053\u652f\u6301\u4e0d\u4e00\u6837\uff0c\u8bf7\u5177\u4f53\u8be2\u95ee\u5bf9\u63a5\u5c0f\u4f19\u4f34 |\n\nreturn\n```\n\terr, \u9519\u8bef\uff0c\u9519\u8bef\u53ef\u80fd\u662f\u5b57\u7b26\u4e32\uff0c\u5bf9\u8c61\uff0c\u6570\u5b57\u7b49\uff0c\u4e00\u822c\u4f1a\u6709\u53ef\u4ee5\u9605\u8bfb\u90e8\u5206\u3002\u5982\u679c\u6709err\uff0c\u4ee5\u4e0b\u53c2\u6570\u5168\u90e8\u4e0d\u5b58\u5728\n\toutOrderId, \u4f60\u65b9\u7cfb\u7edf\u7684\u8ba2\u5355\n\torderId\uff0c Sinopay\u7684\u8ba2\u5355id\n\tproviderOrderId, \u63d0\u4f9b\u65b9\u7684\u8ba2\u5355id,\u8bf7\u6ce8\u610f\u6709\u7684\u4f9b\u5e94\u5546\u4e0d\u4f1a\u7ed9\u51fa\u8fd9\u4e2a\u53c2\u6570\n\turl, \u652f\u4ed8\u7528\u5730\u5740, \u8fd9\u91cc\u6709\u4e24\u79cd\u53ef\u80fd\uff0c\n\t\t 1. \u60a8\u53ef\u4ee5\u76f4\u63a5\u8df3\u5f80\u8fd9\u4e2a\u5730\u5740\u8fdb\u884c\u5177\u4f53\u652f\u4ed8\n\t\t 2. \u5982\u679c\u662fWECAHATPAYH5\uff0cALIPAYH5\uff0c\u60a8\u5e94\u8be5\u5c06\u8fd9\u4e2a\u5730\u5740\u663e\u793a\u6210\u4e8c\u7ef4\u7801\u63d0\u4f9b\u7ed9\u7528\u6237\n\t\t 3. \u5177\u4f53\u7684\u5904\u7406\u65b9\u5f0f\u8bf7\u54a8\u8be2\u5bf9\u63a5\u5c0f\u4f19\u4f34\n```\n\n2. \u67e5\u8be2\n---------------\n>http://**url**/forecore/queryOrder\n\nparameters\n\n| \u53c2\u6570 | \u63cf\u8ff0 |\n| ------- | ----- |\n| outOrderId | \u4f60\u65b9\u8ba2\u5355id |\n\n\nreturn\n\n| \u53c2\u6570 | \u63cf\u8ff0 |\n| ------- | ----- |\n| err | \u9519\u8bef\uff0c\u9519\u8bef\u53ef\u80fd\u662f\u5b57\u7b26\u4e32\uff0c\u5bf9\u8c61\uff0c\u6570\u5b57\u7b49\uff0c\u4e00\u822c\u4f1a\u6709\u53ef\u4ee5\u9605\u8bfb\u90e8\u5206\u3002\u5982\u679c\u6709err\uff0c\u4ee5\u4e0b\u53c2\u6570\u5168\u90e8\u4e0d\u5b58\u5728 |\n|outOrderId|\u4f60\u65b9\u8ba2\u5355id|\n|orderId| Sinopay\u8ba2\u5355id|\n|providerOrderId| \u63d0\u4f9b\u65b9\u7684\u8ba2\u5355id|\n|money| \u8ba2\u5355\u8981\u6c42\u652f\u4ed8\u7684\u91d1\u989d|\n|received| \u7528\u6237\u652f\u4ed8\u7684\u91d1\u989d|\n|currency| \u5e01\u79cd|\n|status| \u8ba2\u5355\u72b6\u6001|\n\n\n1. \u9000\u5355\n---------------\n>http://**url**/forecore/refund\n\n\u8bf7\u6ce8\u610f\u4e0d\u662f\u6bcf\u4e2a\u901a\u9053\u90fd\u652f\u6301\u9000\u5355\n\nparameters\n| \u53c2\u6570 | \u63cf\u8ff0 |\n| ------- | ----- |\n| outOrderId | \u4f60\u65b9\u8ba2\u5355id |\n| money | \u9000\u6b3e\u6570\u91cf\uff0c\u5143\u4e3a\u5355\u4f4d |\n\n\nreturn\n\n| \u53c2\u6570 | \u63cf\u8ff0 |\n| ------- | ----- |\n|err |\u9519\u8bef\uff0c\u9519\u8bef\u53ef\u80fd\u662f\u5b57\u7b26\u4e32\uff0c\u5bf9\u8c61\uff0c\u6570\u5b57\u7b49\uff0c\u4e00\u822c\u4f1a\u6709\u53ef\u4ee5\u9605\u8bfb\u90e8\u5206\u3002\u5982\u679c\u6709err\uff0c\u4ee5\u4e0b\u53c2\u6570\u5168\u90e8\u4e0d\u5b58\u5728\n|orderId\t\t\t| Sinopay order No.\n|outOrderId\t \t| Original Order No. from your System.\n|providerOrderId\t| The provider transaction No.\n|trans_status\t| Transaction status \n|\t\t\t\t|\tREFUNDING - transaction created, waiting for refund\n|\t\t\t\t|\tCLOSE - transaction closed, refund failed.\n|\t\t\t\t|\tSUCCESS - Refund success\n\n\n4. \u4ee3\u4ed8\n-----------------------\n>http://**url**/forecore/disburse\n\n\u8bf7\u6ce8\u610f\u4e0d\u662f\u6bcf\u4e2a\u901a\u9053\u90fd\u652f\u6301\u4ee3\u4ed8\n\nparameters\n| \u53c2\u6570 | \u63cf\u8ff0 |\n| ------- | ----- |\n| outOrderId | \u4f60\u65b9\u8ba2\u5355id |\n| money | \u4ed8\u6b3e\u6570\u91cf\uff0c\u5143\u4e3a\u5355\u4f4d |\n| bank  | \u6536\u6b3e\u94f6\u884c\uff0c\u5982\uff1a\u4e2d\u56fd\u94f6\u884c |\n| branch | \u652f\u884c  |\n| owner | \u6536\u6b3e\u4eba\u59d3\u540d |\n| account | \u6536\u6b3e\u8d26\u53f7 |\n| cb_url | url\uff0c\u4ee3\u4ed8\u7ed3\u679c\u4f1a\u901a\u77e5\u5230\u8fd9\u4e2a\u5730\u5740 |\n\nreturn\n\n| \u53c2\u6570 | \u63cf\u8ff0 |\n| ------| ---------|\n| err | \u9519\u8bef\uff0c\u9519\u8bef\u53ef\u80fd\u662f\u5b57\u7b26\u4e32\uff0c\u5bf9\u8c61\uff0c\u6570\u5b57\u7b49\uff0c\u4e00\u822c\u4f1a\u6709\u53ef\u4ee5\u9605\u8bfb\u90e8\u5206\u3002\u5982\u679c\u6709err\uff0c\u4ee5\u4e0b\u53c2\u6570\u5168\u90e8\u4e0d\u5b58\u5728|\n| orderId\t\t| Sinopay Transaction No.|\n| outOrderId \t| Original Order No. from your System. |\n| providerOrderId\t| The disbursement transaction No. in the provider\u2019s system. |\n| trans_status\t| Transaction status \t\t\t\t\t\t\t\t\t\t\t\t|\n|\t\t\t\t|\tCLOSE - transaction closed, refund failed.\t\t\t\t\t\t|\n|\t\t\t\t|\tSUCCESS - success\t\t\t\t\t\t\t\t\t\t\t\t|\n|\t\t\t\t|\tPENDING - Wait for comfirmation\t\t\t\t\t\t\t\t\t|\n\n\n\u9644\u5f55\n===============================\ncb_url\u7684\u8bf4\u660e\n-------------------------\n\u5145\u503c\u6210\u529f\u4f1a\u4ee5post\u65b9\u5f0f\u56de\u8c03\u8fd9\u4e2a\u63a5\u53e3\uff0c\u5e76\u4e14\u4f20\u9012\u4ee5\u4e0b\u53c2\u6570\n\n| \u53c2\u6570 | \u63cf\u8ff0 |\n| ------- | ----- |\n| outOrderId\t| \u4f60\u65b9\u7cfb\u7edf\u4ea7\u751f\u7684\u8ba2\u5355id |\n| orderId\t\t| Sinopay\u7684\u8ba2\u5355id |\n| money\t\t| \u652f\u4ed8\u7684\u91d1\u989d |\n| currency\t| \u5e01\u79cd |\n| sign\t\t| \u4ee5md5\u505a\u7684\u7b7e\u540d |\n\n **\u6ce8\u610f\u5b9e\u9645\u4f20\u8f93\u7684\u53c2\u6570\u53ef\u80fd\u4e0d\u6b62\u4e0a\u9762\u5217\u51fa\u76845\u4e2a\uff0c\u6240\u6709\u53c2\u6570\uff08\u9664\u4e86sign\uff09\u90fd\u53c2\u4e0e\u7b7e\u540d** \n\n\u6536\u5230\u8fd9\u4e2a\u8c03\u7528\u4e4b\u540e\uff0c\u8bf7\u8fd4\u56de\u4e00\u4e2ajson\u5bf9\u8c61\uff0c\u5982\u679c\u6709\u9519\uff0c\u8fd4\u56de``` {\"err\":\"something wrong\"} ```\n\u5982\u679c\u6b63\u5e38\u5904\u7406\u5b8c\u6210\uff0c\u8fd4\u56de\u4efb\u610f\u7684json\u5bf9\u8c61\uff0c\u5982 ``` {\"result\":\"success\"} ```\n\n**\u4ee3\u4ed8\u7684cb_url\u6536\u5230\u7684\u53c2\u6570\u5982\u4e0b**\n| \u53c2\u6570 | \u63cf\u8ff0 |\n|-----|-----|\n| orderId\t\t| Sinopay Transaction No.|\n| outOrderId \t| Original Order No. from your System. |\n| providerOrderId\t| The disbursement transaction No. in the provider\u2019s system. |\n| status\t\t| SUCCESS - success, the transfer has been delivered |\n|               | FAILED - transfer failed, \u8f6c\u8d26\u91d1\u989d\u5df2\u9000\u8fd8\uff0c\u4e0d\u4f1a\u6536\u53d6\u624b\u7eed\u8d39 |\n\u8fd4\u56de\u5904\u7406\u4e0e\u5145\u503c\u7684cb_url\u4e00\u81f4\n\n\n\u8c03\u7528\u63a5\u53e3\n-------------------------\n\u6240\u6709\u63a5\u53e3\u90fd\u540c\u65f6\u652f\u6301post\u6216\u8005get\u65b9\u5f0f\uff0c\u5982\u679c\u9009\u62e9post\u65b9\u5f0f\uff0c\u4ee5application/json\u65b9\u5f0f\u4e0a\u4f20\u53c2\u6570\u3002\u4efb\u4f55\u63a5\u53e3\u7684\u8fd4\u56de\u503c\u90fd\u662f\u4e00\u4e2ajson\u5bf9\u8c61\uff0c\u5982\u679c\u8fd9\u4e2ajson\u4e2d\u5305\u542b\u6709err\u5b57\u6bb5\uff0c\u90a3\u610f\u5473\u7740\u8c03\u7528\u51fa\u9519\u3002\n\n\u8c03\u7528\u4e0a\u8ff0\u63a5\u53e3\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\uff0c\u90fd\u9700\u8981\u9644\u4e0a\u516c\u5171\u53c2\u6570\uff0c\u5982\u4e0b\n\n| \u53c2\u6570 | \u63cf\u8ff0 |\n| ------- | ----- |\n|partnerId\t| \u5408\u4f5c\u5546id\uff0c Sinopay\u5206\u914d\u7684\n|sign\t\t| \u7b7e\u540d\uff0c\u7b97\u6cd5\u89c1\u4e0b\u4e00\u8282\n\n\u7b7e\u540d\u7b97\u6cd5\n-------------------------\n\u7b7e\u540d\u662fmd5\n\n\u6211\u4eec\u4ee5\u4e00\u4e2a\u4f8b\u5b50\u6765\u8bf4\u660e\u7b7e\u540d\u7684\u6784\u6210\u3002\u5047\u5b9a\u6211\u4eec\u8981\u4f20\u9012\u7684\u53c2\u6570\u5982\u4e0b\uff1a\n```outOrderId='abc123', money=1.00, partnerId='p001', type='WECHATPAYH5', currency='USD'```\n\n\u7b7e\u540d\u7684key\u662f``` 123456 ```\n\n1. \u5c06\u6240\u6709\u5f85\u4f20\u9012\u7684\u53c2\u6570\u6309\u7167\u53c2\u6570\u540d\u5347\u5e8f\u6392\u5217,\u5f97\u5230\n   ``` currency='USD', money=1.00, outOrderId='abc123', partnerId='p001', type='WECHATPAYH5'  ```\n2. \u6240\u6709\u7684\u503c\u505aurlEncode\uff0c\u5f97\u5230\n\t``` currency='USD', money=1.00, outOrderId='abc123', partnerId='p001', type='WECHATPAYH5'  ```\n3. \u8f93\u51fa```key=value```\u5e76\u7528&\u8fde\u63a5\u6210\u5b57\u7b26\u4e32\uff0c\u5f97\u5230\n\t``` currency=USD&money=1.00&outOrderId=abc123&partnerId=p001&type=WECHATPAYH5 ```\n4. \u5728\u5b57\u7b26\u4e32\u524d\u9762\u52a0\u4e0akey\uff0c \u5f97\u5230\n\t``` 123456currency=USD&money=1.00&outOrderId=abc123&partnerId=p001&type=WECHATPAYH5 ```\n5. \u5bf9\u8fd9\u4e2a\u5b57\u7b26\u4e32\u8ba1\u7b97md5, \u5f97\u5230\n   ```a90a66d09bde8a32725c9efde082fae1```\n6. \u628a\u8fd9\u4e2a\u7ed3\u679c\u586b\u7ed9sign\uff0c\u90a3\u4e48\u6700\u540e\u8981\u4f20\u8f93\u7684\u6570\u636e\n   ```\n   {\n\t\toutOrderId:'abc123', \n\t\tmoney:'1.00', \n\t\tpartnerId:'p001', \n\t\ttype:'WECHATPAYH5', \n\t\tcurrency:'USD',\n\t\tsign:'a90a66d09bde8a32725c9efde082fae1'\n   }\n   ```\n\n\u5173\u4e8e\u63a5\u53e3\u7684\u8c03\u8bd5\u6a21\u5f0f\n---------------------------\n\u4e3a\u4e86\u65b9\u4fbf\u5bf9\u63a5\uff0c\u5546\u6237\u63a5\u53e3\u603b\u662f\u4ee5\u8c03\u8bd5\u6a21\u5f0f\u521d\u59cb\u7684\u3002\u5728\u8fd9\u4e2a\u6a21\u5f0f\u4e0b\uff0c\u5982\u679csign\u8ba1\u7b97\u9519\u8bef\uff0c\u63a5\u53e3\u4f1a\u8fd4\u56de\u6b63\u786e\u7684sign\uff0c\u5e76\u63d0\u793a\u4f60sign\u662f\u5982\u4f55\u8ba1\u7b97\u51fa\u6765\u7684\u3002\n```\n\"err\":{\n\t\"err\": \"\u7b7e\u540d\u9519\u8bef\",\n\t\"wanted\": \"f7645b2b5eb2fb9c044f61164841d35a\",\n\t\"str\": \"9923c58d464731817b701dc8b074bd5779d7acd7cb_url=http%3A%2F%2F127.0.0.1%2Ftest&country=ID&currency=IDR&money=1000&outOrderId=111444&partnerId=605c57ce8121da423bc7129f&time=153442&userId=aaa\"\n}\n```\nwanted\u662f\u7cfb\u7edf\u8ba1\u7b97\u7684sign\uff0cstr\u662f\u7528\u6765\u8ba1\u7b97sign\u7684\u5b57\u7b26\u4e32\uff0c\u4f60\u53ef\u4ee5\u68c0\u67e5\u8fd9\u4e2a\u5b57\u7b26\u4e32\u548c\u4f60\u81ea\u5df1\u751f\u6210\u7684\u5b57\u7b26\u4e32\u7684\u5dee\u5f02\u4ece\u800c\u5feb\u901f\u5b9a\u4f4d\u95ee\u9898\u3002\n\n\u4f46\u662f\uff0c\u8fd9\u4e2a\u64cd\u4f5c\u4f1a\u66b4\u9732\u4f60\u7684key\uff0c\u6240\u4ee5\u5728\u6b63\u5f0f\u4e0a\u7ebf\u4e4b\u524d\uff0c\u8bf7\u52a1\u5fc5\u5173\u95ed\u8c03\u8bd5\u63a5\u53e3\u3002\u5728\u4f60\u7684\u540e\u53f0\u7684\u9996\u9875\u4e0a\uff0c\u6211\u4eec\u63d0\u4f9b\u4e86\u5173\u95ed\u6309\u94ae\u3002\n\n\u5173\u4e8e\u7ed3\u7b97\u8d27\u5e01\n---------------------------\n\u5982\u679c\u4e0b\u5355\u65f6\u4f7f\u7528\u5916\u5e01\uff0c\u7ed3\u7b97\u4e5f\u4f1a\u7ed3\u7b97\u5916\u5e01\u3002\u5982\u679c\u60a8\u9700\u8981\u4ee5\u4eba\u6c11\u5e01\u8ba1\u4ef7\uff0c\u5219\u5fc5\u987b\u5728\u4e0b\u5355\u65f6\u6309\u7167\u5b9e\u65f6\u6c47\u7387\u6362\u7b97\uff0c\u6bd4\u5982\u7f8e\u5143\u6c47\u7387\u662f6.45\uff0c\u5982\u679c\u8981\u751f\u6210100\u4eba\u6c11\u5e01\u7684\u8ba2\u5355\uff0c\u4f60\u5e94\u8be5\u4e0b100/6.45=15.50\u7f8e\u5143\u7684\u652f\u4ed8\u8ba2\u5355\u3002\n\n\n\u4f7f\u7528\u5fae\u4fe1\u652f\u4ed8\n---------------------------\n\u4e0b\u5355\u5916\u5e01\u65f6\u7cfb\u7edf\u8fd4\u56de\u7684url\u53ea\u80fd\u5728\u5fae\u4fe1\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00\u4ed8\u6b3e\uff0c\u5982\u679c\u5728chrome\u4e4b\u7c7b\u7684\u7cfb\u7edf\u6d4f\u89c8\u5668\u4e2d\u4f1a\u663e\u793a\n> \u8bf7\u4f7f\u7528\u5fae\u4fe1\u6d4f\u89c8\u5668\u6253\u5f00\n\n\u8fd9\u663e\u7136\u4e0d\u662f\u4f60\u60f3\u770b\u5230\u7684\u3002\u90a3\u4e48\u5904\u7406\u65b9\u5f0f\u662f\n1. \u5c06\u8fd9\u4e2aurl\u663e\u793a\u6210\u4e8c\u7ef4\u7801\uff0c\u8ba9\u7528\u6237\u7528\u5fae\u4fe1\u626b\u7801\uff0c\n   - \u5982\u679c\u5728pc\u7aef\uff0c\u76f4\u63a5\u663e\u793a\u8fd9\u4e2a\u4e8c\u7ef4\u7801\n   - \u5982\u679c\u5728\u624b\u673a\u7aef\uff0c\u63d0\u793a\u7528\u6237\u622a\u5c4f\uff0c\u5728\u5fae\u4fe1\u91cc\u626b\u4e00\u626b\uff0c\u9009\u62e9\u76f8\u518c\n\n\u4e0b\u5355\u4eba\u6c11\u5e01\u65f6\u4e0d\u5b58\u5728\u8fd9\u4e2a\u95ee\u9898"}},[[1049,1,2]]]);
//# sourceMappingURL=main.01838cf1.chunk.js.map