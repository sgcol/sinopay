(this.webpackJsonpsinopay=this.webpackJsonpsinopay||[]).push([[0],{483:function(e,t,n){},684:function(e,t,n){"use strict";n.r(t),t.default="Sinopay \u56db\u65b9\u63a5\u53e3\n===========\n\n1. \u4e0b\u5355\n---------------\n>http://**url**/forecore/order\n\nparameters:\n\n| name | desc |\n| -------- | ----------------------------------------------- |\n| cb_url   | \u5145\u503c\u7ed3\u679c\u56de\u8c03\u5730\u5740\uff0c\u4ee5http\u6216https\u5f00\u5934\uff0c\u5982 http://mydomain.com/pay/result |\n| currency | \u5145\u503c\u5e01\u79cd\uff0c\u53d6\u51b3\u4e8e\u60a8\u63a5\u5165\u7684\u901a\u9053\u4e0d\u540c\uff0c\u76ee\u524d\u652f\u6301 CAD\uff0cUSD, CNY\uff0cIDR\uff0cTHB |\n| money    | \u5145\u503c\u6570\u91cf\uff0c\u4ee5\u5143\u4e3a\u5355\u4f4d\uff0c\u5982 1.25\uff0c\u8bf7\u6ce8\u610f\u8fd9\u91cc\u76f4\u63a5\u4ee5\u5f53\u5730\u8d27\u5e01\u8ba1\u4ef7\uff0c\u4e0d\u662f\u4eba\u6c11\u5e01 |\n| country  | \u56fd\u5bb6/\u5730\u533a\uff0c\u5177\u4f53\u53c2\u6570\u8be2\u95ee\u5bf9\u63a5\u5c0f\u4f19\u4f34 |\n| outOrderId \t| \u4f60\u65b9\u7cfb\u7edf\u7684\u8ba2\u5355\u53f7\uff0c\u5fc5\u987b\u662f\u552f\u4e00\u7684 |\n| return_url \t| \u5145\u503c\u754c\u9762\u7684\u56de\u8df3\u5730\u5740\uff0c\u4e00\u822c\u5c31\u663e\u793a\u5145\u503c\u6210\u529f |\n| time \t| \u5f53\u524d\u65f6\u95f4\uff0c\u6beb\u79d2\u5355\u4f4d |\n| userId \t| \u4f60\u65b9\u7cfb\u7edf\u4e2d\u5145\u503c\u7528\u6237\u7684id |\n| type \t| \u53ef\u4ee5\u662f WECHATPAYH5\uff0cALIPAYH5\uff0cUNIONPAYH5\uff0cUSERSELECT, \u4e0d\u540c\u901a\u9053\u652f\u6301\u4e0d\u4e00\u6837\uff0c\u8bf7\u5177\u4f53\u8be2\u95ee\u5bf9\u63a5\u5c0f\u4f19\u4f34 |\n\nreturn\n```\n\terr, \u9519\u8bef\uff0c\u9519\u8bef\u53ef\u80fd\u662f\u5b57\u7b26\u4e32\uff0c\u5bf9\u8c61\uff0c\u6570\u5b57\u7b49\uff0c\u4e00\u822c\u4f1a\u6709\u53ef\u4ee5\u9605\u8bfb\u90e8\u5206\u3002\u5982\u679c\u6709err\uff0c\u4ee5\u4e0b\u53c2\u6570\u5168\u90e8\u4e0d\u5b58\u5728\n\toutOrderId, \u4f60\u65b9\u7cfb\u7edf\u7684\u8ba2\u5355\n\torderId\uff0c Sinopay\u7684\u8ba2\u5355id\n\tproviderOrderId, \u63d0\u4f9b\u65b9\u7684\u8ba2\u5355id\n\turl, \u652f\u4ed8\u7528\u5730\u5740, \u8fd9\u91cc\u6709\u4e24\u79cd\u53ef\u80fd\uff0c\n\t\t 1. \u60a8\u53ef\u4ee5\u76f4\u63a5\u8df3\u5f80\u8fd9\u4e2a\u5730\u5740\u8fdb\u884c\u5177\u4f53\u652f\u4ed8\n\t\t 2. \u5982\u679c\u662fWECAHATPAYH5\uff0cALIPAYH5\uff0c\u60a8\u5e94\u8be5\u5c06\u8fd9\u4e2a\u5730\u5740\u663e\u793a\u6210\u4e8c\u7ef4\u7801\u63d0\u4f9b\u7ed9\u7528\u6237\n\t\t 3. \u5177\u4f53\u7684\u5904\u7406\u65b9\u5f0f\u8bf7\u54a8\u8be2\u5bf9\u63a5\u5c0f\u4f19\u4f34\n```\n\n2. \u67e5\u8be2\n---------------\n>http://**url**/forecore/queryOrder\n\nparameters\n\n| \u53c2\u6570 | \u63cf\u8ff0 |\n| ------- | ----- |\n| outOrderId | \u4f60\u65b9\u8ba2\u5355id |\n\n\nreturn\n```\n\terr, \u9519\u8bef\uff0c\u9519\u8bef\u53ef\u80fd\u662f\u5b57\u7b26\u4e32\uff0c\u5bf9\u8c61\uff0c\u6570\u5b57\u7b49\uff0c\u4e00\u822c\u4f1a\u6709\u53ef\u4ee5\u9605\u8bfb\u90e8\u5206\u3002\u5982\u679c\u6709err\uff0c\u4ee5\u4e0b\u53c2\u6570\u5168\u90e8\u4e0d\u5b58\u5728\n\toutOrderId, \u4f60\u65b9\u8ba2\u5355id\n\torderId\uff0c Sinopay\u8ba2\u5355id\n\tproviderOrderId, \u63d0\u4f9b\u65b9\u7684\u8ba2\u5355id\n\tmoney\uff0c \u8ba2\u5355\u8981\u6c42\u652f\u4ed8\u7684\u91d1\u989d\n\treceived\uff0c \u7528\u6237\u652f\u4ed8\u7684\u91d1\u989d\n\tcurrency, \u5e01\u79cd\n\tstatus\uff0c \u8ba2\u5355\u72b6\u6001\n```\n\n3. \u9000\u5355\n---------------\n>http://**url**/forecore/refund\n\n\u8bf7\u6ce8\u610f\u4e0d\u662f\u6bcf\u4e2a\u901a\u9053\u90fd\u652f\u6301\u9000\u5355\n\nparameters\n| \u53c2\u6570 | \u63cf\u8ff0 |\n| ------- | ----- |\n| outOrderId | \u4f60\u65b9\u8ba2\u5355id |\n| money | \u9000\u6b3e\u6570\u91cf\uff0c\u5143\u4e3a\u5355\u4f4d |\n\n\nreturn\n```\nerr, \u9519\u8bef\uff0c\u9519\u8bef\u53ef\u80fd\u662f\u5b57\u7b26\u4e32\uff0c\u5bf9\u8c61\uff0c\u6570\u5b57\u7b49\uff0c\u4e00\u822c\u4f1a\u6709\u53ef\u4ee5\u9605\u8bfb\u90e8\u5206\u3002\u5982\u679c\u6709err\uff0c\u4ee5\u4e0b\u53c2\u6570\u5168\u90e8\u4e0d\u5b58\u5728\norderId\t\t\t| Sinopay order No.\noutOrderId\t \t| Original Order No. from your System.\nproviderOrderId\t| The provider transaction No.\ntrans_status\t| Transaction status \n\t\t\t\t\tREFUNDING - transaction created, waiting for refund\n\t\t\t\t\tCLOSE - transaction closed, refund failed.\n\t\t\t\t\tSUCCESS - Refund success\n```\n\n4. \u4ee3\u4ed8\n-----------------------\n>http://**url**/forecore/disburse\n\n\u8bf7\u6ce8\u610f\u4e0d\u662f\u6bcf\u4e2a\u901a\u9053\u90fd\u652f\u6301\u4ee3\u4ed8\n\nparameters\n| \u53c2\u6570 | \u63cf\u8ff0 |\n| ------- | ----- |\n| outOrderId | \u4f60\u65b9\u8ba2\u5355id |\n| money | \u4ed8\u6b3e\u6570\u91cf\uff0c\u5143\u4e3a\u5355\u4f4d |\n| bank  | \u6536\u6b3e\u94f6\u884c\uff0c\u5982\uff1a\u4e2d\u56fd\u94f6\u884c |\n| branch | \u652f\u884c  |\n| owner | \u6536\u6b3e\u4eba\u59d3\u540d |\n| account | \u6536\u6b3e\u8d26\u53f7 |\n\nreturn\n\n| \u53c2\u6570 | \u63cf\u8ff0 |\n| ------| ---------|\n| err | \u9519\u8bef\uff0c\u9519\u8bef\u53ef\u80fd\u662f\u5b57\u7b26\u4e32\uff0c\u5bf9\u8c61\uff0c\u6570\u5b57\u7b49\uff0c\u4e00\u822c\u4f1a\u6709\u53ef\u4ee5\u9605\u8bfb\u90e8\u5206\u3002\u5982\u679c\u6709err\uff0c\u4ee5\u4e0b\u53c2\u6570\u5168\u90e8\u4e0d\u5b58\u5728|\n| orderId\t\t| Sinopay Transaction No.|\n| outOrderId \t| Original Order No. from your System. |\n| providerOrderId\t| The disbursement transaction No. in the provider\u2019s system. |\n| trans_status\t| Transaction status \t\t\t\t\t\t\t\t\t\t\t\t|\n|\t\t\t\t|\tCLOSE - transaction closed, refund failed.\t\t\t\t\t\t|\n|\t\t\t\t|\tSUCCESS - success\t\t\t\t\t\t\t\t\t\t\t\t|\n|\t\t\t\t|\tPENDING - Wait for comfirmation\t\t\t\t\t\t\t\t\t|\n```\n\n\u9644\u5f55\n===============================\ncb_url\u7684\u8bf4\u660e\n-------------------------\n\u5145\u503c\u6210\u529f\u4f1a\u4ee5post\u65b9\u5f0f\u56de\u8c03\u8fd9\u4e2a\u63a5\u53e3\uff0c\u5e76\u4e14\u4f20\u9012\u4ee5\u4e0b\u53c2\u6570\n\n| \u53c2\u6570 | \u63cf\u8ff0 |\n| ------- | ----- |\n| outOrderId\t| \u4f60\u65b9\u7cfb\u7edf\u4ea7\u751f\u7684\u8ba2\u5355id |\n| orderId\t\t| Sinopay\u7684\u8ba2\u5355id |\n| money\t\t| \u652f\u4ed8\u7684\u91d1\u989d |\n| currency\t| \u5e01\u79cd |\n| sign\t\t| \u4ee5md5\u505a\u7684\u7b7e\u540d |\n\n **\u6ce8\u610f\u5b9e\u9645\u4f20\u8f93\u7684\u53c2\u6570\u53ef\u80fd\u4e0d\u6b62\u4e0a\u9762\u5217\u51fa\u76845\u4e2a\uff0c\u6240\u6709\u53c2\u6570\uff08\u9664\u4e86sign\uff09\u90fd\u53c2\u4e0e\u7b7e\u540d** \n\n\u6536\u5230\u8fd9\u4e2a\u8c03\u7528\u4e4b\u540e\uff0c\u8bf7\u8fd4\u56de\u4e00\u4e2ajson\u5bf9\u8c61\uff0c\u5982\u679c\u6709\u9519\uff0c\u8fd4\u56de``` {err:'something wrong'} ```\n\u5982\u679c\u6b63\u5e38\u5904\u7406\u5b8c\u6210\uff0c\u8fd4\u56de\u4efb\u610f\u7684json\u5bf9\u8c61\uff0c\u5982 ``` {result:'success'} ```\n\n\u8c03\u7528\u63a5\u53e3\n-------------------------\n\u6240\u6709\u63a5\u53e3\u90fd\u540c\u65f6\u652f\u6301post\u6216\u8005get\u65b9\u5f0f\uff0c\u5982\u679c\u9009\u62e9post\u65b9\u5f0f\uff0c\u4ee5application/json\u65b9\u5f0f\u4e0a\u4f20\u53c2\u6570\u3002\u4efb\u4f55\u63a5\u53e3\u7684\u8fd4\u56de\u503c\u90fd\u662f\u4e00\u4e2ajson\u5bf9\u8c61\uff0c\u5982\u679c\u8fd9\u4e2ajson\u4e2d\u5305\u542b\u6709err\u5b57\u6bb5\uff0c\u90a3\u610f\u5473\u7740\u8c03\u7528\u51fa\u9519\u3002\n\n\u8c03\u7528\u4e0a\u8ff04\u4e2a\u63a5\u53e3\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\uff0c\u90fd\u9700\u8981\u9644\u4e0a\u516c\u5171\u53c2\u6570\uff0c\u5982\u4e0b\n\n| \u53c2\u6570 | \u63cf\u8ff0 |\n| ------- | ----- |\npartnerId\t| \u5408\u4f5c\u5546id\uff0c Sinopay\u5206\u914d\u7684\nsign\t\t| \u7b7e\u540d\uff0c\u7b97\u6cd5\u89c1\u4e0b\u4e00\u8282\n\n\u7b7e\u540d\u7b97\u6cd5\n-------------------------\n\u7b7e\u540d\u662fmd5\n\n\u6211\u4eec\u4ee5\u4e00\u4e2a\u4f8b\u5b50\u6765\u8bf4\u660e\u7b7e\u540d\u7684\u6784\u6210\u3002\u5047\u5b9a\u6211\u4eec\u8981\u4f20\u9012\u7684\u53c2\u6570\u5982\u4e0b\uff1a\n```outOrderId='abc123', money=1.00, partnerId='p001', type='WECHATPAYH5', currency='USD'```\n\n\u7b7e\u540d\u7684key\u662f``` 123456 ```\n\n1. \u5c06\u6240\u6709\u5f85\u4f20\u9012\u7684\u53c2\u6570\u6309\u7167\u53c2\u6570\u540d\u5347\u5e8f\u6392\u5217,\u5f97\u5230\n   ``` currency='USD', money=1.00, outOrderId='abc123', partnerId='p001', type='WECHATPAYH5'  ```\n2. \u6240\u6709\u7684\u503c\u505aurlEncode\uff0c\u5f97\u5230\n\t``` currency='USD', money=1.00, outOrderId='abc123', partnerId='p001', type='WECHATPAYH5'  ```\n3. \u8f93\u51fa```key=value```\u5e76\u7528&\u8fde\u63a5\u6210\u5b57\u7b26\u4e32\uff0c\u5f97\u5230\n\t``` currency=USD&money=1.00&outOrderId=abc123&partnerId=p001&type=WECHATPAYH5 ```\n4. \u5728\u5b57\u7b26\u4e32\u524d\u9762\u52a0\u4e0akey\uff0c \u5f97\u5230\n\t``` 123456currency=USD&money=1.00&outOrderId=abc123&partnerId=p001&type=WECHATPAYH5 ```\n5. \u5bf9\u8fd9\u4e2a\u5b57\u7b26\u4e32\u8ba1\u7b97md5, \u5f97\u5230\n   ```a90a66d09bde8a32725c9efde082fae1```\n6. \u628a\u8fd9\u4e2a\u7ed3\u679c\u586b\u7ed9sign\uff0c\u90a3\u4e48\u6700\u540e\u8981\u4f20\u8f93\u7684\u6570\u636e\n   ```\n   {\n\t\toutOrderId:'abc123', \n\t\tmoney:'1.00', \n\t\tpartnerId:'p001', \n\t\ttype:'WECHATPAYH5', \n\t\tcurrency:'USD',\n\t\tsign:'a90a66d09bde8a32725c9efde082fae1'\n   }\n   ```\n\n\u5173\u4e8e\u7ed3\u7b97\u8d27\u5e01\n---------------------------\n\u5982\u679c\u4e0b\u5355\u65f6\u4f7f\u7528\u5916\u5e01\uff0c\u7ed3\u7b97\u4e5f\u4f1a\u7ed3\u7b97\u5916\u5e01\u3002\u5982\u679c\u60a8\u9700\u8981\u4ee5\u4eba\u6c11\u5e01\u8ba1\u4ef7\uff0c\u5219\u5fc5\u987b\u5728\u4e0b\u5355\u65f6\u6309\u7167\u5b9e\u65f6\u6c47\u7387\u6362\u7b97\uff0c\u6bd4\u5982\u7f8e\u5143\u6c47\u7387\u662f6.45\uff0c\u5982\u679c\u8981\u751f\u6210100\u4eba\u6c11\u5e01\u7684\u8ba2\u5355\uff0c\u4f60\u5e94\u8be5\u4e0b100/6.45=15.50\u7f8e\u5143\u7684\u652f\u4ed8\u8ba2\u5355\u3002\n\n\n\u4f7f\u7528\u5fae\u4fe1\u652f\u4ed8\n---------------------------\n\u4e0b\u5355\u5916\u5e01\u65f6\u7cfb\u7edf\u8fd4\u56de\u7684url\u53ea\u80fd\u5728\u5fae\u4fe1\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00\u4ed8\u6b3e\uff0c\u5982\u679c\u5728chrome\u4e4b\u7c7b\u7684\u7cfb\u7edf\u6d4f\u89c8\u5668\u4e2d\u4f1a\u663e\u793a\n> \u8bf7\u4f7f\u7528\u5fae\u4fe1\u6d4f\u89c8\u5668\u6253\u5f00\n\n\u8fd9\u663e\u7136\u4e0d\u662f\u4f60\u60f3\u770b\u5230\u7684\u3002\u90a3\u4e48\u5904\u7406\u65b9\u5f0f\u662f\n1. \u5c06\u8fd9\u4e2aurl\u663e\u793a\u6210\u4e8c\u7ef4\u7801\uff0c\u8ba9\u7528\u6237\u7528\u5fae\u4fe1\u626b\u7801\uff0c\n   - \u5982\u679c\u5728pc\u7aef\uff0c\u76f4\u63a5\u663e\u793a\u8fd9\u4e2a\u4e8c\u7ef4\u7801\n   - \u5982\u679c\u5728\u624b\u673a\u7aef\uff0c\u63d0\u793a\u7528\u6237\u622a\u5c4f\uff0c\u5728\u5fae\u4fe1\u91cc\u626b\u4e00\u626b\uff0c\u9009\u62e9\u76f8\u518c\n\n\u4e0b\u5355\u4eba\u6c11\u5e01\u65f6\u4e0d\u5b58\u5728\u8fd9\u4e2a\u95ee\u9898"},966:function(e,t,n){"use strict";n.r(t);var a,r=n(3),c=n(0),o=n.n(c),s=n(19),i=n.n(s),l=(n(483),n(8)),u=n(1082),j=n(1075),d=n(109),b=n(156),O=n(112),m=n(185);function h(e){return e.forEach((function(e){null!=e._id&&(e.id=encodeURIComponent(e._id),e._id=void 0)})),e}function f(e){return null!=e.id&&(e._id=decodeURIComponent(e.id),e.id=void 0),e}function p(e,t){return(t=t||{}).headers?t.headers.set("accToken",localStorage.getItem("accToken")):t.headers=new Headers({accToken:localStorage.getItem("accToken")}),O.a.fetchJson(e,t).then((function(e){return e.json&&e.json.err?Promise.reject(new m.a(e.json.err,500,e.json)):Promise.resolve(e)}))}function x(e){switch(e){case"managers":case"agents":return"users";default:return e}}var v=n(191),g=n(192),y=n(223),S=n(221),w=n(47),C=n(30),I=n(1064),k=n(1040),N=n(220),T=n(1089),D=n(1047),E=n(1093),P=n(1049),A=n(79),R=n(397),F=n(398),H=n(1084),U=n(1094),_=n(107),M=n(1095),W=n(1088),B=n(1085),J=n(1086),L=n(1058),Y=n(1059),V=n(1060),z=n(1083),G=n(1061),$=n(1063),q=n(1057),K=n(1055),Q=n(26),X=function(e){var t,n=e.record,a=void 0===n?{}:n,c=e.source;return Object(r.jsx)("span",{children:(t=a[c],"Invalid Date"===(t=new Date(t))?"Invalid Date":t.toLocaleDateString()+" "+t.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1"))})},Z=function(e){var t=e.record,n=void 0===t?{}:t,a=e.source;return Object(r.jsx)("span",{children:decodeURIComponent("object"===typeof n?n[a]:n)})},ee=n(18),te=n(128),ne=n.n(te),ae=n(491),re=n(493),ce=function(e){var t=e.handleSubmitWithRedirect,n=e.acl,a=Object(C.a)(e,["handleSubmitWithRedirect","acl"]),o=a.redirect,s=Object(Q.e)(),i=Object(c.useCallback)((function(){var e=s.getState().values;if(e.pwd){var a=Math.random().toString(36).substring(7);s.change("salt",a),s.change("password",ne()(a+e.pwd)),s.change("pwd",void 0)}if(s.change("share",Number((1-Number(e.share)/100).toFixed(4))),n&&s.change("acl",n),e.providers)for(var r in e.providers){var c=e.providers[r];null!=c.enabled&&(s.change("providers."+r+".disabled",!c.enabled),s.change("providers."+r+".enabled",void 0))}t(o)}),[s]);return Object(r.jsx)(k.a,Object(l.a)(Object(l.a)({},a),{},{handleSubmitWithRedirect:i}))},oe=function(e){var t=e.redirect;return Object(r.jsx)(N.a,Object(l.a)(Object(l.a)({},e),{},{children:Object(r.jsx)(ce,Object(l.a)({label:"Save",redirect:t,submitOnEnter:!1},e))}))},se=function(e){var t=e.contents,n=(Object(C.a)(e,["contents"]),Object(Q.e)().getState().values),a=[];return t.providers&&t.providers.forEach((function(e){var t=!re.get(n,["providers",e.id,"disabled"],!1);a.push(Object(r.jsxs)("div",{children:[Object(r.jsx)(T.a,{source:"providers.".concat(e.id,".enabled"),defaultValue:t,label:"".concat(e.name)}),Object(r.jsx)(D.a,{children:function(t){var n=t.formData;Object(C.a)(t,["formData"]);if(n.providers[e.id].enabled){var a=[];return e.options&&e.options.forEach((function(t){a.push(Object(r.jsx)(E.a,{source:"providers.".concat(e.id,".").concat(t.name),choices:t.values.map((function(e){return{id:e,name:e}})),label:t.name}))})),e.params&&e.params.forEach((function(t){a.push(Object(r.jsx)(P.a,{source:"providers.".concat(e.id,".").concat(t),label:t}))})),a}}})]},e.id))})),a};function ie(e,t){var n=Object(A.a)(),a=Object(c.useState)(),o=Object(w.a)(a,2),s=o[0],i=o[1],u=Object(c.useState)(),j=Object(w.a)(u,2),d=j[0],b=j[1],O=Object(c.useState)(!0),m=Object(w.a)(O,2),h=m[0],f=m[1],p=Object(c.useState)(),x=Object(w.a)(p,2),v=x[0],g=x[1];if(Object(c.useEffect)((function(){n.getList("users",{filter:{acl:"agent"}}).then((function(e){var t=e.data;i(t),f(!1)})).catch((function(e){g(e),f(!1)})),n.getList("providers").then((function(e){var t=e.data;b(t)})).catch((function(e){g(e)}))}),[]),h)return Object(r.jsx)(R.a,{});if(v)return Object(r.jsx)(F.a,{});if(h)return Object(r.jsx)(R.a,{});var y=function(t){return"Create"===e?Object(r.jsx)(P.a,Object(l.a)({},t)):null};return Object(r.jsxs)(H.a,{toolbar:Object(r.jsx)(oe,{}),children:[Object(r.jsxs)(U.a,{label:"General",children:[Object(r.jsx)(P.a,{source:"name",label:"\u663e\u793a\u540d"}),Object(r.jsx)(y,{source:"id",label:"\u767b\u5f55\u540d"}),Object(r.jsx)(P.a,{source:"pwd",label:"\u5bc6\u7801",type:"password"}),Object(r.jsx)(T.a,{source:"debugMode"}),Object(r.jsx)(P.a,{source:"share",defaultValue:3}),Object(r.jsx)(E.a,{source:"parent",choices:s})]}),Object(r.jsx)(U.a,{label:"Providers",children:Object(r.jsx)(se,{contents:{providers:d}})})]})}var le=function(e){var t=e.basePath;return Object(r.jsx)(_.a,{children:Object(r.jsx)(M.a,{basePath:t})})},ue=function(e){return Object(r.jsx)(W.a,Object(l.a)(Object(l.a)({},e),{},{children:ie("Create",Object(l.a)(Object(l.a)({},e),{},{redirect:"list",acl:"merchant",initialValues:{debugMode:!0}}))}))},je=function(e){return Object(r.jsx)(B.a,Object(l.a)(Object(l.a)({},e),{},{children:ie("Edit",Object(l.a)(Object(l.a)({},e),{},{redirect:"list"}))}))},de=function(e){return Object(r.jsx)(J.a,Object(l.a)(Object(l.a)({},e),{},{children:Object(r.jsxs)(L.a,{children:[Object(r.jsx)(Y.a,{source:"name",label:"\u663e\u793a\u540d"}),Object(r.jsx)(Y.a,{source:"key"}),Object(r.jsx)(Z,{source:"merchantid"}),Object(r.jsx)(V.a,{source:"daily",label:"\u5f53\u65e5\u6536\u5165",options:{minimumFractionDigits:2,maximumFractionDigits:2}}),Object(r.jsx)(V.a,{source:"profit",label:"\u8d26\u6237\u4f59\u989d",options:{minimumFractionDigits:2,maximumFractionDigits:2}})]})}))},be={list:function(e){Object(y.a)(n,e);var t=Object(S.a)(n);function n(){var e;Object(v.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleClose=function(){e.props.history.push("/users")},e}return Object(g.a)(n,[{key:"render",value:function(){var e=this,t=this.props;return Object(r.jsxs)(o.a.Fragment,{children:[Object(r.jsx)(z.a,Object(l.a)(Object(l.a)({},t),{},{filter:{acl:"merchant"},exporter:!1,title:"\u5546\u6237",actions:Object(r.jsx)(le,{}),children:Object(r.jsxs)(G.a,{rowClick:"show",children:[Object(r.jsx)(Y.a,{source:"name",label:"\u663e\u793a\u540d"}),Object(r.jsx)(Z,{source:"id",label:"\u767b\u5f55\u540d"}),Object(r.jsx)(X,{source:"createTime",label:"\u521b\u5efa\u65f6\u95f4"}),Object(r.jsx)($.a,{source:"debugMode",label:"\u8c03\u8bd5"}),Object(r.jsx)(V.a,{source:"share",label:"\u5206\u6210",options:{style:"percent"}}),Object(r.jsx)(V.a,{source:"daily",label:"\u5f53\u65e5\u6536\u5165",options:{minimumFractionDigits:2,maximumFractionDigits:2}}),Object(r.jsx)(V.a,{source:"profit",label:"\u8d26\u6237\u4f59\u989d",options:{minimumFractionDigits:2,maximumFractionDigits:2}}),Object(r.jsx)(q.a,{}),Object(r.jsx)(K.a,{})]})})),Object(r.jsx)(ee.b,{path:"/users/create",children:function(n){var a=n.match;return Object(r.jsx)(I.a,{open:!!a,anchor:"right",onClose:e.handleClose,children:Object(r.jsx)(ue,Object(l.a)({onCancel:e.handleClose},t))})}}),Object(r.jsx)(ee.b,{path:"/users/:id/show",children:function(n){var a=n.match,c=a&&a.params&&a.params.id,o=c&&"create"!==c;return o?Object(r.jsx)(I.a,{open:o,anchor:"right",onClose:e.handleClose,children:o?Object(r.jsx)(de,Object(l.a)({id:c},t)):null}):null}}),Object(r.jsx)(ee.b,{path:"/users/:id",children:function(n){var a=n.match,c=n.location,o=a&&a.params&&"create"!==a.params.id;return o&&(a.isExact||"1"===ae.basename(c.pathname))?Object(r.jsx)(I.a,{open:o,anchor:"right",onClose:e.handleClose,children:o?Object(r.jsx)(je,Object(l.a)({id:o?a.params.id:null,onCancel:e.handleClose},t)):null}):null}})]})}}]),n}(o.a.Component)},Oe=n(1065),me=function(e){var t=e.handleSubmitWithRedirect,n=e.acl,a=Object(C.a)(e,["handleSubmitWithRedirect","acl"]),o=a.redirect,s=Object(Q.e)(),i=Object(c.useCallback)((function(){var e=s.getState().values;if(e.pwd){var a=Math.random().toString(36).substring(7);s.change("salt",a),s.change("password",ne()(a+e.pwd)),s.change("pwd",void 0)}n&&s.change("acl",n),t(o)}),[s]);return Object(r.jsx)(k.a,Object(l.a)(Object(l.a)({},a),{},{handleSubmitWithRedirect:i}))},he=function(e){var t=e.redirect;return Object(r.jsx)(N.a,Object(l.a)(Object(l.a)({},e),{},{children:Object(r.jsx)(me,Object(l.a)({label:"Save",redirect:t,submitOnEnter:!1},e))}))};function fe(e,t){return Object(r.jsxs)(Oe.a,{toolbar:Object(r.jsx)(he,{}),children:[Object(r.jsx)(P.a,{source:"name",label:"\u663e\u793a\u540d"}),"Create"===e?Object(r.jsx)(P.a,{source:"id",label:"\u767b\u5f55\u540d"}):null,Object(r.jsx)(P.a,{source:"pwd",label:"\u5bc6\u7801",type:"password"})]})}var pe=function(e){return Object(r.jsx)(W.a,Object(l.a)(Object(l.a)({},e),{},{children:fe("Create",Object(l.a)(Object(l.a)({},e),{},{redirect:"list",acl:"manager",initialValues:{debugMode:!0}}))}))},xe=function(e){return Object(r.jsx)(B.a,Object(l.a)(Object(l.a)({},e),{},{children:fe("Edit",Object(l.a)(Object(l.a)({},e),{},{redirect:"list"}))}))},ve=function(e){var t=e.basePath;return Object(r.jsx)(_.a,{children:Object(r.jsx)(M.a,{basePath:t})})},ge={list:function(e){Object(y.a)(n,e);var t=Object(S.a)(n);function n(){var e;Object(v.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleClose=function(){e.props.history.goBack()},e}return Object(g.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=(t.push,t.classes,Object(C.a)(t,["push","classes"]));return Object(r.jsxs)(c.Fragment,{children:[Object(r.jsx)(z.a,Object(l.a)(Object(l.a)({},n),{},{filter:{acl:["admin","manager"]},exporter:!1,title:"\u7ba1\u7406\u5458",actions:Object(r.jsx)(ve,{}),children:Object(r.jsxs)(G.a,{children:[Object(r.jsx)(Y.a,{source:"name",label:"\u663e\u793a\u540d"}),Object(r.jsx)(Y.a,{source:"id",label:"\u767b\u5f55\u540d"}),Object(r.jsx)(X,{source:"createTime",label:"\u521b\u5efa\u65f6\u95f4"}),Object(r.jsx)(q.a,{})]})})),Object(r.jsx)(ee.b,{path:"/managers/create",children:function(t){var a=t.match;return Object(r.jsx)(I.a,{open:!!a,anchor:"right",onClose:e.handleClose,children:Object(r.jsx)(pe,Object(l.a)({onCancel:e.handleClose},n))})}}),Object(r.jsx)(ee.b,{path:"/managers/:id",children:function(t){var a=t.match,c=a&&a.params&&"create"!==a.params.id;return Object(r.jsx)(I.a,{open:c,anchor:"right",onClose:e.handleClose,children:c?Object(r.jsx)(xe,Object(l.a)({id:c?a.params.id:null,onCancel:e.handleClose},n)):null})}})]})}}]),n}(o.a.Component)},ye=function(e){var t=e.handleSubmitWithRedirect,n=e.acl,a=Object(C.a)(e,["handleSubmitWithRedirect","acl"]),o=a.redirect,s=Object(Q.e)(),i=Object(c.useCallback)((function(){var e=s.getState().values;if(e.pwd){var a=Math.random().toString(36).substring(7);s.change("salt",a),s.change("password",ne()(a+e.pwd)),s.change("pwd",void 0)}s.change("share",Number((1-Number(e.share)/100).toFixed(4))),n&&s.change("acl",n),t(o)}),[s]);return Object(r.jsx)(k.a,Object(l.a)(Object(l.a)({},a),{},{handleSubmitWithRedirect:i}))},Se=function(e){var t=e.redirect;return Object(r.jsx)(N.a,Object(l.a)(Object(l.a)({},e),{},{children:Object(r.jsx)(ye,Object(l.a)({label:"Save",redirect:t,submitOnEnter:!1},e))}))};function we(e,t){var n=Object(A.a)(),a=Object(c.useState)(),o=Object(w.a)(a,2),s=o[0],i=o[1],u=Object(c.useState)(!0),j=Object(w.a)(u,2),d=j[0],b=j[1],O=Object(c.useState)(),m=Object(w.a)(O,2),h=m[0],f=m[1];if(Object(c.useEffect)((function(){n.getList("users",{filter:{acl:"agent"}}).then((function(e){var t=e.data;i(t),b(!1)})).catch((function(e){f(e),b(!1)}))}),[]),d)return Object(r.jsx)(R.a,{});if(h)return Object(r.jsx)(F.a,{});if(d)return Object(r.jsx)(R.a,{});var p=function(t){return"Create"===e?Object(r.jsx)(P.a,Object(l.a)({},t)):null};return Object(r.jsxs)(Oe.a,{toolbar:Object(r.jsx)(Se,{}),children:[Object(r.jsx)(P.a,{source:"name",label:"\u663e\u793a\u540d"}),Object(r.jsx)(p,{source:"id",label:"\u767b\u5f55\u540d"}),Object(r.jsx)(P.a,{source:"pwd",label:"\u5bc6\u7801",type:"password"}),Object(r.jsx)(P.a,{source:"share",defaultValue:3}),Object(r.jsx)(E.a,{source:"parent",choices:s})]})}var Ce,Ie={list:function(e){return Object(r.jsx)(z.a,Object(l.a)(Object(l.a)({},e),{},{filter:{acl:"agent"},exporter:!1,title:"\u4ee3\u7406",children:Object(r.jsxs)(G.a,{children:[Object(r.jsx)(Y.a,{source:"name",label:"\u663e\u793a\u540d"}),Object(r.jsx)(Y.a,{source:"id",label:"\u767b\u5f55\u540d"}),Object(r.jsx)(X,{source:"createTime",label:"\u521b\u5efa\u65f6\u95f4"}),Object(r.jsx)(V.a,{source:"share",label:"\u5206\u6210",options:{style:"percent"}}),Object(r.jsx)(V.a,{source:"daily",label:"\u5f53\u65e5\u6536\u5165",options:{minimumFractionDigits:2,maximumFractionDigits:2}}),Object(r.jsx)(V.a,{source:"profit",label:"\u8d26\u6237\u4f59\u989d",options:{minimumFractionDigits:2,maximumFractionDigits:2}}),Object(r.jsx)(q.a,{})]})}))},create:function(e){return Object(r.jsx)(W.a,Object(l.a)(Object(l.a)({},e),{},{children:we("Create",Object(l.a)(Object(l.a)({},e),{},{redirect:"list",acl:"agent",initialValues:{debugMode:!0}}))}))},edit:function(e){return Object(r.jsx)(B.a,Object(l.a)(Object(l.a)({},e),{},{children:we("Edit",Object(l.a)(Object(l.a)({},e),{},{redirect:"list"}))}))}},ke=n(1068),Ne=n(225),Te=n(148),De=n(1090),Ee=n(1067),Pe=n(10),Ae=n(45),Re=n(409),Fe=n(287),He=n(447),Ue=n(96),_e=n(440),Me=n(450),We=n(438),Be=n(981),Je=n(982),Le=n(980),Ye=n(448),Ve=n(989),ze=n(1066),Ge=n(7),$e=n.n(Ge),qe=o.a.forwardRef((function(e,t){var n=Object(Re.a)(e),a=e.body,s=void 0===a?Object(r.jsx)(Fe.b,{}):a,i=e.children,u=(e.classes,e.className),j=e.expand,d=e.hasBulkActions,b=void 0!==d&&d,O=e.hover,m=e.isRowSelectable,h=e.resource,f=e.rowClick,p=e.rowStyle,x=e.size,v=void 0===x?"small":x,g=e.footerResource,y=Object(C.a)(e,["body","children","classes","className","expand","hasBulkActions","hover","isRowSelectable","resource","rowClick","rowStyle","size","footerResource"]),S=Object(He.a)(e),I=S.basePath,k=S.currentSort,N=S.data,T=S.ids,D=S.loaded,E=S.onSelect,P=S.onToggleItem,R=S.selectedIds,F=S.setSort,H=(S.total,Object(Ue.a)()),U=Object(c.useCallback)((function(e){e.stopPropagation();var t=e.currentTarget.dataset.field,n=k.field===t?"ASC"===k.order?"DESC":"ASC":e.currentTarget.dataset.order;F(t,n)}),[k.field,k.order,F]),_=Object(c.useCallback)((function(e){if(e.target.checked){var t=T.concat(R.filter((function(e){return!T.includes(e)})));E(m?t.filter((function(e){return m(N[e])})):t)}else E([])}),[N,T,E,m,R]),M=Object(A.a)(),W=Object(c.useState)(),B=Object(w.a)(W,2),J=B[0],L=B[1],Y=Object(c.useState)(!1),V=Object(w.a)(Y,2),z=V[0],G=V[1];if(Object(c.useEffect)((function(){g?M.getOne(g,e.filterValues).then((function(e){var t=e.data;L(t),G(!0)})).catch((function(e){L([]),G(!0)})):G(!0)}),[e.filterValues]),!1===D||!1===z)return Object(r.jsx)(_e.a,{classes:n,className:u,expand:j,hasBulkActions:b,nbChildren:o.a.Children.count(i),size:v});var $=m?T.filter((function(e){return m(N[e])})):T,q=function(){if(null==T[0])return i;for(var e=N[T[0]],t=1;t<T.length;t++)e=Object(l.a)(Object(l.a)({},e),N[T[t]]);return c.Children.toArray(i).filter((function(t){return e.hasOwnProperty(t.props.source)}))}();return Object(r.jsxs)(Be.a,Object(l.a)(Object(l.a)({ref:t,className:$e()(n.table,u),size:v},Object(Me.c)(y)),{},{children:[Object(r.jsx)(Je.a,{className:n.thead,children:Object(r.jsxs)(Le.a,{className:$e()(n.row,n.headerRow),children:[j&&Object(r.jsx)(Ye.a,{padding:"none",className:$e()(n.headerCell,n.expandHeader)}),b&&Object(r.jsx)(Ye.a,{padding:"checkbox",className:n.headerCell,children:Object(r.jsx)(Ve.a,{className:"select-all",color:"primary",checked:R.length>0&&$.length>0&&$.every((function(e){return R.includes(e)})),onChange:_})}),q.map((function(e,t){return Object(c.isValidElement)(e)?Object(r.jsx)(We.a,{className:n.headerCell,currentSort:k,field:e,isSorting:k.field===(e.props.sortBy||e.props.source),resource:h,updateSort:U},e.props.source||t):null}))]})}),Object(c.cloneElement)(s,{basePath:I,className:n.tbody,classes:n,expand:j,rowClick:f,data:N,hasBulkActions:b,hover:O,ids:T,onToggleItem:P,resource:h,rowStyle:p,selectedIds:R,isRowSelectable:m,version:H},q),g?Object(r.jsx)(ze.a,{children:Object(r.jsx)(Le.a,{children:o.a.Children.map(q,(function(t){return Object(r.jsx)(Ye.a,{children:J?t.props.footerText?t.props.footerText:t.props.footerSource?J[t.props.footerSource]:null:null},"footer-".concat(e.id,"-").concat(t.props.source))}))},"__footer")}):null]}))})),Ke=n(14),Qe=n.n(Ke),Xe=n(1096),Ze=n(52),et=function(e){var t=e.className,n=e.classes,a=void 0===n?{}:n,c=e.source,o=e.record,s=Object(C.a)(e,["className","classes","source","record"]);return Object(r.jsx)(Xe.a,Object(l.a)({className:$e()(a.chip,t),label:null!==c&&void 0!==c?Qe()(o,c):o},Object(Ze.a)(s)))},tt=function(e){var t=Object(A.a)(),n=Object(Te.a)(),a=Object(c.useState)(),o=Object(w.a)(a,2),s=(o[0],o[1]);return Object(c.useEffect)((function(){t.getList("users",{filter:{acl:"merchant"}}).then((function(e){var t=e.data;return s(t)})).catch((function(e){return n(e.message,"warning")}))}),[]),Object(r.jsxs)(De.a,Object(l.a)(Object(l.a)({},e),{},{children:[Object(r.jsx)(P.a,{label:"\u8ba2\u5355id",source:"id"}),Object(r.jsx)(P.a,{label:"\u5546\u6237\u8ba2\u5355",source:"merchantOrderId",alwaysOn:!0}),Object(r.jsx)(P.a,{label:"\u4f9b\u5e94\u5546\u8ba2\u5355",source:"providerOrderId"}),Object(r.jsx)(P.a,{label:"\u5546\u6237",source:"merchantName",alwaysOn:!0}),Object(r.jsx)(Ee.a,{label:"\u5f00\u59cb\u65e5\u671f",source:"startTime"}),Object(r.jsx)(Ee.a,{label:"\u7ed3\u675f\u65e5\u671f",source:"endTime"}),Object(r.jsx)(E.a,{label:"\u8ba2\u5355\u72b6\u6001",source:"used",choices:[{id:!0,name:"\u5df2\u5b8c\u6210"},{id:{$ne:!0},name:"\u672a\u5b8c\u6210"},{id:void 0,name:"\u5168\u90e8"}]}),Object(r.jsx)(P.a,{label:"\u4f9b\u5e94\u5546",source:"provider"})]}))},nt=function(e){var t=e.permissions,n=Object(C.a)(e,["permissions"]).record,c=Object(Pe.e)(),o=Object(Te.a)();function s(e,t){return function(e,t){if("/"===e[0])var n="".concat(a).concat(e);else n="".concat(a,"/").concat(e);return p(n,t)}("".concat(e,"/").concat(t.action),{method:"POST",body:JSON.stringify({_id:decodeURIComponent(t.id)})}).then((function(e){var t=e.json;return o("done","info"),{data:t}})).catch((function(e){o(e.message,"warning")}))}return Object(r.jsxs)(ke.a,{variant:"text",color:"primary","aria-label":"text primary button group",children:[Object(r.jsx)(Ne.a,{onClick:function(){s("bills",{action:"notify",id:n.id})},children:"notify"}),"admin"===t?Object(r.jsx)(Ne.a,{onClick:function(){s("bills",{action:"debugBill",id:n.id}).then((function(){c(Object(Ae.e)())}))},children:"debug"}):null,"admin"===t?Object(r.jsx)(Ne.a,{onClick:function(){s("bills",{action:"adminUseBill",id:n.id}).then((function(){c(Object(Ae.e)())}))},children:"force"}):null,Object(r.jsx)(Ne.a,{onClick:function(){s("bills",{action:"refund",id:n.id}).then((function(){c(Object(Ae.e)())}))},children:"refund"})]})},at={list:function(e){var t=e.permissions,n=Object(C.a)(e,["permissions"]);return Object(r.jsx)(z.a,Object(l.a)(Object(l.a)({},n),{},{filters:Object(r.jsx)(tt,{}),exporter:!1,title:"\u5145\u503c\u8ba2\u5355",bulkActionButtons:!1,sort:{field:"time",order:"DESC"},children:Object(r.jsxs)(qe,{footerResource:"billsSummary",children:[Object(r.jsx)(Y.a,{source:"id",footerText:"Total"}),Object(r.jsx)(Y.a,{source:"merchantName",label:"\u5546\u6237"}),Object(r.jsx)(Y.a,{source:"merchantOrderId",label:"\u5546\u6237\u8ba2\u5355"}),Object(r.jsx)(Y.a,{source:"providerOrderId",label:"\u4f9b\u5e94\u5546\u8ba2\u5355"}),Object(r.jsx)(Y.a,{source:"provider",label:"\u4f9b\u5e94\u5546"}),Object(r.jsx)(V.a,{source:"share",label:"\u5206\u6210",options:{style:"percent"}}),Object(r.jsx)(V.a,{source:"money",footerSource:"money"}),Object(r.jsx)(Y.a,{source:"currency"}),Object(r.jsx)(X,{source:"time",label:"\u521b\u5efa\u65f6\u95f4"}),Object(r.jsx)(Y.a,{source:"status"}),Object(r.jsx)(nt,{permissions:t})]})}))},show:function(e){return Object(r.jsx)(J.a,Object(l.a)(Object(l.a)({},e),{},{children:Object(r.jsxs)(L.a,{children:[Object(r.jsx)(Y.a,{source:"name",label:"\u663e\u793a\u540d"}),Object(r.jsx)(Y.a,{source:"key"}),Object(r.jsx)(Y.a,{source:"merchantid"}),Object(r.jsx)(V.a,{source:"daily",label:"\u5f53\u65e5\u6536\u5165",options:{minimumFractionDigits:2,maximumFractionDigits:2}}),Object(r.jsx)(V.a,{source:"profit",label:"\u8d26\u6237\u4f59\u989d",options:{minimumFractionDigits:2,maximumFractionDigits:2}})]})}))}},rt=n(1069),ct=n(1070),ot={list:function(e){return Object(r.jsx)(z.a,Object(l.a)(Object(l.a)({},e),{},{exporter:!1,title:"\u4f9b\u5e94\u5546",bulkActionButtons:!1,children:Object(r.jsxs)(G.a,{rowClick:"expand",children:[Object(r.jsx)(Y.a,{source:"name"}),Object(r.jsx)($.a,{source:"forecore",label:"\u56db\u65b9"}),Object(r.jsx)($.a,{source:"withdrawal",label:"\u652f\u6301\u63d0\u6b3e"}),Object(r.jsx)($.a,{source:"reconciliation",label:"\u652f\u6301\u5bf9\u8d26"}),Object(r.jsx)(rt.a,{source:"supportedMethods",label:"\u652f\u4ed8\u65b9\u5f0f",children:Object(r.jsx)(ct.a,{children:Object(r.jsx)(et,{})})})]})}))}},st=n(211),it=n(1051),lt=n(413),ut=n.n(lt),jt=n(414),dt=n.n(jt),bt=n(1087),Ot=n(1071),mt=n(684).default,ht={code:function(e){e.language;var t=e.value;return Object(r.jsx)(bt.a,{style:Ot.a,language:"javascript",children:t})}},ft={list:function(e){var t=e.options;Object(C.a)(e,["options"]);return Object(r.jsxs)("div",{className:"show-page",style:{marginTop:"64px"},children:[Object(r.jsx)(st.a,{title:t.label,defaultTitle:t.label}),Object(r.jsx)(it.a,{children:Object(r.jsx)(ut.a,{plugins:[dt.a],renders:ht,children:mt})})]})}},pt=n(6),xt=(n(979),n(419),n(1072),n(1092),n(1073)),vt=n(1091),gt=(Object(pt.a)((function(e){var t;return{root:(t={},Object(d.a)(t,e.breakpoints.up("sm"),{order:-1,width:"15em",marginRight:"1em"}),Object(d.a)(t,e.breakpoints.down("sm"),{display:"none"}),t)}}))(it.a),{list:function(e){e.permissions;var t=Object(C.a)(e,["permissions"]);return Object(r.jsx)(z.a,Object(l.a)(Object(l.a)({},t),{},{title:"\u62a5\u8868",bulkActionButtons:!1,sort:{field:"time",order:"DESC"},children:Object(r.jsxs)(qe,{footerResource:"statementsSummary",children:[Object(r.jsx)(xt.a,{source:"time",footerText:"Total"}),Object(r.jsx)(vt.a,{label:"\u5546\u6237",source:"account",reference:"users",children:Object(r.jsx)(Y.a,{source:"name"})}),Object(r.jsx)(V.a,{source:"balance",label:"\u6536\u5165",options:{maximumFractionDigits:2},footerSource:"balance"}),Object(r.jsx)(V.a,Object(d.a)({source:"commission",label:"\u624b\u7eed\u8d39",footerSource:"money",options:{maximumFractionDigits:2}},"footerSource","commission")),Object(r.jsx)(V.a,{source:"count",label:"\u4ea4\u6613\u7b14\u6570",footerSource:"money",options:{maximumFractionDigits:0}})]})}))}}),yt=n(158),St=n.n(yt),wt=n(285),Ct=n(449),It=n(70),kt=n(1044),Nt=n(1074),Tt=n(34),Dt=n(971),Et=function(){},Pt=Object(It.a)({actionButton:{marginBottom:"29px"}}),At=function(e){var t=e.className,n=Object(C.a)(e,["className"]),a=Object(A.a)(),o=Object(c.useState)(),s=Object(w.a)(o,2),i=s[0],u=s[1],j=Object(Te.a)();Object(c.useEffect)((function(){a.getList("providers").then((function(e){var t=e.data;u(t)})).catch((function(e){j(e.message,"warning")}))}),[]);var d=Pt(),b=Object(Dt.a)();return Object(r.jsx)(_.a,Object(l.a)(Object(l.a)({className:t},Object(Me.c)(n)),{},{children:Object(r.jsx)(Q.b,{onSubmit:Et,children:function(e){var t=e.handleSubmit;return Object(r.jsx)("form",{onSubmit:t,children:Object(r.jsxs)(Ct.a,{display:"flex",alignItems:"flex-end",mb:1,children:[Object(r.jsx)(Ct.a,{component:"span",mr:2,children:Object(r.jsx)(E.a,{label:"\u4f9b\u5e94\u5546",choices:[{id:null,name:"All"}].concat(i),source:"provider"})}),Object(r.jsx)(Ct.a,{component:"span",mr:2,children:Object(r.jsx)(Nt.a,{label:"\u65e5\u671f",source:"date"})}),Object(r.jsx)(Ct.a,{component:"span",mr:2,children:Object(r.jsx)(D.a,{children:function(e){var t=e.formData;Object(C.a)(e,["formData"]);return Object(r.jsx)(Tt.a,{className:d.actionButton,variant:"contained",size:"medium",onClick:Object(wt.a)(St.a.mark((function e(){var n;return St.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.date){e.next=2;break}return e.abrupt("return",j("Date must be specified","error"));case 2:return e.prev=2,e.next=5,a.actions("recon",Object(l.a)({method:"check"},t));case 5:if(n=e.sent){e.next=8;break}return e.abrupt("return");case 8:b(),j("".concat(n.data.modified," records updated"),"info"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),j(e.t0.message,"warning");case 15:case"end":return e.stop()}}),e,null,[[2,12]])}))),label:"\u91cd\u65b0\u5bf9\u8d26"})}})})]})})}})}))},Rt={Recon:{list:function(e){return Object(r.jsx)(z.a,Object(l.a)(Object(l.a)({},e),{},{exporter:!1,actions:Object(r.jsx)(At,{}),title:"\u5bf9\u8d26",bulkActionButtons:!1,sort:{field:"time",order:"DESC"},children:Object(r.jsxs)(qe,{children:[Object(r.jsx)(xt.a,{source:"time",label:"\u65f6\u95f4"}),Object(r.jsx)(Y.a,{source:"account",label:"\u4f9b\u5e94\u5546"}),Object(r.jsx)(Y.a,{source:"recon_tag",label:"\u5bf9\u8d26\u6807\u8bb0"}),Object(r.jsx)(V.a,{source:"received",label:"\u6536\u6b3e"}),Object(r.jsx)(V.a,{source:"commission",label:"\u624b\u7eed\u8d39"})]})}))},create:function(e){var t=Object(kt.a)(),n=Object(A.a)(),a=Object(Te.a)();return Object(r.jsx)(Q.b,{onSubmit:Et,children:function(e){var c=e.handleSubmit;return Object(r.jsxs)("form",{onSubmit:c,children:[Object(r.jsx)("p",{children:"\u9009\u62e9\u521d\u59cb\u5bf9\u8d26\u7684\u65e5\u671f"}),Object(r.jsx)(Nt.a,{label:"\u65e5\u671f",source:"date"}),Object(r.jsx)(D.a,{children:function(e){var c=e.formData;Object(C.a)(e,["formData"]);return Object(r.jsx)(N.a,{children:Object(r.jsx)(Tt.a,{variant:"contained",size:"medium",label:"\u521d\u59cb\u5316\u5bf9\u8d26\u6570\u636e",onClick:Object(wt.a)(St.a.mark((function e(){var r;return St.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.date){e.next=2;break}return e.abrupt("return",a("Date must be specified","error"));case 2:return e.prev=2,e.next=5,n.actions("recon",Object(l.a)({method:"check",end:new Date},c));case 5:if(r=e.sent){e.next=8;break}return e.abrupt("return");case 8:if(0!==r.data.modified){e.next=10;break}return e.abrupt("return",a("no data received, system will check data per 30 mins. you will see the results if ","warning"));case 10:t("/recon"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),a(e.t0.message,"warning");case 16:case"end":return e.stop()}}),e,null,[[2,13]])})))})})}})]})}})}}},Ft=n(1076),Ht=n(1077),Ut=n(1078),_t=n(1079),Mt=n(1080),Wt=n(1081),Bt=window.location,Jt=new URLSearchParams(Bt.search).get("server");Jt?(0!==Jt.indexOf("//")&&(Jt="//"+Jt),"/"===(Ce=Bt.protocol+Jt)[Ce.length-1]&&(Ce=Ce.slice(0,-1))):Ce=Bt.protocol+"//"+Bt.hostname+(Bt.port?":"+Bt.port:"");var Lt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;return a=e,{getList:function(n,a){var r,c,o,s,i;if(a){if(a.pagination){var l=a.pagination,u=l.page,j=l.perPage;r=(u-1)*j,c=j}a.sort&&(o=a.sort.field,s=a.sort.order),a.filter&&(i=JSON.stringify(f(a.filter)))}var d={offset:r,limit:c,sort:o,order:s,filter:i},O="".concat(e,"/").concat(x(n),"?").concat(Object(b.stringify)(d));return t(O,{}).then((function(e){e.headers;var t=e.json;return h(t.rows),{data:t.rows,total:t.total}}))},getOne:function(n,a){return t("".concat(e,"/").concat(x(n),"?").concat(Object(b.stringify)({filter:JSON.stringify(f(a))}))).then((function(e){var t=e.json;if(t.err)throw new m.a(t.err,500,t);var n=t.rows[0];return n?(n.id=n._id,n._id=void 0,{data:n}):{data:null}}))},getMany:function(n,a){var r={filter:JSON.stringify({_id:a.ids})},c="".concat(e,"/").concat(x(n),"?").concat(Object(b.stringify)(r));return t(c).then((function(e){var t=e.json;return h(t.rows),{data:t.rows,total:t.total}}))},getManyReference:function(n,a){var r=a.pagination,c=r.page,o=r.perPage,s=a.sort,i={sort:s.field,order:s.order,offset:(c-1)*o,limit:o,filter:JSON.stringify(Object(l.a)(Object(l.a)({},f(a.filter)),{},Object(d.a)({},a.target,a.id)))},u="".concat(e,"/").concat(x(n),"?").concat(Object(b.stringify)(i));return t(u).then((function(e){var t=e.json;return h(t.rows),{data:t.rows,total:t.total}}))},update:function(n,a){return a.data.id=void 0,a.data._id=void 0,t("".concat(e,"/").concat(x(n),"/").concat(a.id),{method:"PUT",body:JSON.stringify(a.data)}).then((function(e){return{data:e.json}}))},updateMany:function(n,a){return a.data.id=void 0,a.data._id=void 0,t("".concat(e,"/").concat(x(n),"/").concat(JSON.stringify(a.ids)),{method:"PUT",body:JSON.stringify(a.data)}).then((function(e){return{data:e.json}}))},create:function(n,a){return t("".concat(e,"/").concat(x(n)),{method:"POST",body:JSON.stringify(a.data)}).then((function(e){var t=e.json;return{data:Object(l.a)(Object(l.a)({},a.data),{},{id:t._id})}}))},delete:function(n,a){return t("".concat(e,"/").concat(x(n),"/").concat(a.id),{method:"DELETE"}).then((function(e){return{data:e.json}}))},deleteMany:function(n,a){return t("".concat(e,"/").concat(x(n),"/").concat(JSON.stringify(a.ids)),{method:"DELETE"}).then((function(e){return{data:e.json}}))},actions:function(n,a){var r=void 0;return a.id&&(r=decodeURIComponent(a.id),a.id=void 0),t("".concat(e,"/").concat(x(n),"/").concat(a.method),{method:"POST",body:JSON.stringify(Object(l.a)({_id:r},a))}).then((function(e){return{data:e.json}}))}}}(Ce),Yt=function(){return Object(r.jsx)(u.a,{dataProvider:Lt,authProvider:(e=Ce,{login:function(t){var n=t.username,a=t.password;return fetch(e+"/admin/login",{body:JSON.stringify({u:n,p:a}),method:"PUT",headers:new Headers({"Content-Type":"application/json"})}).then((function(e){return e.json()})).then((function(e){var t=e.err,n=e.a,a=e.o;return t?Promise.reject(t):(localStorage.setItem("accToken",n),localStorage.setItem("acl",a.acl),Promise.resolve())}))},logout:function(){return localStorage.removeItem("accToken"),localStorage.removeItem("acl"),Promise.resolve()},checkError:function(e){var t=e.status;return 401===t||403===t?(localStorage.removeItem("accToken"),localStorage.removeItem("acl"),Promise.reject()):Promise.resolve()},checkAuth:function(){return localStorage.getItem("accToken")?Promise.resolve():Promise.reject()},getPermissions:function(){var e=localStorage.getItem("acl");return e?Promise.resolve(e):Promise.reject()}}),children:function(e){var t=[];return"admin"===e&&(t=t.concat([Object(r.jsx)(j.a,{name:"userManager",icon:Ft.a,options:{label:"\u7528\u6237\u7ba1\u7406",isMenuParent:!0}},"userManager"),Object(r.jsx)(j.a,Object(l.a)(Object(l.a)({name:"managers",icon:Ht.a},ge),{},{options:{label:"\u7ba1\u7406\u5458",menuParent:"userManager"}}),"managers"),Object(r.jsx)(j.a,Object(l.a)(Object(l.a)({name:"users",icon:Ut.a},be),{},{options:{label:"\u5546\u6237",menuParent:"userManager"}}),"users"),Object(r.jsx)(j.a,Object(l.a)(Object(l.a)({name:"agents",icon:_t.a},Ie),{},{options:{label:"\u4ee3\u7406",menuParent:"userManager"}}),"agents"),Object(r.jsx)(j.a,Object(l.a)(Object(l.a)({name:"providers",icon:Mt.a},ot),{},{options:{label:"\u4f9b\u5e94\u5546"}}),"providers"),Object(r.jsx)(j.a,Object(l.a)(Object(l.a)({name:"recon",icon:Mt.a},Rt.Recon),{},{options:{label:"\u5bf9\u8d26\u5386\u53f2"}}),"financial_recon")])),t.push(Object(r.jsx)(j.a,Object(l.a)(Object(l.a)({name:"bills",icon:Wt.a},at),{},{options:{label:"\u8ba2\u5355"}}),"bills")),t.push(Object(r.jsx)(j.a,Object(l.a)(Object(l.a)({name:"statements",icon:Wt.a},gt),{},{options:{label:"\u62a5\u8868"}}),"statements")),t.push(Object(r.jsx)(j.a,Object(l.a)(Object(l.a)({name:"docs"},ft),{},{options:{label:"\u6587\u6863"}}),"docs")),t}});var e};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(Yt,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[966,1,2]]]);
//# sourceMappingURL=main.bf5eac11.chunk.js.map