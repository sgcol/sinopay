{"version":3,"sources":["data-provider.js","extends/fields.js","extends/datagrid/index.js","extends/datagrid/Datagrid.js","extends/pureChip.js","extends/ObjectFormIterator.js","refillBills.js","customRoutes.js","users.js","managers/create.js","managers/index.js","agents.js","App.js","bills.js","disbursements.js","providers/list.js","providers/index.js","docs.js","statements.js","financial/recon-page.js","financial/recon-manual.js","financial/index.js","dashboard.js","demo.js","auth.js","serviceWorker.js","index.js","../docs/四方接口.md"],"names":["baseUrl","_id2id","arr","forEach","item","_id","id","undefined","id2_id","obj","myFetchJson","url","options","headers","Headers","set","localStorage","getItem","accToken","fetchUtils","fetchJson","then","result","json","err","Promise","reject","HttpError","resolve","mapResource","name","fetchApi","uri","DateTimeField","t","className","record","source","rest","Typography","component","variant","sanitizeFieldRestProps","Date","toLocaleDateString","toTimeString","replace","EscapedTextField","emptyText","str","decodeURIComponent","ExtendedDatagrid","React","forwardRef","props","ref","classes","useDatagridStyles","body","DatagridBody","children","expand","hasBulkActions","hover","isRowSelectable","resource","rowClick","rowStyle","size","footerResource","useListContext","basePath","currentSort","data","ids","loaded","onSelect","onToggleItem","selectedIds","setSort","version","total","useVersion","updateSort","useCallback","event","stopPropagation","newField","currentTarget","dataset","field","newOrder","order","handleSelectAll","target","checked","all","concat","filter","includes","dataProvider","useDataProvider","useState","footerData","setFooterData","footerLoaded","setFooterLoaded","useEffect","getOne","filterValues","catch","DatagridLoading","nbChildren","Children","count","shown","sample","i","length","toArray","alwaysOn","hasOwnProperty","Table","classnames","table","sanitizeListRestProps","TableHead","thead","TableRow","row","headerRow","TableCell","padding","headerCell","expandHeader","Checkbox","color","every","onChange","map","index","isValidElement","DatagridHeaderCell","isSorting","sortBy","cloneElement","tbody","TableFooter","footerText","footerSource","footerRender","ChipField","Chip","chip","label","get","useStyles","makeStyles","theme","root","marginBottom","borderBottom","line","display","listStyleType","palette","divider","breakpoints","down","opacity","transform","transition","minWidth","paddingTop","form","flex","action","leftIcon","marginRight","spacing","ObjectFormIterator","addButton","removeButton","fields","disabled","disableAdd","disableRemove","margin","TransitionProps","defaultValue","nodeRef","useRef","listFields","records","classNames","TransitionGroup","ret","current","push","CSSTransition","timeout","input","index2","inputSource","inputProps","FormInput","width","Save","history","bills","userArray","users","provider","notify","useNotify","values","useFormState","logout","useLogout","Toolbar","Button","type","aria-label","onClick","u","ops","bill","orderId","money","time","paymentMethod","userid","originData","share","payment","merchantName","currency","method","JSON","stringify","insertedCount","setTimeout","goBack","message","status","RefillBills","location","state","dp","setUsers","getList","acl","e","Error","error","Loading","merchants","agents","userList","Card","Title","defaultTitle","Alert","severity","SimpleForm","toolbar","submitOnEnter","TableBody","rowEven","rowOdd","cell","fee","SelectInput","choices","recharge","exact","path","require","objPath","SaveWithNoteButton","handleSubmitWithRedirect","redirect","useForm","handleClick","formdata","getState","pwd","salt","Math","random","toString","substring","change","md5","key","mdr","parseFloat","Number","toFixed","providers","prd","enabled","SaveButton","PostToolbar","Providers","contents","eles","enable","BooleanInput","parse","v","format","FormDataConsumer","formData","opt","params","p","TextInput","defaultShare","creditCard","fix_fee","eWallet","va","retailOutlets","disbursement","ShareSection","loading","validate","Labeled","LinearProgress","FormControl","fullWidth","InputLabel","htmlFor","shrink","FieldTitle","isRequired","only","CreateAndEditView","setAgents","setProviders","setLoading","setError","LoginName","TabbedForm","FormTab","hidden","value","fixFee","UserListActions","TopToolbar","CreateButton","UserCreator","Create","initialValues","debugMode","UserEdit","Edit","UserShow","Show","SimpleShowLayout","TextField","NumberField","minimumFractionDigits","maximumFractionDigits","textAlign","text","primary","icon","height","marginTop","drawer","flexShrink","drawerPaper","Empty","translate","useTranslate","paragraph","list","handleClose","Fragment","List","exporter","title","actions","empty","BooleanField","style","EditButton","ShowButton","match","Drawer","open","anchor","onClose","paper","onCancel","isMatch","isExact","basename","pathname","ManagerCreator","ManagerEdit","ListActions","this","Component","apiUrl","BillFilter","Filter","DateTimeInput","$ne","OptionButtons","permissions","dispatch","useDispatch","TakeAction","ButtonGroup","refreshView","showShare","filters","filterDefaultValues","used","$nin","bulkActionButtons","sort","FunctionField","render","show","showBalance","amount","balance","receivable","showOutstanding","outstandingBalanceError","outstandingBalance","outstandingReceivable","FullProviderInfo","pb","setPB","oa","setOA","account","b","ArrayField","SingleFieldList","mdsrc","default","header","fontSize","minHeight","overflow","textOverflow","whiteSpace","subtitle","maxWidth","image","img","maxHeight","renderers","code","language","dark","identity","useGetIdentity","userKey","setKey","CardHeader","Grid","container","direction","xs","gutterBottom","Divider","orientation","flexItem","merchantid","CardContent","plugins","gfm","renders","showIncoming","withStyles","up","MuiCard","rec","commission","DateField","ReferenceField","reference","link","_noop","actionButton","ReconActions","refresh","useRefresh","onSubmit","handleSubmit","Box","alignItems","mb","mr","DateInput","a","date","modified","create","useRedirect","end","UploadDialogToolbar","varirant","fmdt","FormData","append","file","rawFile","Array","isArray","CloudUpload","thickness","UploadDialog","selectedValue","Dialog","aria-labelledby","DialogTitle","FileInput","accept","FileField","setOpen","DoneAll","PostBulkActionButtons","ProviderFilter","FilterList","SportsMotorsports","FilterListItem","HasReconId","unsettled","FilterSidebar","FilterLiveSearch","Ops","recon_id","Recon","ReconManual","aside","mb2","DisableDebugMode","user","disableAlert","setDisableAlert","update","Collapse","in","setUser","qrcode","flexDirection","Go","qr","setQR","get_url","cb","partner","find","window","origin","search","server","Qs","slice","protocol","host","now","cb_url","partnerId","outOrderId","getTime","return_url","href","userId","sign","sortObj","fetch","mode","response","detail","DialogContent","DialogActions","NumberInput","spec_server","URLSearchParams","indexOf","hostname","port","httpClient","offset","limit","pagination","page","perPage","query","rows","getMany","getManyReference","updateMany","delete","deleteMany","DataProvider","App","Admin","customRoutes","authProvider","login","username","password","res","o","setItem","removeItem","checkError","checkAuth","getPermissions","getIdentity","fullName","Resource","SupervisorAccount","Managers","menuParent","Apple","Users","CloudDone","financial","PlaylistAddCheck","DashbaordPage","Dashboard","Receipt","Bills","Payment","Disbursements","Assessment","Statements","LibraryBooks","Docs","DeveloperBoard","Demo","Boolean","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","console"],"mappings":"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","file":"static/js/main.037a9d17.chunk.js","sourcesContent":["import { stringify } from 'query-string';\nimport { fetchUtils } from 'ra-core';\nimport { HttpError } from 'react-admin';\n\n/**\n * Maps react-admin queries to a my api\n *\n * This REST dialect is similar to the one of FakeRest\n *\n * @see https://github.com/marmelab/FakeRest\n *\n * @example\n *\n * getList     => GET http://my.api.url/posts?sort=title&order=asc&limit=24&offset=0\n * getOne      => GET http://my.api.url/posts/123\n * getMany     => GET http://my.api.url/posts?filter={id:[123,456,789]}\n * update      => PUT http://my.api.url/posts/123\n * create      => POST http://my.api.url/posts\n * delete      => DELETE http://my.api.url/posts/123\n *\n * @example\n *\n * import * as React from \"react\";\n * import { Admin, Resource } from 'react-admin';\n * import dataProvider from './data-provider';\n *\n * import { PostList } from './posts';\n *\n * const App = () => (\n *     <Admin dataProvider={dataProvider('http://path.to.my.api/')}>\n *         <Resource name=\"posts\" list={PostList} />\n *     </Admin>\n * );\n *\n * export default App;\n */\n\nfunction _id2id(arr) {\n    arr.forEach((item)=>{\n        if (item._id!=null) {\n            item.id=item._id;\n            item._id=undefined;\n        }\n    })\n    return arr;\n}\nfunction id2_id(obj) {\n    if (obj.id!=null) {\n        obj._id=obj.id;\n        obj.id=undefined;\n    }\n    return obj;\n}\n\nfunction myFetchJson(url, options) {\n    options=options||{};\n    if (options.headers) {\n        if (!(options.headers instanceof Headers)) options.headers=new Headers(options.headers)\n        options.headers.set('accToken', localStorage.getItem('accToken'));\n    } else {\n        options.headers=new Headers({\n            accToken:localStorage.getItem('accToken')\n        })\n    }\n    return fetchUtils.fetchJson(url, options).then((result)=>{\n        if (result.json && result.json.err) return Promise.reject(new HttpError(result.json.err, 500, result.json));\n        return Promise.resolve(result)\n    })\n}\nfunction mapResource(name) {\n    switch(name) {\n        case 'managers':\n        case 'agents':\n            return 'users';\n        case 'disbursements':\n            return 'bills';\n        default:\n            return name;\n    }\n}\n\nvar baseUrl;\nexport const fetchApi=(url, options) =>{\n    if (url[0]==='/') var uri=`${baseUrl}${url}`;\n    else uri=`${baseUrl}/${url}`;\n    return myFetchJson(uri, options)\n};\n/**\n * @param  {} apiUrl\n * @param  {} httpClient=fetchUtils.fetchJson\n * @returns DataProvider\n */\nexport default (apiUrl, httpClient = myFetchJson) => {\n    baseUrl=apiUrl;\n    return {\n        /**\n        * @typedef GetListParams\n        * @type {object}\n        * @property { page: {int} , perPage: {int} } pagination\n        * @property { field: {string}, order: {string} } sort\n        * @property {object} filter\n        * @param  {string} resource\n        * @param  {GetListParams} params\n        */\n        getList: (resource, params) => {\n            var offset,limit, sort, order, filter;\n            if (params) {\n                if (params.pagination) {\n                    const { page, perPage } = params.pagination;\n                    offset=(page - 1) * perPage;\n                    limit=perPage;\n                }\n                if (params.sort) {\n                    sort = params.sort.field;\n                    order = params.sort.order;\n                }\n                if (params.filter) {\n                    filter=JSON.stringify(id2_id(params.filter));\n                }\n            }\n            const query = {\n                offset,\n                limit,\n                sort,\n                order,\n                filter\n            };\n            const url = `${apiUrl}/${mapResource(resource)}?${stringify(query)}`;\n\n            return httpClient(url, {\n                // Chrome doesn't return `Content-Range` header if no `Range` is provided in the request.\n                // headers: new Headers({\n                //     Range: `${mapResource(resource)}=${rangeStart}-${rangeEnd}`,\n                // }),\n            }).then(({ headers, json }) => {\n                // if (!headers.has('content-range')) {\n                //     throw new Error(\n                //         'The Content-Range header is missing in the HTTP Response. The simple REST data provider expects responses for lists of resources to contain this header with the total number of results to build the pagination. If you are using CORS, did you declare Content-Range in the Access-Control-Expose-Headers header?'\n                //     );\n                // }\n                _id2id(json.rows);\n                return {\n                    data: json.rows,\n                    total: json.total,\n                };\n            });\n        },\n        /**\n        * @typedef GetOneParams\n        * @type {object}\n        * @property { string } id\n        * @param  {string} resource\n        * @param  {GetOneParams} params\n        */\n        getOne: (resource, params) => {\n            return httpClient(`${apiUrl}/${mapResource(resource)}?${stringify({filter:JSON.stringify(id2_id(params))})}`).then(({ json }) => {\n                if (json.err) throw new HttpError(json.err, 500, json);\n                var data=json.rows[0];\n                if (!data) return {data:null};\n                data.id=data._id;\n                data._id=undefined;\n                return {data};\n            })\n        },\n\n        getMany: (resource, params) => {\n            var {ids:_id, ...rest}=params\n            const query = {\n                filter: JSON.stringify({_id, ...rest}),\n            };\n            const url = `${apiUrl}/${mapResource(resource)}?${stringify(query)}`;\n            return httpClient(url).then(({ json }) => {\n                // _id2id(json.rows);\n                var ids={};\n                json.rows.forEach(v=>ids[v._id]=v);\n                var data=params.ids.map(id=>({id, ...ids[id]}))\n                return {\n                    data,\n                    total: params.ids.length\n                }\n            }) \n        },\n\n        /**\n        * @typedef GetManyReferenceParams\n        * @property {string} target \n        * @property {mixed} id\n        * @property { {int} page , {int} perPage } pagination\n        * @property { {string} field , {string} order } sort\n        * @property {Object} filter\n        * @param {string} resource\n        * @param {GetManyReferenceParams} params\n        */\n        getManyReference: (resource, params) => {\n            const { page, perPage } = params.pagination;\n            const { field:sort, order } = params.sort;\n            const query = {\n                sort,\n                order,\n                offset: (page - 1) * perPage,\n                limit: perPage,\n                filter: JSON.stringify({\n                    ...id2_id(params.filter),\n                    [params.target]: params.id,\n                }),\n            };\n            const url = `${apiUrl}/${mapResource(resource)}?${stringify(query)}`;\n\n            return httpClient(url).then(({ json }) => {\n                _id2id(json.rows);\n                return {\n                    data: json.rows,\n                    total: json.total,\n                };\n            });\n        },\n\n        update: (resource, params) => {\n            params.data.id=undefined;\n            params.data._id=undefined;\n            return httpClient(`${apiUrl}/${mapResource(resource)}/${params.id}`, {\n                method: 'PUT',\n                body: JSON.stringify(params.data),\n            }).then(({ json }) => { \n                return {data: json} \n            })\n        },\n\n        // simple-rest doesn't handle provide an updateMany route, so we fallback to calling update n times instead\n        updateMany: (resource, params) => {\n            params.data.id=undefined;\n            params.data._id=undefined;\n            return httpClient(`${apiUrl}/${mapResource(resource)}/${JSON.stringify(params.ids)}`, {\n                method: 'PUT',\n                body: JSON.stringify(params.data),\n            }).then(({json}) => { \n                return {data: json}\n            })\n        },\n\n        create: (resource, params) =>\n            httpClient(`${apiUrl}/${mapResource(resource)}`, {\n                method: 'POST',\n                body: JSON.stringify(params.data),\n            }).then(({ json }) => {\n                return {data: { ...params.data, id: json._id }}\n            }),\n\n        delete: (resource, params) => {\n            return httpClient(`${apiUrl}/${mapResource(resource)}/${params.id}`, {\n                method: 'DELETE',\n            }).then(({ json }) => { \n                return {data: json }\n            })\n        },\n\n        // simple-rest doesn't handle filters on DELETE route, so we fallback to calling DELETE n times instead\n        deleteMany: (resource, params) => {\n            return httpClient(`${apiUrl}/${mapResource(resource)}/${JSON.stringify(params.ids)}`, {\n                method: 'DELETE',\n            }).then(({ json }) => {\n                return {data: json} \n            })\n        },\n        actions: (resource, params) =>{\n            var _id=undefined;\n            if (params.id) {\n                _id=decodeURIComponent(params.id);\n                params.id=undefined;\n            }\n            return httpClient(`${apiUrl}/${mapResource(resource)}/${params.method}`, {\n                method:'POST',\n                body:JSON.stringify({_id, ...params})\n            }).then(({json})=>{\n                return {data:json};\n            })\n        },\n    }\n}","import * as React from \"react\";\nimport {TextField, sanitizeFieldRestProps} from 'react-admin';\nimport {Typography} from '@material-ui/core'\n\nconst timestring =(t)=>{\n\tt=new Date(t);\n\tif (t==='Invalid Date') return 'Invalid Date';\n\treturn t.toLocaleDateString()+' '+ t.toTimeString().replace(/.*(\\d{2}:\\d{2}:\\d{2}).*/, \"$1\");;\n}\nexport const DateTimeField = ({ className, record={}, source, ...rest }) =>\n\t<Typography\n\t\tcomponent=\"span\"\n\t\tvariant=\"body2\"\n\t\tclassName={className}\n\t\t{...sanitizeFieldRestProps(rest)}\n\t>\n\t\t{timestring(typeof record==='object'?record[source]:record)}\n\t</Typography>\n\nexport const EscapedTextField =({className, emptyText, record, source, ...rest})=> {\n\tvar str=decodeURIComponent(typeof record==='object'?record[source]:record);\n\t// record={source:str};\n\t// return <TextField record={record} source={source} {...rest} />\t\n\t// return <TextField {...props} />\n\treturn (<Typography\n                component=\"span\"\n                variant=\"body2\"\n                className={className}\n\t\t\t\t{...sanitizeFieldRestProps(rest)}\n            >\n                {str}\n            </Typography>\n\t\t)\n}\n","import {Datagrid} from './Datagrid';\n\nexport const ExtendedDatagrid=Datagrid;\n","import React , {useState, useEffect} from 'react';\nimport {\n    isValidElement,\n    Children,\n    cloneElement,\n    useCallback,\n} from 'react';\n// import PropTypes from 'prop-types';\nimport {\n    sanitizeListRestProps,\n    useListContext,\n    useVersion,\n    useDataProvider,\n    DatagridLoading, DatagridBody, DatagridHeaderCell, useDatagridStyles\n} from 'react-admin';\nimport {\n    Checkbox,\n    Table,\n    TableCell,\n    TableHead,\n    TableFooter,\n    TableRow,\n} from '@material-ui/core';\nimport classnames from 'classnames';\n\nexport const Datagrid = React.forwardRef((props, ref) => {\n    const classes = useDatagridStyles(props);\n    const {\n        body = <DatagridBody />,\n        children,\n        classes: classesOverride,\n        className,\n        expand,\n        hasBulkActions = false,\n        hover,\n        isRowSelectable,\n        resource,\n        rowClick,\n        rowStyle,\n        size = 'small',\n        footerResource,\n        ...rest\n    } = props;\n\n    const {\n        basePath,\n        currentSort,\n        data,\n        ids,\n        loaded,\n        onSelect,\n        onToggleItem,\n        selectedIds,\n        setSort,\n        total,\n    } = useListContext(props);\n    const version = useVersion();\n\n    const updateSort = useCallback(\n        event => {\n            event.stopPropagation();\n            const newField = event.currentTarget.dataset.field;\n            const newOrder =\n                currentSort.field === newField\n                    ? currentSort.order === 'ASC'\n                        ? 'DESC'\n                        : 'ASC'\n                    : event.currentTarget.dataset.order;\n\n            setSort(newField, newOrder);\n        },\n        [currentSort.field, currentSort.order, setSort]\n    );\n\n    const handleSelectAll = useCallback(\n        event => {\n            if (event.target.checked) {\n                const all = ids.concat(\n                    selectedIds.filter(id => !ids.includes(id))\n                );\n                onSelect(\n                    isRowSelectable\n                        ? all.filter(id => isRowSelectable(data[id]))\n                        : all\n                );\n            } else {\n                onSelect([]);\n            }\n        },\n        [data, ids, onSelect, isRowSelectable, selectedIds]\n    );\n\n    const dataProvider=useDataProvider();\n    const [footerData, setFooterData]=useState(), [footerLoaded, setFooterLoaded]=useState(false);\n    useEffect(()=>{\n        if (footerResource) {\n            dataProvider.getOne(footerResource, props.filterValues).then(({data})=>{\n                setFooterData(data);\n                setFooterLoaded(true);\n            }).catch(err=>{\n                setFooterData([]);\n                setFooterLoaded(true);\n            })\n        } else setFooterLoaded(true);\n    }, [props.filterValues]);\n    /**\n     * if loaded is false, the list displays for the first time, and the dataProvider hasn't answered yet\n     * if loaded is true, the data for the list has at least been returned once by the dataProvider\n     * if loaded is undefined, the Datagrid parent doesn't track loading state (e.g. ReferenceArrayField)\n     */\n    if (loaded === false || footerLoaded === false) {\n        return (\n            <DatagridLoading\n                classes={classes}\n                className={className}\n                expand={expand}\n                hasBulkActions={hasBulkActions}\n                nbChildren={React.Children.count(children)}\n                size={size}\n            />\n        );\n    }\n\n    /**\n     * Once loaded, the data for the list may be empty. Instead of\n     * displaying the table header with zero data rows,\n     * the datagrid displays nothing in this case.\n     */\n    // if (loaded && (ids.length === 0 || total === 0)) {\n    //     return null;\n    // }\n\n    const all = isRowSelectable\n        ? ids.filter(id => isRowSelectable(data[id]))\n        : ids;\n\n    const shown = (()=>{\n        if (ids[0]==null) return children;\n        var sample=data[ids[0]];\n        for (var i=1; i<ids.length; i++) sample={...sample, ...data[ids[i]]};\n        return Children.toArray(children).filter(field=>(field.props.alwaysOn || sample.hasOwnProperty(field.props.source)));\n    })();\n\n    /**\n     * After the initial load, if the data for the list isn't empty,\n     * and even if the data is refreshing (e.g. after a filter change),\n     * the datagrid displays the current data.\n     */\n    return (\n        <Table\n            ref={ref}\n            className={classnames(classes.table, className)}\n            size={size}\n            {...sanitizeListRestProps(rest)}\n        >\n            <TableHead className={classes.thead}>\n                <TableRow\n                    className={classnames(classes.row, classes.headerRow)}\n                >\n                    {expand && (\n                        <TableCell\n                            padding=\"none\"\n                            className={classnames(\n                                classes.headerCell,\n                                classes.expandHeader\n                            )}\n                        />\n                    )}\n                    {hasBulkActions && (\n                        <TableCell\n                            padding=\"checkbox\"\n                            className={classes.headerCell}\n                        >\n                            <Checkbox\n                                className=\"select-all\"\n                                color=\"primary\"\n                                checked={\n                                    selectedIds.length > 0 &&\n                                    all.length > 0 &&\n                                    all.every(id => selectedIds.includes(id))\n                                }\n                                onChange={handleSelectAll}\n                            />\n                        </TableCell>\n                    )}\n                    {shown.map((field, index) =>\n                        isValidElement(field) ? (\n                            <DatagridHeaderCell\n                                className={classes.headerCell}\n                                currentSort={currentSort}\n                                field={field}\n                                isSorting={\n                                    currentSort.field ===\n                                    ((field.props).sortBy ||\n                                        (field.props).source)\n                                }\n                                key={(field.props).source || index}\n                                resource={resource}\n                                updateSort={updateSort}\n                            />\n                        ) : null\n                    )}\n                </TableRow>\n            </TableHead>\n            {cloneElement(\n                body,\n                {\n                    basePath,\n                    className: classes.tbody,\n                    classes,\n                    expand,\n                    rowClick,\n                    data,\n                    hasBulkActions,\n                    hover,\n                    ids,\n                    onToggleItem,\n                    resource,\n                    rowStyle,\n                    selectedIds,\n                    isRowSelectable,\n                    version,\n                },\n                shown\n            )}\n            {footerResource?\n                (\n                <TableFooter>\n                    <TableRow key=\"__footer\">\n                        {React.Children.map(shown, field => (\n                            <TableCell key={`footer-${props.id}-${field.props.source}`}>\n                                {(()=>{\n                                    if (!footerData) return null;\n                                    if (field.props.footerText) return field.props.footerText;\n                                    if (field.props.footerSource) return footerData[field.props.footerSource];\n                                    if (field.props.footerRender) return field.props.footerRender(footerData);\n                                    return null\n                                })()}\n                            </TableCell>\n                        ))}\n                    </TableRow>\n                </TableFooter>\n                )\n                :null\n            }\n        </Table>\n    );\n});\n\n// Datagrid.propTypes = {\n//     basePath: PropTypes.string,\n//     body: PropTypes.element,\n//     children: PropTypes.node.isRequired,\n//     classes: PropTypes.object,\n//     className: PropTypes.string,\n//     currentSort: PropTypes.shape({\n//         field: PropTypes.string,\n//         order: PropTypes.string,\n//     }),\n//     data: PropTypes.object,\n//     // @ts-ignore\n//     expand: PropTypes.oneOfType([PropTypes.element, PropTypes.elementType]),\n//     hasBulkActions: PropTypes.bool,\n//     hover: PropTypes.bool,\n//     ids: PropTypes.arrayOf(PropTypes.any),\n//     loading: PropTypes.bool,\n//     onSelect: PropTypes.func,\n//     onToggleItem: PropTypes.func,\n//     resource: PropTypes.string,\n//     rowClick: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n//     rowStyle: PropTypes.func,\n//     selectedIds: PropTypes.arrayOf(PropTypes.any),\n//     setSort: PropTypes.func,\n//     total: PropTypes.number,\n//     version: PropTypes.number,\n//     isRowSelectable: PropTypes.func,\n// };\n\n// type RowClickFunction = (\n//     id: Identifier,\n//     basePath: string,\n//     record: Record\n// ) => string;\n\n// export interface DatagridProps extends Omit<TableProps, 'size' | 'classes'> {\n//     body?: ReactElement;\n//     classes?: ClassesOverride<typeof useDatagridStyles>;\n//     className?: string;\n//     expand?:\n//         | ReactElement\n//         | FC<{\n//               basePath: string;\n//               id: Identifier;\n//               record: Record;\n//               resource: string;\n//           }>;\n//     hasBulkActions?: boolean;\n//     hover?: boolean;\n//     isRowSelectable?: (record: Record) => boolean;\n//     optimized?: boolean;\n//     rowClick?: string | RowClickFunction;\n//     rowStyle?: (record: Record, index: number) => any;\n//     size?: 'medium' | 'small';\n// }\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport get from 'lodash/get';\nimport Chip from '@material-ui/core/Chip';\nimport { withStyles } from '@material-ui/core/styles';\nimport classnames from 'classnames';\nimport {sanitizeFieldRestProps} from 'react-admin';\n\nconst styles = {\n    chip: { margin: 4 },\n};\n\nexport const ChipField = ({\n    className,\n    classes = {},\n    source,\n    record,\n    ...rest\n}) => {\n    return (\n        <Chip\n            className={classnames(classes.chip, className)}\n            label={source !== null && source !== undefined ? get(record, source) : record}\n            {...sanitizeFieldRestProps(rest)}\n        />\n    );\n};\n\nChipField.propTypes = {\n    className: PropTypes.string,\n    classes: PropTypes.object,\n    elStyle: PropTypes.object,\n    sortBy: PropTypes.string,\n    source: PropTypes.string,\n    record: PropTypes.object,\n};\n\n","import * as React  from 'react';\nimport {\n    Children,\n    cloneElement,\n    isValidElement,\n    useRef,\n    ReactElement,\n    useState,\n    useEffect\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\nimport get from 'lodash/get';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CloseIcon from '@material-ui/icons/RemoveCircleOutline';\nimport AddIcon from '@material-ui/icons/AddCircleOutline';\nimport { useTranslate, ValidationError, Record } from 'ra-core';\nimport classNames from 'classnames';\nimport { FieldArrayRenderProps } from 'react-final-form-arrays';\n\nimport {FormInput} from 'react-admin';\n\nconst useStyles = makeStyles(\n    theme => ({\n        root: {\n            padding: 0,\n            marginBottom: 0,\n            '& > li:last-child': {\n                borderBottom: 'none',\n            },\n        },\n        line: {\n            display: 'flex',\n            listStyleType: 'none',\n            borderBottom: `solid 1px ${theme.palette.divider}`,\n            [theme.breakpoints.down('xs')]: { display: 'block' },\n            '&.fade-enter': {\n                opacity: 0.01,\n                transform: 'translateX(100vw)',\n            },\n            '&.fade-enter-active': {\n                opacity: 1,\n                transform: 'translateX(0)',\n                transition: 'all 500ms ease-in',\n            },\n            '&.fade-exit': {\n                opacity: 1,\n                transform: 'translateX(0)',\n            },\n            '&.fade-exit-active': {\n                opacity: 0.01,\n                transform: 'translateX(100vw)',\n                transition: 'all 500ms ease-in',\n            },\n        },\n        index: {\n            minWidth: '6em',\n            paddingTop: '1em',\n            // [theme.breakpoints.down('sm')]: { display: 'none' },\n        },\n        form: { flex: 2 },\n        action: {\n            paddingTop: '0.5em',\n        },\n        leftIcon: {\n            marginRight: theme.spacing(1),\n        },\n    }),\n    { name: 'RaObjectFormIterator' }\n);\n\nconst DefaultAddButton = props => {\n    const classes = useStyles(props);\n    const translate = useTranslate();\n    return (\n        <Button size=\"small\" {...props}>\n            <AddIcon className={classes.leftIcon} />\n            {translate('ra.action.add')}\n        </Button>\n    );\n};\n\nconst DefaultRemoveButton = props => {\n    const classes = useStyles(props);\n    const translate = useTranslate();\n    return (\n        <Button size=\"small\" {...props}>\n            <CloseIcon className={classes.leftIcon} />\n            {/* {translate('ra.action.remove')} */}\n        </Button>\n    );\n};\n\nexport const ObjectFormIterator = props => {\n    const {\n        addButton = <DefaultAddButton />,\n        removeButton = <DefaultRemoveButton />,\n        basePath,\n        children,\n        className,\n        fields,\n        // meta: { error, submitFailed },\n        record,\n        resource,\n        source,\n        disabled,\n        disableAdd,\n        disableRemove,\n        variant,\n        margin,\n        TransitionProps,\n        defaultValue,\n    } = props;\n    const classes = useStyles(props);\n    const nodeRef = useRef(null);\n\n    // We need a unique id for each field for a proper enter/exit animation\n    // so we keep an internal map between the field position and an auto-increment id\n    const listFields=useRef(fields);\n\n    const removeField = key => () => {\n        listFields.current[key]=undefined;\n    };\n\n    // Returns a boolean to indicate whether to disable the remove button for certain fields.\n    // If disableRemove is a function, then call the function with the current record to\n    // determining if the button should be disabled. Otherwise, use a boolean property that\n    // enables or disables the button for all of the fields.\n    const disableRemoveField = (record, disableRemove) => {\n        if (typeof disableRemove === 'boolean') {\n            return disableRemove;\n        }\n        return disableRemove && disableRemove(record);\n    };\n\n    const addField = (key) => {\n        listFields.current[key]={};\n    };\n\n    // add field and call the onClick event of the button passed as addButton prop\n    const handleAddButtonClick = originalOnClickHandler => event => {\n        // show a Dialog to \n        var key=window.prompt('Set payment name');\n        if (!key) return;\n        addField(key);\n        if (originalOnClickHandler) {\n            originalOnClickHandler(event);\n        }\n    };\n\n    // remove field and call the onClick event of the button passed as removeButton prop\n    const handleRemoveButtonClick = (\n        originalOnClickHandler,\n        index\n    ) => event => {\n        removeField(index)();\n        if (originalOnClickHandler) {\n            originalOnClickHandler(event);\n        }\n    };\n\n    const records = get(record, source);\n\n    return listFields ? (\n        <ul className={classNames(classes.root, className)}>\n            <TransitionGroup component={null}>\n                {(()=>{\n                    var ret=[];\n                    for (var index in listFields.current) {\n                    // fields.map((member, index) => (\n                        var member=listFields.current[index];\n                        if (!member) continue;\n                        ret.push(\n                        <CSSTransition\n                            nodeRef={nodeRef}\n                            key={`${source}-${index}`}\n                            timeout={500}\n                            classNames=\"fade\"\n                            {...TransitionProps}\n                        >\n                            <li className={classes.line}>\n                                <Typography\n                                    variant=\"caption\"\n                                    className={classes.index}\n                                    display=\"block\"\n                                    component=\"div\"\n                                >\n                                    {index}\n                                </Typography>\n                                <section className={classes.form}>\n                                    {Children.map(\n                                        children,\n                                        (input: ReactElement, index2) => {\n                                            if (!isValidElement(input)) {\n                                                return null;\n                                            }\n                                            const {\n                                                source:inputSource,\n                                                ...inputProps\n                                            } = input.props;\n                                            return (\n                                                <FormInput\n                                                    basePath={\n                                                        input.props.basePath ||\n                                                        basePath\n                                                    }\n                                                    input={cloneElement(input, {\n                                                        source: inputSource\n                                                            ? `${source}.${index}.${inputSource}`\n                                                            : index,\n                                                        index: inputSource\n                                                            ? undefined\n                                                            : index2,\n                                                        label:\n                                                            typeof input.props\n                                                                .label ===\n                                                            'undefined'\n                                                                ? inputSource\n                                                                    ? `resources.${resource}.fields.${inputSource}`\n                                                                    : undefined\n                                                                : input.props.label,\n                                                        disabled,\n                                                        defaultValue:get(defaultValue, [index, inputSource], null),\n                                                        ...inputProps,\n                                                    })}\n                                                    record={\n                                                        (records &&\n                                                            records[index]) ||\n                                                        {}\n                                                    }\n                                                    resource={resource}\n                                                    variant={variant}\n                                                    margin={margin}\n                                                />\n                                            );\n                                        }\n                                    )}\n                                </section>\n                                {/* {!disabled &&\n                                    !disableRemoveField(\n                                        (records && records[index]) || {},\n                                        disableRemove\n                                    ) && (\n                                        <span className={classes.action}>\n                                            {cloneElement(removeButton, {\n                                                onClick: handleRemoveButtonClick(\n                                                    removeButton.props.onClick,\n                                                    index\n                                                ),\n                                                className: classNames(\n                                                    'button-remove',\n                                                    `button-remove-${source}-${index}`\n                                                ),\n                                            })}\n                                        </span>\n                                    )} */}\n                            </li>\n                        </CSSTransition>\n                        )\n                    }\n                    return ret;})()\n                }\n            </TransitionGroup>\n            {/* {!disabled && !disableAdd && (\n                <li className={classes.line}>\n                    <span className={classes.action}>\n                        {cloneElement(addButton, {\n                            onClick: handleAddButtonClick(\n                                addButton.props.onClick\n                            ),\n                            className: classNames(\n                                'button-add',\n                                `button-add-${source}`\n                            ),\n                        })}\n                    </span>\n                </li>\n            )} */}\n        </ul>\n    ) : null;\n};\n","import * as React  from 'react';\nimport {\n    useState,\n    useEffect\n} from 'react';\nimport get from 'lodash/get';\nimport {Typography, Button, Card, FormHelperText, makeStyles, Table, TableCell, TableHead, TableBody, TableFooter, TableRow} from '@material-ui/core';\nimport Alert from '@material-ui/lab/Alert';\nimport SaveIcon from '@material-ui/icons/Save';\nimport { useTranslate, ValidationError, Record } from 'ra-core';\nimport classnames from 'classnames';\n\nimport {FormInput, useDatagridStyles, useNotify, Loading, Error, useDataProvider, Toolbar, Title, SimpleForm, SelectInput, useLogout} from 'react-admin';\nimport {useFormState} from 'react-final-form'\n\nimport {DateTimeField} from './extends'\n\nimport {fetchApi} from './data-provider'\n\nconst useStyles = makeStyles(\n    theme => ({\n        root: {\n            padding: 0,\n            marginBottom: 0,\n            '& > li:last-child': {\n                borderBottom: 'none',\n            },\n        },\n        line: {\n            display: 'flex',\n            listStyleType: 'none',\n            borderBottom: `solid 1px ${theme.palette.divider}`,\n            [theme.breakpoints.down('xs')]: { display: 'block' },\n            '&.fade-enter': {\n                opacity: 0.01,\n                transform: 'translateX(100vw)',\n            },\n            '&.fade-enter-active': {\n                opacity: 1,\n                transform: 'translateX(0)',\n                transition: 'all 500ms ease-in',\n            },\n            '&.fade-exit': {\n                opacity: 1,\n                transform: 'translateX(0)',\n            },\n            '&.fade-exit-active': {\n                opacity: 0.01,\n                transform: 'translateX(100vw)',\n                transition: 'all 500ms ease-in',\n            },\n        },\n        index: {\n            width: '3em',\n            paddingTop: '1em',\n            [theme.breakpoints.down('sm')]: { display: 'none' },\n        },\n        form: { flex: 2 },\n        action: {\n            paddingTop: '0.5em',\n        },\n        leftIcon: {\n            marginRight: theme.spacing(1),\n        },\n    }),\n    { name: 'RaArrayFormIterator' }\n);\n\nconst Save=({history, bills, users:userArray, provider, ...rest})=>{\n\tconst classes = useStyles()\n\tconst dp=useDataProvider(), notify=useNotify(), {values}=useFormState(), logout=useLogout();\n\tconst handleClick=()=>{\n\t\tvar users={};\n\t\tuserArray.forEach((u)=>{\n\t\t\tusers[u.id]=u;\n\t\t})\n\t\tvar ops=bills.map((bill)=>{\n\t\t\tvar {orderId:_id, money, time, paymentMethod, originData}=bill;\n\t\t\tvar userid=values['order'+_id];\n\t\t\tif (!userid) return notify('all the owner must be specified');\n\t\t\tif (userid==='system') return {_id, userid, paymentMethod, time};\n\t\t\telse {\n\t\t\t\tvar {share, paymentMethod:payment, name:merchantName}=users[userid];\n\t\t\t\treturn {_id, money, userid, merchantName, share, provider, payment, paymentMethod, currency:'IDR', time};\n\t\t\t}\n\t\t})\n\t\t\n\t\tfetchApi('/bills/add', {\n\t\t\tmethod:'POST',\n\t\t\tbody:JSON.stringify(ops)\n\t\t})\n\t\t.then(({headers, json})=>{\n\t\t\tvar {insertedCount}=json;\n\t\t\tnotify(`${insertedCount} records inserted`, 'success');\n\t\t\tsetTimeout(()=>{history.goBack()}, 800);\n\t\t}).catch(({message, status})=>{\n\t\t\tif (status === 401 || status === 403) {\n\t\t\t\treturn logout();\n\t\t\t}\n\t\t\tnotify(message, 'warning');\n\t\t})\n\t}\n\treturn <Toolbar>\n\t\t\t<Button\n\t\t\t\tvariant=\"contained\"\n\t\t\t\ttype=\"button\"\n\t\t\t\tcolor=\"primary\"\n\t\t\t\taria-label=\"Save\"\n\t\t\t\tonClick={handleClick}\n\t\t\t>\n\t\t\t\t<SaveIcon className={classes.leftIcon}/>Save\n\t\t\t</Button>\n\t\t</Toolbar>\n}\nconst RefillBills=(props)=>{\n\tconst {options, history, className}=props;\n\tconst classes = useDatagridStyles(props);\n\tconst {bills, provider}=history.location.state;\n\tconst dp=useDataProvider(), notify=useNotify();\n\tconst [users, setUsers]=useState();\n\tuseEffect(()=>{\n\t\tdp.getList('users', {filter:{acl:['agent', 'merchant']}})\n\t\t.then(({data})=>{\n\t\t\tsetUsers(data);\n\t\t})\n\t\t.catch((e)=>{\n\t\t\tnotify(e.message, 'error')\n\t\t})\n\t}, []);\n\n\tif (!bills) return <Error error=\"bills not found, you may enter this page by accident\"/>\n\tif (!users) return <Loading />\n\n\tvar merchants=[], agents=[];\n\tusers.forEach(({acl, name, id})=>{\n\t\tif (acl=='merchant') merchants.push({name, id});\n\t\telse if (acl=='agent') agents.push({name, id});\n\t})\n\tvar userList={\n\t\t'recharge':merchants,\n\t\t'disbursment':merchants.concat(agents),\n\t\t'withdrawal':[{id:'system', name:'system'}].concat(agents),\n\t\t'topup':[{id:'system', name:'system'}].concat(agents),\n\t}\n\n\treturn (<Card>\n\t<Title defaultTitle=\"Refill Bills\" />\n\t<Alert severity=\"error\">These orders are not exist in our system, please fill them first</Alert>\n\t<SimpleForm toolbar={<Save {...props} bills={bills} users={users} provider={provider}/>} submitOnEnter={false}>\n\t\t<Table className={classnames(classes.table, className)}>\n\t\t\t<TableHead className={classes.thead}>\n\t\t\t\t<TableRow\n\t\t\t\t\t\tclassName={classnames(classes.row, classes.headerRow)}\n\t\t\t\t>\n\t\t\t\t\t<TableCell className={classes.headerCell}>orderId</TableCell>\n\t\t\t\t\t<TableCell className={classes.headerCell}>money</TableCell>\n\t\t\t\t\t<TableCell className={classes.headerCell}>fee</TableCell>\n\t\t\t\t\t<TableCell className={classes.headerCell}>payment</TableCell>\n\t\t\t\t\t<TableCell className={classes.headerCell}>time</TableCell>\n\t\t\t\t\t<TableCell className={classes.headerCell}>owner</TableCell>\n\t\t\t\t\t<TableCell className={classes.headerCell}>outstandingOrder</TableCell>\n\t\t\t\t</TableRow>\n\t\t\t</TableHead>\n\t\t\t<TableBody className={classnames('datagrid-body', className)}>\n\t\t\t{bills.map((bill, index)=>(\n\t\t\t\t<TableRow className={classnames(classes.row, {\n\t\t\t\t\t\t\t\t\t\t[classes.rowEven]: index % 2 === 0,\n\t\t\t\t\t\t\t\t\t\t[classes.rowOdd]: index % 2 !== 0,\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t<TableCell className={classes.cell}>{bill.orderId}</TableCell>\n\t\t\t\t\t<TableCell className={classes.cell}>{bill.money}</TableCell>\n\t\t\t\t\t<TableCell className={classes.cell}>{bill.fee||0}</TableCell>\n\t\t\t\t\t<TableCell className={classes.cell}>{bill.paymentMethod}</TableCell>\n\t\t\t\t\t<TableCell className={classes.cell}><DateTimeField record={bill.time} /></TableCell>\n\t\t\t\t\t<TableCell className={classes.cell}><SelectInput choices={userList[bill.paymentMethod]||userList.recharge} source={'order'+bill.orderId} label=\"owner\"/></TableCell>\n\t\t\t\t\t<TableCell className={classes.cell}>\n\t\t\t\t\t\t<Typography variant=\"body2\" color=\"textSecondary\">\n\t\t\t\t\t\t{JSON.stringify(bill.originData)}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</TableCell>\n\t\t\t\t</TableRow>\n\t\t\t))}\n\t\t\t</TableBody>\n\t\t</Table>\n\t</SimpleForm>\n\t</Card>)\n}\n\nexport default RefillBills;","import * as React from \"react\";\nimport { Route } from 'react-router-dom';\nimport RefillBills from './refillBills';\n\nexport default [\n    <Route exact path=\"/refill-bills\" component={RefillBills} />,\n];","import React, { useState, useEffect,useCallback, useResourceContext, cloneElement, Children, FC, ReactElement } from \"react\";\nimport { Drawer, Typography, makeStyles, FormControl, InputLabel, } from '@material-ui/core';\nimport InboxIcon from '@material-ui/icons/Inbox';\nimport { \n\tList, Datagrid, TextField, BooleanField, NumberField, EditButton, ShowButton,\n\tEdit, Create, TabbedForm, FormTab, TextInput, BooleanInput, SelectInput, ReferenceField, NumberInput,\n\tShow, SimpleShowLayout,\n\tLoading, Error,\n\tuseDataProvider, useGetMany,useListContext, useTranslate, useRefresh,\n\tTopToolbar, CreateButton, SaveButton, Toolbar,\n\tFormDataConsumer,\n\tLabeled, LinearProgress, FieldTitle, isRequired, \n} from 'react-admin';\nimport { useForm } from 'react-final-form';\nimport {DateTimeField, EscapedTextField, ObjectFormIterator} from './extends';\nimport { Route } from 'react-router';\nimport classnames from 'classnames';\nimport md5 from 'md5';\nimport get from 'lodash/get'\n\nconst path=require('path');\nconst objPath =require('object-path');\n\nconst SaveWithNoteButton = ({ handleSubmitWithRedirect, acl, ...props }) => {\n\t\tconst { redirect } = props;\n\t\tconst form = useForm();\n\t\tconst handleClick = useCallback(() => {\n\t\t\tvar formdata = form.getState().values;\n\t\t\tif (formdata.pwd) {\n\t\t\t\tconst salt= Math.random().toString(36).substring(7);\n\t\t\t\tform.change('salt', salt);\n\t\t\t\tform.change('password', md5(salt+formdata.pwd));\n\t\t\t\tform.change('pwd', undefined);\n\t\t\t}\n\n\t\t\t// form.change('share', Number((1-Number(formdata.share)/100).toFixed(4)))\n\t\t\t// var mdr=parseFloat(formdata.mdr);\n\t\t\t// if (mdr>=1) mdr=Number((mdr/100).toFixed(4));\n\t\t\t// form.change('mdr', mdr)\n\n\t\t\tif (formdata.paymentMethod) {\n\t\t\t\tfor (var key in formdata.paymentMethod) {\n\t\t\t\t\tvar payment=formdata.paymentMethod[key];\n\t\t\t\t\tvar mdr=parseFloat(payment.mdr);\n\t\t\t\t\tif (mdr>=1) mdr=Number((mdr/100).toFixed(4));\n\t\t\t\t\tform.change(`paymentMethod.${key}.mdr`, mdr)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (acl) form.change('acl', acl)\n\n\t\t\tif (formdata.providers) {\n\t\t\t\tfor (const name in formdata.providers) {\n\t\t\t\t\tvar prd=formdata.providers[name];\n\t\t\t\t\tif (prd.enabled!=null) {\n\t\t\t\t\t\tform.change('providers.'+name+'.disabled', !prd.enabled);\n\t\t\t\t\t\tform.change('providers.'+name+'.enabled', undefined);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\thandleSubmitWithRedirect(redirect);\n\t\t}, [form]);\n\n\t\treturn <SaveButton {...props} handleSubmitWithRedirect={handleClick} />;\n};\nconst PostToolbar = props => {\n\tvar {redirect} =props;\n\treturn (<Toolbar {...props}>\n\t\t\t<SaveWithNoteButton\n\t\t\t\tlabel=\"Save\"\n\t\t\t\tredirect={redirect}\n\t\t\t\tsubmitOnEnter={false}\n\t\t\t\t{...props}\n\t\t\t/>\n\t\t</Toolbar>\n\t);\n}\n\nconst Providers=({contents, ...props}) => {\n\n\tconst form = useForm();\n\tvar formdata = form.getState().values;\n\tvar eles=[];\n\tcontents.providers && contents.providers.forEach((prd)=>{\n\t\tvar enable=!objPath.get(formdata, ['providers', prd.id, 'disabled'], false);\n\t\teles.push((\n\t\t\t<div key={prd.id}>\n\t\t\t<BooleanInput source={`providers.${prd.id}.disabled`} parse={v=>!v} format={v=>!v} label={`${prd.name}`}/>\n\t\t\t<FormDataConsumer>\n\t\t\t\t{\n\t\t\t\t\t({formData, ...rest})=>{\n\t\t\t\t\t\tif (enable) {\n\t\t\t\t\t\t\tvar eles=[];\n\t\t\t\t\t\t\tif (prd.options) {\n\t\t\t\t\t\t\t\tprd.options.forEach((opt)=>{\n\t\t\t\t\t\t\t\t\teles.push((\n\t\t\t\t\t\t\t\t\t\t<SelectInput source={`providers.${prd.id}.${opt.name}`} choices={opt.values.map(v=>({id:v,name:v}))} label={opt.name}/>\n\t\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (prd.params) {\n\t\t\t\t\t\t\t\tprd.params.forEach((p)=>{\n\t\t\t\t\t\t\t\t\teles.push((\n\t\t\t\t\t\t\t\t\t\t<TextInput source={`providers.${prd.id}.${p}`} label={p}/>\n\t\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn eles;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t</FormDataConsumer>\n\t\t\t</div>\n\t\t))\n\t});\n\treturn eles\n}\n\nfunction parseMDR(v) {\n\tv=Number(v);\n\tvar ret=(v>=1)?v:v*100;\n\treturn ret;\n}\n\nconst defaultShare={\n\tcreditCard:{\n\t\tmdr:0.03, fix_fee:5000\n\t},\n\teWallet:{\n\t\tmdr:0.028, fix_fee:0\n\t},\n\tva:{\n\t\tmdr:0, fix_fee:7500\n\t},\n\tretailOutlets:{\n\t\tmdr:0, fix_fee:8500\n\t},\n\tdisbursement:{\n\t\tmdr:0, fix_fee:7500\n\t}\n}\nconst ShareSection =({\n\tbasePath,\n    className,\n    defaultValue,\n    label,\n    loaded,\n    loading,\n    children,\n    record,\n    resource,\n    source,\n    validate,\n    variant,\n    disabled,\n    margin = 'dense',\n    ...rest\n}) => {\n\tif (loading) {\n        return (\n            <Labeled\n                label={label}\n                source={source}\n                resource={resource}\n                className={className}\n            >\n                <LinearProgress />\n            </Labeled>\n        );\n    }\n\n\treturn (\n        <FormControl\n            fullWidth\n            margin=\"normal\"\n            className={className}\n            {...rest}\n        >\n            <InputLabel htmlFor={source} shrink>\n                <FieldTitle\n                    label={label}\n                    source={source}\n                    resource={resource}\n                    isRequired={isRequired(validate)}\n                />\n            </InputLabel>\n            {cloneElement(Children.only(children), {\n                fields: {...defaultValue, ...get(record, source)},\n\t\t\t\tbasePath:`${basePath}/${source}`,\n                record,\n                resource,\n                source,\n                variant,\n                margin,\n                disabled,\n\t\t\t\tdefaultValue\n            })}\n        </FormControl>\n    );\n}\n\nfunction CreateAndEditView(method, props) {\n\tconst classes=useStyles(props);\n\tconst {className}=props;\n\tconst dp=useDataProvider();\n\tconst [agents, setAgents] = useState();\n\tconst [providers, setProviders] =useState();\n\tconst [loading, setLoading] = useState(true);\n\tconst [error, setError] = useState();\n\n\tuseEffect(()=>{\n\t\tdp.getList('users', {filter:{acl:'agent'}})\n\t\t.then(({data})=>{\n\t\t\tsetAgents(data);\n\t\t\tsetLoading(false);\n\t\t})\n\t\t.catch(e=>{\n\t\t\tsetError(e);\n\t\t\tsetLoading(false);\n\t\t});\n\n\t\tdp.getList('providers')\n\t\t.then(({data})=>{\n\t\t\tsetProviders(data);\n\t\t}).catch(e=>{\n\t\t\tsetError(e);\n\t\t})\n\t}, [])\n\tif (loading) return <Loading />\n\tif (error) return <Error />\n\t\n\tif (loading) return <Loading />\n\n\tconst LoginName=(props)=>{\n\t\tif (method==='Create') return <TextInput {...props}/>\n\t\telse return null;\n\t}\n\n\tvar toolbar;\n\tif (method==='Create') toolbar=<PostToolbar acl=\"merchant\"/>\n\telse toolbar=<PostToolbar />\n\treturn (<TabbedForm toolbar={toolbar}>\n\t\t\t<FormTab label=\"General\">\n\t\t\t\t<TextInput source=\"name\" label=\"显示名\"/>\n\t\t\t\t<LoginName source=\"id\" label=\"登录名\"/>\n\t\t\t\t<TextInput source=\"pwd\" label=\"密码\" type=\"password\"/>\n\t\t\t\t<input name=\"acl\" hidden value=\"merchant\"></input>\n\t\t\t\t<BooleanInput source=\"debugMode\" />\n\t\t\t\t<ShareSection source=\"paymentMethod\" label=\"Share by payment\" defaultValue={defaultShare} >\n\t\t\t\t\t<ObjectFormIterator>\n\t\t\t\t\t\t<TextInput source=\"mdr\" variant=\"standard\" label=\"mdr\"/>\n\t\t\t\t\t\t<TextInput className={classnames(classes.fixFee, className)} source=\"fix_fee\" variant=\"standard\" label=\"fixed fee\"/>\n\t\t\t\t\t</ObjectFormIterator>\n\t\t\t\t</ShareSection>\n\t\t\t\t{/* <TextInput source=\"mdr\" defaultValue={\"3.8%\"}/>\n\t\t\t\t<NumberInput source=\"fix_fee\" defaultValue={0} options={{ minimumFractionDigits: 2, maximumFractionDigits: 2}}/> */}\n\t\t\t\t<SelectInput source=\"parent\" choices={[{id:null, name:'none'}].concat(agents)} label=\"agent\"/>\n\t\t\t</FormTab>\n\t\t\t<FormTab label=\"Providers\">\n\t\t\t\t<Providers contents={{providers}} />\n\t\t\t</FormTab>\n\t\t</TabbedForm>)\n}\n\nconst UserListActions = ({ basePath }) => (\n  <TopToolbar>\n      <CreateButton basePath={basePath} />\n   </TopToolbar>\n);\n\nexport const UserCreator =props => (<Create {...props} >{CreateAndEditView('Create', {...props, redirect:'list', acl:'merchant', initialValues:{debugMode:true}})}</Create>)\n\nexport const UserEdit = props => (<Edit {...props}>{CreateAndEditView('Edit', {...props, redirect:'list'})}</Edit>)\n\nexport const UserShow =props=> (\n\t<Show {...props}>\n\t\t<SimpleShowLayout>\n\t\t\t<TextField source=\"name\" label=\"显示名\"/>\n\t\t\t<TextField source=\"key\" />\n\t\t\t<TextField label=\"partnerId\" source=\"merchantid\" />\n\t\t\t<NumberField label=\"账户余额\" source=\"balance\" options={{ minimumFractionDigits: 2, maximumFractionDigits: 2}} />\n\t\t\t<NumberField label=\"手续费\" source=\"commission\" options={{ minimumFractionDigits: 2, maximumFractionDigits: 2}}/>\n\t\t</SimpleShowLayout>\n\t</Show>\n)\n\nconst drawerWidth=380;\n\nconst useStyles = makeStyles(\n    theme => ({\n        message: {\n            textAlign: 'center',\n            opacity: theme.palette.type === 'light' ? 0.5 : 0.8,\n            margin: '0 1em',\n            color:\n                theme.palette.type === 'light'\n                    ? 'inherit'\n                    : theme.palette.text.primary,\n        },\n        icon: {\n            width: '9em',\n            height: '9em',\n        },\n        toolbar: {\n            textAlign: 'center',\n            marginTop: '2em',\n        },\n\t\tdrawer: {\n\t\t\twidth: drawerWidth,\n\t\t\tflexShrink: 0,\n\t\t},\n\t\tdrawerPaper: {\n\t\t\twidth: drawerWidth,\n\t\t},\n\t\tfixFee :{\n\t\t\t'-webkit-appearance': 'none !important',\n\t\t\tmargin: 0\n\t\t}\n    }),\n    { name: 'RaEmpty' }\n);\n\nconst Empty = props => {\n    const { basePath } = useListContext(props);\n    const classes = useStyles(props);\n    const translate = useTranslate();\n\n    return (\n        <>\n            <div className={classes.message}>\n                <InboxIcon className={classes.icon} />\n                <Typography variant=\"h4\" paragraph>\n                    {translate(`No partners yet`)}\n                </Typography>\n\t\t\t\t<Typography variant=\"body1\">\n\t\t\t\t\t{translate(``)}\n\t\t\t\t</Typography>\n            </div>\n\t\t\t<div className={classes.toolbar}>\n\t\t\t\t<CreateButton variant=\"contained\" basePath={basePath} />\n\t\t\t</div>\n        </>\n    );\n};\n\nconst UserList =(props) => {\n\tconst classes = useStyles(props);\n\tconst handleClose = () => {\n        props.history.push('/users');\n    }\n\t\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<List {...props} filter={{ acl:'merchant' }} exporter={false} title=\"商户\" actions={<UserListActions />} empty={<Empty />}>\n\t\t\t\t<Datagrid rowClick=\"show\">\n\t\t\t\t\t<TextField source=\"name\" label=\"显示名\"/>\n\t\t\t\t\t<EscapedTextField source=\"id\" label=\"登录名\"/>\n\t\t\t\t\t<DateTimeField source=\"createTime\" label=\"创建时间\"/>\n\t\t\t\t\t{/* <TextField source=\"key\" />\n\t\t\t\t\t<TextField source=\"merchantid\" /> */}\n\t\t\t\t\t<BooleanField source=\"debugMode\" label=\"调试\"/>\n\t\t\t\t\t<NumberField source=\"share\" label=\"分成\" options={{style:\"percent\"}}/>\n\t\t\t\t\t<NumberField label=\"账户余额\" source=\"balance\" options={{ minimumFractionDigits: 2, maximumFractionDigits: 2}}/>\n\t\t\t\t\t<NumberField label=\"手续费\" source=\"commission\" options={{ minimumFractionDigits: 2, maximumFractionDigits: 2}}/>\n\t\t\t\t\t<EditButton />\n\t\t\t\t\t<ShowButton />\n\t\t\t\t</Datagrid>\n\t\t\t</List>\n\t\t\t<Route path=\"/users/create\">\n\t\t\t\t{({ match }) => (\n\t\t\t\t\t<Drawer\n\t\t\t\t\t\tclassName={classes.drawer}\n\t\t\t\t\t\topen={!!match}\n\t\t\t\t\t\tanchor=\"right\"\n\t\t\t\t\t\tonClose={handleClose}\n\t\t\t\t\t\tclasses={{\n\t\t\t\t\t\t\tpaper: classes.drawerPaper,\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<UserCreator\n\t\t\t\t\t\t\t// className={classes.drawerContent}\n\t\t\t\t\t\t\tonCancel={handleClose}\n\t\t\t\t\t\t\t{...props}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Drawer>\n\t\t\t\t)}\n\t\t\t</Route>\n\t\t\t<Route path=\"/users/:id/show\">\n\t\t\t\t{({match}) => {\n\t\t\t\t\tconst id=match && match.params && match.params.id, isMatch=id&&id!=='create';\n\t\t\t\t\tif (!isMatch) return null;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Drawer open={isMatch} anchor=\"right\" onClose={handleClose}>\n\t\t\t\t\t\t\t{isMatch? <UserShow id={decodeURIComponent(id)} {...props}/>:null}\n\t\t\t\t\t\t</Drawer>\n\t\t\t\t\t)\n\t\t\t\t}}\n\t\t\t</Route>\n\n\t\t\t<Route path=\"/users/:id\">\n\t\t\t\t{({ match , location}) => {\n\t\t\t\t\tconst isMatch =\tmatch  && match.params && match.params.id !== 'create';\n\t\t\t\t\tif (!isMatch) return null;\n\t\t\t\t\tif (!match.isExact && path.basename(location.pathname)!=='1') return null;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Drawer\n\t\t\t\t\t\t\topen={isMatch}\n\t\t\t\t\t\t\tanchor=\"right\"\n\t\t\t\t\t\t\tonClose={handleClose}\n\t\t\t\t\t\t\tclassName={classes.drawer}\n\t\t\t\t\t\t\tclasses={{\n\t\t\t\t\t\t\t\tpaper: classes.drawerPaper,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{isMatch ? (\n\t\t\t\t\t\t\t\t<UserEdit\n\t\t\t\t\t\t\t\t\t// className={classes.drawerContent}\n\t\t\t\t\t\t\t\t\tid={isMatch ? decodeURIComponent(match.params.id) : null}\n\t\t\t\t\t\t\t\t\tonCancel={handleClose}\n\t\t\t\t\t\t\t\t\t{...props}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) : \n\t\t\t\t\t\t\tnull\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</Drawer>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t</Route>\n\t\t</React.Fragment>\n\t)\n}\n\nexport default {\n\tlist:UserList,\n\t// edit:UserEdit,\n\t// show:UserShow,\n\t// create:UserCreator\n}","import React, { useCallback } from \"react\";\nimport { \n\tEdit, Create, SimpleForm, TextInput, \n\tSaveButton, Toolbar,\n} from 'react-admin';\nimport { useForm } from 'react-final-form';\nimport md5 from 'md5';\n\nconst SaveWithNoteButton = ({ handleSubmitWithRedirect, acl, ...props }) => {\n\t\tconst { redirect } = props;\n\t\tconst form = useForm();\n\t\tconst handleClick = useCallback(() => {\n\t\t\tvar formdata = form.getState().values;\n\t\t\tif (formdata.pwd) {\n\t\t\t\tconst salt= Math.random().toString(36).substring(7);\n\t\t\t\tform.change('salt', salt);\n\t\t\t\tform.change('password', md5(salt+formdata.pwd));\n\t\t\t\tform.change('pwd', undefined);\n\t\t\t}\n\n\t\t\tif (acl) form.change('acl', acl)\n\n\t\t\thandleSubmitWithRedirect(redirect);\n\t\t}, [form]);\n\n\t\treturn <SaveButton {...props} handleSubmitWithRedirect={handleClick} />;\n};\nconst PostToolbar = props => {\n\tvar {redirect} =props;\n\treturn (<Toolbar {...props}>\n\t\t\t<SaveWithNoteButton\n\t\t\t\t\tlabel=\"Save\"\n\t\t\t\t\tredirect={redirect}\n\t\t\t\t\tsubmitOnEnter={false}\n\t\t\t\t\t{...props}\n\t\t\t/>\n\t\t</Toolbar>\n\t);\n}\n\nfunction CreateAndEditView(method, props) {\n\treturn (<SimpleForm toolbar={<PostToolbar />}>\n\t\t\t<TextInput source=\"name\" label=\"显示名\"/>\n\t\t\t{method==='Create'?<TextInput source=\"id\" label=\"登录名\"/>:null}\n\t\t\t<TextInput source=\"pwd\" label=\"密码\" type=\"password\"/>\n\t\t</SimpleForm>)\n}\n\nexport const ManagerCreator =props => (<Create {...props}>{CreateAndEditView('Create', {...props, redirect:'list', acl:'manager', initialValues:{debugMode:true}})}</Create>)\n\nexport const ManagerEdit = props => (<Edit {...props}>{CreateAndEditView('Edit', {...props, redirect:'list'})}</Edit>)\n\n","import React, {Fragment } from \"react\";\nimport { Route } from 'react-router';\nimport { Drawer } from '@material-ui/core';\nimport { \n\tList, Datagrid, TextField, EditButton,\n    TopToolbar, CreateButton,\n} from 'react-admin';\nimport {DateTimeField} from '../extends/fields';\nimport {ManagerCreator, ManagerEdit} from \"./create\"\n\nconst ListActions = ({ basePath }) => (\n    <TopToolbar>\n        <CreateButton basePath={basePath} />\n    </TopToolbar>\n);\n\nclass ManagerList extends React.Component {\n    render() {\n        const { push, classes, ...props } = this.props;\n        return (\n            <Fragment>\n\t\t\t\t<List {...props} filter={{ acl:['admin', 'manager'] }} exporter={false} title=\"管理员\" actions={<ListActions />}>\n\t\t\t\t\t<Datagrid>\n\t\t\t\t\t\t<TextField source=\"name\" label=\"显示名\"/>\n\t\t\t\t\t\t<TextField source=\"id\" label=\"登录名\"/>\n\t\t\t\t\t\t<DateTimeField source=\"createTime\" label=\"创建时间\"/>\n\t\t\t\t\t\t<EditButton />\n\t\t\t\t\t</Datagrid>\n\t\t\t\t</List>\n                <Route path=\"/managers/create\">\n                    {({ match }) => (\n                        <Drawer\n                            open={!!match}\n                            anchor=\"right\"\n                            onClose={this.handleClose}\n                        >\n                            <ManagerCreator\n                                // className={classes.drawerContent}\n                                onCancel={this.handleClose}\n                                {...props}\n                            />\n                        </Drawer>\n                    )}\n                </Route>\n                <Route path=\"/managers/:id\">\n                    {({ match }) => {\n                        const isMatch =\n                            match &&\n                            match.params &&\n                            match.params.id !== 'create';\n\n                        return (\n                            <Drawer\n                                open={isMatch}\n                                anchor=\"right\"\n                                onClose={this.handleClose}\n                            >\n                                {isMatch ? (\n                                    <ManagerEdit\n                                        // className={classes.drawerContent}\n                                        id={isMatch ? decodeURIComponent(match.params.id) : null}\n                                        onCancel={this.handleClose}\n                                        {...props}\n                                    />\n                                ) : \n                                null\n                                }\n                            </Drawer>\n                        );\n                    }}\n                </Route>\n            </Fragment>\n        );\n    }\n\n    handleClose = () => {\n        this.props.history.goBack();\n    };\n}\n\n\nexport default {\n\tlist:ManagerList,\n}","import React, { useState, useEffect,useCallback } from \"react\";\nimport { \n\tList, Datagrid, TextField, NumberField, EditButton,\n\tEdit, Create, SimpleForm, TextInput, SelectInput,\n\tLoading, Error,\n\tuseDataProvider,\n\tSaveButton, Toolbar,\n} from 'react-admin';\nimport { useForm } from 'react-final-form';\nimport {DateTimeField} from './extends/fields';\nimport md5 from 'md5';\n\nconst SaveWithNoteButton = ({ handleSubmitWithRedirect, acl, ...props }) => {\n\t\tconst { redirect } = props;\n\t\tconst form = useForm();\n\t\tconst handleClick = useCallback(() => {\n\t\t\tvar formdata = form.getState().values;\n\t\t\tif (formdata.pwd) {\n\t\t\t\tconst salt= Math.random().toString(36).substring(7);\n\t\t\t\tform.change('salt', salt);\n\t\t\t\tform.change('password', md5(salt+formdata.pwd));\n\t\t\t\tform.change('pwd', undefined);\n\t\t\t}\n\n\t\t\tform.change('share', Number((1-Number(formdata.share)/100).toFixed(4)))\n\n\t\t\tif (acl) form.change('acl', acl)\n\n\t\t\thandleSubmitWithRedirect(redirect);\n\t\t}, [form]);\n\n\t\treturn <SaveButton {...props} handleSubmitWithRedirect={handleClick} />;\n};\nconst PostToolbar = props => {\n\tvar {redirect} =props;\n\treturn (<Toolbar {...props}>\n\t\t\t<SaveWithNoteButton\n\t\t\t\t\tlabel=\"Save\"\n\t\t\t\t\tredirect={redirect}\n\t\t\t\t\tsubmitOnEnter={false}\n\t\t\t\t\t{...props}\n\t\t\t/>\n\t\t</Toolbar>\n\t);\n}\n\nfunction CreateAndEditView(method, props) {\n\tconst dp=useDataProvider();\n\tconst [agents, setAgents] = useState();\n\tconst [loading, setLoading] = useState(true);\n\tconst [error, setError] = useState();\n\n\tuseEffect(()=>{\n\t\tdp.getList('users', {filter:{acl:'agent'}})\n\t\t.then(({data})=>{\n\t\t\tsetAgents(data);\n\t\t\tsetLoading(false);\n\t\t})\n\t\t.catch(e=>{\n\t\t\tsetError(e);\n\t\t\tsetLoading(false);\n\t\t});\n\t}, [])\n\tif (loading) return <Loading />\n\tif (error) return <Error />\n\t\n\tif (loading) return <Loading />\n\n\tconst LoginName=(props)=>{\n\t\tif (method==='Create') return <TextInput {...props}/>\n\t\telse return null;\n\t}\n\n\treturn (<SimpleForm toolbar={<PostToolbar />}>\n\t\t\t<TextInput source=\"name\" label=\"显示名\"/>\n\t\t\t<LoginName source=\"id\" label=\"登录名\"/>\n\t\t\t<TextInput source=\"pwd\" label=\"密码\" type=\"password\"/>\n\t\t\t<TextInput source=\"share\" defaultValue={3}/>\n\t\t\t<SelectInput source=\"parent\" choices={agents}/>\n\t\t</SimpleForm>)\n}\n\nexport const AgentCreator =props => (<Create {...props}>{CreateAndEditView('Create', {...props, redirect:'list', acl:'agent', initialValues:{debugMode:true}})}</Create>)\n\nexport const AgentEdit = props => (<Edit {...props}>{CreateAndEditView('Edit', {...props, redirect:'list'})}</Edit>)\n\nexport const AgentList = props => {\n\treturn (\n\t\t<List {...props} filter={{ acl:'agent' }} exporter={false} title=\"代理\">\n\t\t\t<Datagrid>\n\t\t\t\t<TextField source=\"name\" label=\"显示名\"/>\n\t\t\t\t<TextField source=\"id\" label=\"登录名\"/>\n\t\t\t\t<DateTimeField source=\"createTime\" label=\"创建时间\"/>\n\t\t\t\t<NumberField source=\"share\" label=\"分成\" options={{style:\"percent\"}}/>\n\t\t\t\t<NumberField source=\"daily\" label=\"当日收入\" options={{ minimumFractionDigits: 2, maximumFractionDigits: 2}}/>\n\t\t\t\t<NumberField source=\"profit\" label=\"账户余额\" options={{ minimumFractionDigits: 2, maximumFractionDigits: 2}}/>\n\t\t\t\t<EditButton />\n\t\t\t</Datagrid>\n\t</List>);\n}\n\nexport default {\n\tlist:AgentList,\n\tcreate:AgentCreator,\n\tedit:AgentEdit,\n}","import * as React from \"react\";\nimport { Admin, Resource } from 'react-admin';\n// import TreeMenu from '@bb-tech/ra-treemenu';\nimport DataProvider from './data-provider';\nimport customRoutes from './customRoutes';\n\nimport Users from './users';\nimport Managers from './managers';\nimport Agents from './agents';\nimport Bills from './bills';\nimport Disbursements from './disbursements';\nimport Providers from './providers';\nimport Docs from './docs';\nimport Statements from './statements';\nimport createAuth from './auth';\nimport financial from './financial';\nimport DashbaordPage from './dashboard';\nimport Demo from './demo';\n\n//icons\nimport {AccountTree, CloudDone, PlaylistAddCheck, SupervisorAccount, Apple, Apartment, Storefront, Receipt, Dashboard,Assessment,SportsMotorsports, LibraryBooks, DeveloperBoard, Payment} from '@material-ui/icons';\nvar location=window.location, start_params=new URLSearchParams(location.search), spec_server=start_params.get('server');\nvar apiUrl;\nif (spec_server) {\n\tif (spec_server.indexOf('//')!==0) spec_server='//'+spec_server;\n\tapiUrl=location.protocol+spec_server;\n\tif (apiUrl[apiUrl.length-1]==='/') apiUrl=apiUrl.slice(0, -1);\n} else apiUrl=location.protocol+'//'+location.hostname+(location.port?(':'+location.port):'');\n\nconst dataProvider = DataProvider(apiUrl);\nconst App = () => (\n\t<Admin customRoutes={customRoutes} dataProvider={dataProvider} authProvider={createAuth(apiUrl)} /*layout={(props) => <Layout {...props} menu={TreeMenu}/>}*/>\n\t\t{permissions => {\n\t\t\tvar ret=[];\n\t\t\tif (permissions==='admin'||permissions==='manager') {\n\t\t\t\tret= ret.concat([\n\t\t\t\t// <Resource key=\"userManager\" name=\"userManager\" icon={AccountTree} options={{label:\"用户管理\", isMenuParent:true}} />,\n\t\t\t\t\t<Resource key=\"managers\" name=\"managers\" icon={SupervisorAccount} {...Managers} options={{label:'Administrators', menuParent:'userManager'}}/>,\n\t\t\t\t\t<Resource key=\"users\" name=\"users\" icon={Apple} {...Users}  options={{label:'Partners', menuParent:'userManager'}}/>,\n\t\t\t\t\t// <Resource key=\"agents\" name=\"agents\" icon={Apartment} {...Agents} options={{label:'代理', menuParent:'userManager'}}/>,\n\t\t\t\t<Resource key=\"providers\" name=\"providers\" icon={SportsMotorsports} {...Providers} options={{label:'Providers'}}/>,\n\t\t\t\t<Resource key=\"financial_recon\" name=\"recon\" icon={CloudDone} {...financial.Recon} options={{label:'Auto Reconcilition'}}/>,\n\t\t\t\t<Resource key=\"financial_recon_manual\" name=\"recon_manual\" icon={PlaylistAddCheck} {...financial.ReconManual} options={{label:'Manual Reconcilition'}}/>,\n\t\t\t\t])\n\t\t\t} else {\n\t\t\t\tret.push((\n\t\t\t\t\t<Resource key=\"dashboard\" name=\"dashboard\" {...DashbaordPage} icon={Dashboard} options={{label:\"Dashboard\"}} />\n\t\t\t\t))\n\t\t\t}\n\t\t\tret.push(<Resource key=\"bills\" name=\"bills\" icon={Receipt} {...Bills} options={{label:'Transactions'}}/>);\n\t\t\tret.push(<Resource key=\"disbursements\" name=\"disbursements\" icon={Payment} {...Disbursements} options={{label:'Disbursements'}}/>);\n\t\t\tret.push(<Resource key=\"statements\" name=\"statements\" icon={Assessment} {...Statements} options={{label:'Billings'}}/>);\n\t\t\tret.push(<Resource key=\"docs\" name=\"docs\" icon={LibraryBooks} {...Docs} options={{label:'Integrations'}} />);\n\t\t\tret.push(<Resource key=\"demo\" name=\"demo\" icon={DeveloperBoard} {...Demo} options={{label:'Demo'}} />);\n\t\t\treturn ret;\n\t\t}}\n\t</Admin>\n);\n\nexport default App;","import React, {useState, useEffect} from \"react\";\nimport {ButtonGroup, Button, Chip} from '@material-ui/core';\nimport { \n\tList, TextField, NumberField, FunctionField,\n\tTextInput, SelectInput,\n\tShow, SimpleShowLayout,\n\tuseNotify, useDataProvider, \n\tFilter,\n\tDateTimeInput,\n} from 'react-admin';\nimport {DateTimeField} from './extends/fields';\nimport { useDispatch } from 'react-redux';\nimport { refreshView } from 'ra-core';\nimport {fetchApi} from './data-provider';\nimport {ExtendedDatagrid} from './extends';\nimport get from 'lodash/get';\n\nexport const BillShow =props=> (\n\t<Show {...props}>\n\t\t<SimpleShowLayout>\n\t\t\t<TextField source=\"name\" label=\"显示名\"/>\n\t\t\t<TextField source=\"key\" />\n\t\t\t<TextField source=\"merchantid\" />\n\t\t\t<NumberField source=\"daily\" label=\"当日收入\" options={{ minimumFractionDigits: 2, maximumFractionDigits: 2}}/>\n\t\t\t<NumberField source=\"profit\" label=\"账户余额\" options={{ minimumFractionDigits: 2, maximumFractionDigits: 2}}/>\n\t\t</SimpleShowLayout>\n\t</Show>\n)\n\n// const QuickFilter = ({ label }) => {\n//     return <Chip label={label} />;\n// };\n\nconst BillFilter =props=>{\n\tconst dp=useDataProvider(), notify=useNotify();\n\tvar [providers, setProviders]=useState();\n\tuseEffect(()=>{\n\t\tdp.getList('providers')\n\t\t.then(({data})=>setProviders(data))\n\t\t.catch(e=>notify(e.message, 'warning'))\n\t}, []);\n\treturn (\n\t<Filter {...props}>\n\t\t<TextInput label=\"订单id\" source=\"id\"/>\n\t\t<TextInput label=\"商户订单\" source=\"merchantOrderId\" alwaysOn/>\n\t\t<TextInput label=\"供应商订单\" source=\"providerOrderId\"/>\n\t\t<TextInput label=\"商户\" source=\"merchantName\" alwaysOn/>\n\t\t<DateTimeInput label=\"开始日期\" source=\"startTime\"/>\n\t\t<DateTimeInput label=\"结束日期\" source=\"endTime\"/>\n\t\t<SelectInput label=\"订单状态\" source=\"used\" choices={[\n\t\t\t{id:true, name:'已完成'},\n\t\t\t{id:{$ne:true}, name:'未完成'},\n\t\t\t{id:undefined, name:'全部'},\n\t\t]} />\n\t\t<SelectInput label=\"供应商\" source=\"provider\" choices={providers}/>\n\t</Filter>)\n}\n\nconst OptionButtons =({permissions, ...props})=>{\n\tconst {record}=props;\n\tvar dispatch = useDispatch();\n\tconst notify=useNotify();\n\n\tfunction TakeAction(resource, params) {\n\t\treturn fetchApi(`${resource}/${params.action}`, {\n\t\t\tmethod:'POST',\n\t\t\tbody:JSON.stringify({_id:decodeURIComponent(params.id)})\n\t\t}).then(({json})=>{\n\t\t\tnotify('done', 'info');\n\t\t\treturn {data:json};\n\t\t}).catch((e)=>{\n\t\t\tnotify(e.message, 'warning');\n\t\t})\n\t}\n\n\treturn (\n\t\t<ButtonGroup variant=\"text\" color=\"primary\" aria-label=\"text primary button group\">\n\t\t\t<Button onClick={()=>{TakeAction('bills', {action:'notify', id:record.id})}}>notify</Button>\n\t\t\t{/* {permissions==='admin'?<Button onClick={()=>{TakeAction('bills', {action:'debugBill', id:record.id}).then(()=>{dispatch(refreshView())})}}>debug</Button>:null}\n\t\t\t{permissions==='admin'?<Button onClick={()=>{TakeAction('bills', {action:'adminUseBill', id:record.id}).then(()=>{dispatch(refreshView())})}}>force</Button>:null} */}\n\t\t\t<Button onClick={()=>{TakeAction('bills', {action:'refund', id:record.id}).then(()=>{dispatch(refreshView())})}}>refund</Button>\n\t\t</ButtonGroup>\n\t)\n}\nconst showShare=(record)=>{\n\tvar p=get(record, ['payment', record.paymentMethod], {});\n\tvar ret='';\n\tp.mdr && (ret+=(p.mdr*100).toFixed(2)+'%');\n\tp.fix_fee && (ret+=(ret.length?'+':'')+p.fix_fee);\n\treturn ret\n}\nexport const BillList = ({permissions, ...props}) => {\n\treturn (\n\t\t<List {...props} filters={<BillFilter/>} filterDefaultValues={{used:true, paymentMethod:{$nin:['disbursement', 'topup', 'withdrawal']}}} exporter={false} title=\"充值订单\" bulkActionButtons={false} sort={{ field: 'time', order: 'DESC' }}>\n\t\t\t<ExtendedDatagrid footerResource=\"billsSummary\">\n\t\t\t\t<TextField source=\"id\" footerText=\"Total\"/>\n\t\t\t\t<TextField source=\"merchantName\" label=\"商户\"/>\n\t\t\t\t<TextField source=\"merchantOrderId\" label=\"商户订单\"/>\n\t\t\t\t<TextField source=\"providerOrderId\" label=\"供应商订单\"/>\n\t\t\t\t<TextField source=\"provider\" label=\"供应商\"/>\n\t\t\t\t<TextField source=\"paymentMethod\" label=\"支付方式\" />\n\t\t\t\t<FunctionField label=\"费用\" alwaysOn={true} render={showShare}/>\n\t\t\t\t<NumberField source=\"money\" footerSource=\"money\"/>\n\t\t\t\t<TextField source=\"currency\"/>\n\t\t\t\t<DateTimeField source=\"time\" label=\"创建时间\"/>\n\t\t\t\t<TextField source=\"status\" />\n\t\t\t\t<OptionButtons permissions={permissions} alwaysOn={true}/>\n\t\t\t</ExtendedDatagrid>\n\t\t</List>\n\t);\n}\n\nexport default {\n\tlist:BillList,\n\tshow:BillShow,\n}","import React, {useState, useEffect} from \"react\";\nimport {ButtonGroup, Button, Chip} from '@material-ui/core';\nimport { \n\tList, TextField, NumberField, FunctionField,\n\tTextInput, SelectInput,\n\tShow, SimpleShowLayout,\n\tuseNotify, useDataProvider, \n\tFilter,\n\tDateTimeInput,\n} from 'react-admin';\nimport {DateTimeField} from './extends/fields';\nimport { useDispatch } from 'react-redux';\nimport { refreshView } from 'ra-core';\nimport {fetchApi} from './data-provider';\nimport {ExtendedDatagrid} from './extends';\nimport get from 'lodash/get';\n\nexport const BillShow =props=> (\n\t<Show {...props}>\n\t\t<SimpleShowLayout>\n\t\t\t<TextField source=\"name\" label=\"显示名\"/>\n\t\t\t<TextField source=\"key\" />\n\t\t\t<TextField source=\"merchantid\" />\n\t\t\t<NumberField source=\"daily\" label=\"当日收入\" options={{ minimumFractionDigits: 2, maximumFractionDigits: 2}}/>\n\t\t\t<NumberField source=\"profit\" label=\"账户余额\" options={{ minimumFractionDigits: 2, maximumFractionDigits: 2}}/>\n\t\t</SimpleShowLayout>\n\t</Show>\n)\n\n// const QuickFilter = ({ label }) => {\n//     return <Chip label={label} />;\n// };\n\nconst BillFilter =props=>{\n\tconst dp=useDataProvider(), notify=useNotify();\n\tvar [providers, setProviders]=useState();\n\tuseEffect(()=>{\n\t\tdp.getList('providers')\n\t\t.then(({data})=>setProviders(data))\n\t\t.catch(e=>notify(e.message, 'warning'))\n\t}, []);\n\treturn (\n\t<Filter {...props}>\n\t\t<TextInput label=\"订单id\" source=\"id\"/>\n\t\t<TextInput label=\"商户订单\" source=\"merchantOrderId\" alwaysOn/>\n\t\t<TextInput label=\"供应商订单\" source=\"providerOrderId\"/>\n\t\t<TextInput label=\"商户\" source=\"merchantName\" alwaysOn/>\n\t\t<DateTimeInput label=\"开始日期\" source=\"startTime\"/>\n\t\t<DateTimeInput label=\"结束日期\" source=\"endTime\"/>\n\t\t<SelectInput label=\"订单状态\" source=\"used\" choices={[\n\t\t\t{id:true, name:'已完成'},\n\t\t\t{id:{$ne:true}, name:'未完成'},\n\t\t\t{id:undefined, name:'全部'},\n\t\t]} />\n\t\t<SelectInput label=\"供应商\" source=\"provider\" choices={providers}/>\n\t</Filter>)\n}\n\nconst OptionButtons =({permissions, ...props})=>{\n\tconst {record}=props;\n\tvar dispatch = useDispatch();\n\tconst notify=useNotify();\n\n\tfunction TakeAction(resource, params) {\n\t\treturn fetchApi(`${resource}/${params.action}`, {\n\t\t\tmethod:'POST',\n\t\t\tbody:JSON.stringify({_id:decodeURIComponent(params.id)})\n\t\t}).then(({json})=>{\n\t\t\tnotify('done', 'info');\n\t\t\treturn {data:json};\n\t\t}).catch((e)=>{\n\t\t\tnotify(e.message, 'warning');\n\t\t})\n\t}\n\n\treturn (\n\t\t<ButtonGroup variant=\"text\" color=\"primary\" aria-label=\"text primary button group\">\n\t\t\t<Button onClick={()=>{TakeAction('bills', {action:'notify', id:record.id})}}>notify</Button>\n\t\t</ButtonGroup>\n\t)\n}\nconst showShare=(record)=>{\n\tvar p=get(record, ['payment', record.paymentMethod], {});\n\tvar ret='';\n\tp.mdr && (ret+=(p.mdr*100).toFixed(2)+'%');\n\tp.fix_fee && (ret+=(ret.length?'+':'')+p.fix_fee);\n\treturn ret\n}\nexport const BillList = ({permissions, ...props}) => {\n\treturn (\n\t\t<List {...props} filters={<BillFilter/>} filterDefaultValues={{used:true, paymentMethod:'disbursement'}} exporter={false} title=\"充值订单\" bulkActionButtons={false} sort={{ field: 'time', order: 'DESC' }}>\n\t\t\t<ExtendedDatagrid footerResource=\"billsSummary\">\n\t\t\t\t<TextField source=\"id\" footerText=\"Total\"/>\n\t\t\t\t<TextField source=\"merchantName\" label=\"商户\"/>\n\t\t\t\t<TextField source=\"merchantOrderId\" label=\"商户订单\"/>\n\t\t\t\t<TextField source=\"providerOrderId\" label=\"供应商订单\"/>\n\t\t\t\t<TextField source=\"provider\" label=\"供应商\"/>\n\t\t\t\t<FunctionField label=\"费用\" alwaysOn={true} render={showShare}/>\n\t\t\t\t<NumberField source=\"money\" footerSource=\"money\"/>\n\t\t\t\t<TextField source=\"currency\"/>\n\t\t\t\t<DateTimeField source=\"time\" label=\"创建时间\"/>\n\t\t\t\t<TextField source=\"status\" />\n\t\t\t\t<OptionButtons permissions={permissions} alwaysOn={true}/>\n\t\t\t</ExtendedDatagrid>\n\t\t</List>\n\t);\n}\n\nexport default {\n\tlist:BillList,\n\tshow:BillShow,\n}","import React , {useEffect, useState} from \"react\";\nimport { \n\tList, Datagrid, TextField, BooleanField, ArrayField, FunctionField, SingleFieldList, Loading, useDataProvider, useNotify, useListContext\n} from 'react-admin';\nimport {ChipField} from '../extends'\n\nconst showBalance=(record)=> {\n\tvar amount=(record.balance||0)+(record.receivable||0);\n\tif (amount===0) return '0';\n\treturn `${amount}=B${record.balance}+R${record.receivable}`;\n}\nconst showOutstanding=(record)=> {\n\tif (record.outstandingBalanceError) return record.outstandingBalanceError;\n\tvar amount=(record.outstandingBalance||0)+(record.outstandingReceivable||0);\n\tif (amount===0) return '0';\n\treturn `${amount}=B${record.outstandingBalance}+R${record.outstandingReceivable}`;\n}\nconst FullProviderInfo =({data, ids, ...rest})=>{\n\tconst dp=useDataProvider();\n\tconst notify=useNotify();\n\tconst [pb, setPB]=useState();\n\tconst [oa, setOA]=useState();\n\n\tuseEffect(()=>{\n\t\tif (ids.length===0) return;\n\t\tdp.getList('providerBalances', {filter:{account:ids}})\n\t\t.then(({data})=>{\n\t\t\tsetPB(data);\n\t\t})\n\t\t.catch((e)=>{\n\t\t\tnotify(typeof e==='object'?e.message:e.toString(), 'warning');\n\t\t})\n\t\tdp.getList('outstandingBalances', {filter:{account:ids}})\n\t\t.then(({data})=>setOA(data))\n\t\t.catch((e)=>{\n\t\t\tnotify(typeof e==='object'?e.message:e.toString(), 'warning')\n\t\t})\n\t}, [ids])\n\n\tif (!pb|| !oa) return <Loading />\n\tpb.forEach((b)=>{\n\t\tdata[b.id].balance=b.balance||0;\n\t\tdata[b.id].receivable=b.receivable||0;\n\t})\n\toa.forEach((b)=>{\n\t\tif (b.err) data[b.id].outstandingBalanceError=b.err;\n\t\telse { \n\t\t\tdata[b.id].outstandingBalance=b.balance;\n\t\t\tdata[b.id].outstandingReceivable=b.receivable;\n\t\t}\n\t})\n\treturn \t(<Datagrid>\n\t\t<TextField source=\"name\" />\n\t\t<BooleanField source=\"forecore\" label=\"四方\"/>\n\t\t<BooleanField source=\"withdrawal\" label=\"支持提款\"/>\n\t\t<BooleanField source=\"reconciliation\" label=\"自动对账\"/>\n\t\t<ArrayField source=\"supportedMethods\" label=\"支付方式\">\n\t\t\t<SingleFieldList>\n\t\t\t\t<ChipField />\n\t\t\t</SingleFieldList>\n\t\t</ArrayField>\n\t\t<FunctionField label=\"Local Account\" render={showBalance} />\n\t\t<FunctionField label=\"Outstanding Account\" render={showOutstanding} />\n\t</Datagrid>)\n}\nexport default props => (\n\t<List {...props} exporter={false} title=\"供应商\" bulkActionButtons={false}>\n\t\t{/* <Datagrid rowClick=\"expand\">\n\t\t\t<TextField source=\"name\" />\n\t\t\t<BooleanField source=\"forecore\" label=\"四方\"/>\n\t\t\t<BooleanField source=\"withdrawal\" label=\"支持提款\"/>\n\t\t\t<BooleanField source=\"reconciliation\" label=\"自动对账\"/>\n\t\t\t<ArrayField source=\"supportedMethods\" label=\"支付方式\">\n\t\t\t\t<SingleFieldList>\n\t\t\t\t\t<ChipField />\n\t\t\t\t</SingleFieldList>\n\t\t\t</ArrayField>\n\t\t</Datagrid> */}\n\t\t<FullProviderInfo {...props}/>\n\t</List>\n);","import list from './list'\n\nexport default {\n    list\n}","import React, {useEffect, useState} from 'react'\nimport { \n\tTitle, SimpleShowLayout, TextField, useDataProvider, useGetIdentity\n} from 'react-admin';\nimport {Card, CardHeader, CardContent, Grid, Typography, Divider, makeStyles} from '@material-ui/core';\nimport ReactMarkdown  from 'react-markdown'\nimport gfm from 'remark-gfm'\nimport {Prism as SyntaxHighlighter} from 'react-syntax-highlighter'\nimport { dark } from 'react-syntax-highlighter/dist/esm/styles/prism'\n/* eslint import/no-webpack-loader-syntax: off */\nconst mdsrc =require('!raw-loader!./四方接口.md').default;\n// const objPath =require('object-path')\n\nconst useStyles = makeStyles((theme) => ({\n  header:{\n\tborderBottom: '1px solid #e9ecef',\n\tdisplay: 'flex',\n    fontSize: '1.25em',\n    margin: 0,\n    minHeight: '64px',\n    overflow: 'hidden',\n    padding: '0 16px',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    width: '100%'\n  },\n  item: {\n    color: '#333',\n    padding: '15px 40px 0px 30px',\n    'margin-bottom': '15px',\n  },\n  subtitle :{\n\tdisplay: 'block',\n    overflow: 'visible',\n    color: '#333',\n    'margin-bottom': '10px',\n    'margin-top': 0,\n    'font-size': '32px' \n  },\n  paper: {\n    padding: theme.spacing(2),\n    margin: 'auto',\n    maxWidth: 500,\n  },\n  image: {\n    width: 128,\n    height: 128,\n  },\n  img: {\n    margin: 'auto',\n    display: 'block',\n    maxWidth: '100%',\n    maxHeight: '100%',\n  },\n}));\n\nconst renderers = {\n  code: ({language, value}) => {\n    return (<SyntaxHighlighter style={dark} language=\"javascript\">\n\t\t{value}\n\t\t</SyntaxHighlighter>\n\t)\n  }\n}\n\nconst DocShow =({options, permissions, ...rest})=> {\n\tvar classes=useStyles();\n\tconst { identity } = useGetIdentity();\n\tconst dp=useDataProvider();\n\tvar [userKey, setKey]=useState();\n\tuseEffect(()=>{\n\t\tif (identity && identity.acl=='merchant') {\n\t\t\tdp.getOne('users', {id:identity.id})\n\t\t\t.then(({data})=>setKey(data))\n\t\t\t.catch(()=>{})\n\t\t}\n\t}, [identity]);\n\n    return (\n\t// <Show {...props} id=\"dummy\" title=\"对接文档\">\n\t// \t{/* <SimpleShowLayout>\n    //         <ReactMarkdown>\n    //             Test\n    //         </ReactMarkdown>\n\t// \t</SimpleShowLayout> */}\n\t// \t<MarkDownView />\n\t// </Show>\n\t<div className=\"show-page\">\n\t\t<Title\n\t\t\tdefaultTitle={options.label}\n\t    />\n\t\t{userKey?(<Card>\n\t\t\t<CardHeader title=\"对接参数\" className={classes.header}/>\n\t\t\t<Grid container direction=\"row\">\n\t\t\t\t<Grid item xs={4} className={classes.item}>\n\t\t\t\t\t<Typography variant=\"subtitle1\">MD5 Key</Typography>\n\t\t\t\t\t<Typography variant=\"body2\" gutterBottom>{userKey.key}</Typography>\n\t\t\t\t</Grid>\n\t\t\t\t<Divider orientation=\"vertical\" flexItem />\n\t\t\t\t<Grid item xs={4} className={classes.item}>\n\t\t\t\t\t<Typography variant=\"subtitle1\">PartnerId</Typography>\n\t\t\t\t\t<Typography variant=\"body2\" gutterBottom>{userKey.merchantid}</Typography>\n\t\t\t\t</Grid>\n\t\t\t</Grid>\n\t\t</Card>)\n\t\t:null\n\t\t}\n\t\t<Card>\n\t\t\t<CardContent>\n\t\t\t\t<ReactMarkdown plugins={[gfm]} renders={renderers} >\n\t\t\t\t\t{mdsrc}\n\t\t\t\t</ReactMarkdown>\n\t\t\t</CardContent>\n\t\t</Card>\n\t</div>\n)}\n\nexport default {\n\tlist:DocShow,\n}","import React from \"react\";\nimport { Card as MuiCard, CardContent, withStyles } from '@material-ui/core';\nimport AccessTimeIcon from '@material-ui/icons/AccessTime';\nimport {\n\tList, TextField, NumberField, DateField, ReferenceField, FunctionField,\n    FilterList, FilterListItem,\n} from 'react-admin';\nimport {ExtendedDatagrid} from './extends'\n\n// const BillFilter =props=>(\n// \t<Filter {...props}>\n// \t\t<TextInput label=\"订单id\" source=\"id\"/>\n// \t\t<TextInput label=\"商户订单\" source=\"merchantOrderId\" alwaysOn/>\n// \t\t<TextInput label=\"供应商订单\" source=\"providerOrderId\"/>\n// \t\t<TextInput label=\"商户\" source=\"merchantName\" alwaysOn/>\n// \t\t<DateTimeInput label=\"开始日期\" source=\"startTime\"/>\n// \t\t<DateTimeInput label=\"结束日期\" source=\"endTime\"/>\n// \t\t<SelectInput label=\"订单状态\" source=\"used\" choices={[\n// \t\t\t{id:true, name:'已完成'},\n// \t\t\t{id:{$ne:true}, name:'未完成'},\n// \t\t\t{id:undefined, name:'全部'},\n// \t\t]} />\n// \t\t<TextInput label=\"供应商\" source=\"provider\"/>\n// \t</Filter>\n// )\n\nconst StatementPeriod =()=>(\n    <FilterList label=\"Statistics\" icon={<AccessTimeIcon />}>\n        <FilterListItem label=\"by day\" value={{period:'day'}} />\n        <FilterListItem label=\"by week\" value={{period:'week'}} />\n        <FilterListItem label=\"by month\" value={{period:'month'}} />\n    </FilterList>\n)\nconst Card = withStyles(theme => ({\n    root: {\n        [theme.breakpoints.up('sm')]: {\n            order: -1, // display on the left rather than on the right of the list\n            width: '15em',\n            marginRight: '1em',\n        },\n        [theme.breakpoints.down('sm')]: {\n            display: 'none',\n        },\n    },\n}))(MuiCard);\n\nconst FilterSidebar = () => (\n    <Card>\n        <CardContent>\n            <StatementPeriod />\n        </CardContent>\n    </Card>\n);\nconst showIncoming=rec=>(rec.balance+rec.commission)\n\nexport const StatementsList = ({permissions, ...props}) => {\n\treturn (\n\t\t<List {...props} title=\"报表\" bulkActionButtons={false} sort={{ field: 'time', order: 'DESC' }}>\n\t\t\t<ExtendedDatagrid footerResource=\"statementsSummary\">\n\t\t\t\t<DateField source=\"time\" footerText=\"Total\" />\n                <ReferenceField label=\"商户\" source=\"account\" reference=\"users\" link={false}>\n\t\t\t\t    <TextField source=\"name\" />\n                </ReferenceField>\n                <TextField source=\"paymentMethod\" label=\"支付方式\"/>\n\t\t\t\t<FunctionField source=\"balance\" label=\"收入\" render={showIncoming} footerRender={showIncoming}/>\n\t\t\t\t<NumberField source=\"commission\" label=\"手续费\" footerSource=\"money\" options={{ maximumFractionDigits: 2 }} footerSource=\"commission\"/>\n                <NumberField source=\"count\" label=\"交易笔数\" footerSource=\"money\" options={{ maximumFractionDigits: 0 }}/>\n\t\t\t</ExtendedDatagrid>\n\t\t</List>\n\t);\n}\n\nexport default {\n\tlist:StatementsList,\n}","import React, { useState, useEffect } from \"react\";\nimport { Form, Label} from 'react-final-form';\nimport { Box} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { \n\tList, Button, Toolbar, \n\tTextField, NumberField, DateField,\n\tSelectInput, TopToolbar, DateInput, \n\tFormDataConsumer, SimpleForm,\n\tuseNotify, useDataProvider, useRedirect, useRefresh, \n\tsanitizeListRestProps\n} from 'react-admin';\nimport {ExtendedDatagrid, DateTimeField} from '../extends'\nimport {fetchApi} from '../data-provider';\n\nconst _noop=()=>{}\n\nconst useStyles = makeStyles({\n  actionButton: {\n\t  marginBottom:'29px',\n  },\n});\n\nconst ReconInitPage =(props)=> {\n\tconst redirect=useRedirect();\n\tconst dp=useDataProvider(), notify=useNotify();\n\treturn (<Form onSubmit={_noop}>\n\t\t{({ handleSubmit }) => (\n\t\t\t<form onSubmit={handleSubmit}>\n\t\t\t\t<p>选择初始对账的日期</p>\n\t\t\t\t<DateInput label=\"日期\" source=\"date\"/>\n\t\t\t\t<FormDataConsumer>\n\t\t\t\t{({formData, ...rest})=>(\n\t\t\t\t\t<Toolbar>\n\t\t\t\t\t<Button variant=\"contained\" size=\"medium\" label=\"初始化对账数据\"\n\t\t\t\t\tonClick={\n\t\t\t\t\t\tasync ()=>{\n\t\t\t\t\t\t\tif (!formData.date) return notify('Date must be specified', 'error');\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tvar ret=await dp.actions('recon', {method:'check', end:new Date(), ...formData});\n\t\t\t\t\t\t\t\tif (!ret) return;\n\t\t\t\t\t\t\t\tif (ret.data.modified===0) return notify('no data received, system will check data per 30 mins. you will see the results if ', 'warning');\n\t\t\t\t\t\t\t\tredirect('/recon');\n\t\t\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\t\t\tnotify(e.message, 'warning');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t</Toolbar>\n\t\t\t\t)}\n\t\t\t\t</FormDataConsumer>\n\t\t\t</form>\n\t\t)}\n\t</Form>)\n}\nconst ReconActions = (props) => {\n\tconst {\n\t\tclassName,\n\t\t...rest\n\t} = props;\n\tconst dp=useDataProvider();\n\tconst [providers, setProviders] =useState();\n\n\tconst notify=useNotify(); \n\n\tuseEffect(()=>{\n\t\tdp.getList('providers')\n\t\t.then(({data})=>{\n\t\t\tsetProviders(data);\n\t\t}).catch((e)=>{\n\t\t\tnotify(e.message, 'warning');\n\t\t})\n\t}, []);\n\n\tvar classes=useStyles();\n\tvar refresh=useRefresh();\n\n\tvar choices=[{id:null, name:'All'}];\n\tif (providers) choices=choices.concat(providers);\n\treturn (\n\t\t<TopToolbar className={className} {...sanitizeListRestProps(rest)}>\n\t\t\t<Form onSubmit={_noop}>\n\t\t\t\t{({ handleSubmit }) => (\n\t\t            <form onSubmit={handleSubmit}>\n\t\t\t\t\t\t<Box display=\"flex\" alignItems=\"flex-end\" mb={1}>\n\t\t\t\t\t\t\t<Box component=\"span\" mr={2}>\n\t\t\t\t\t\t\t\t<SelectInput label=\"供应商\" choices={choices} source=\"provider\" />\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t<Box component=\"span\" mr={2}>\n\t\t\t\t\t\t\t\t<DateInput label=\"日期\" source=\"date\"/>\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t<Box component=\"span\" mr={2}>\n\t\t\t\t\t\t\t<FormDataConsumer>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t({formData, ...rest})=><Button className={classes.actionButton} variant=\"contained\" size=\"medium\"\n\t\t\t\t\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\t\t\t\t\tif (!formData.date) return notify('Date must be specified', 'error');\n\t\t\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\t\t\tvar ret=await dp.actions('recon', {method:'check', ...formData});\n\t\t\t\t\t\t\t\t\t\t\t\tif (!ret) return;\n\t\t\t\t\t\t\t\t\t\t\t\trefresh();\n\t\t\t\t\t\t\t\t\t\t\t\tnotify(`${ret.data.modified} records updated`, 'info');\n\t\t\t\t\t\t\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\t\t\t\t\t\t\tnotify(e.message, 'warning');\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tlabel=\"重新对账\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</FormDataConsumer>\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</form>\n\t\t\t\t)}\n\t\t\t</Form>\n\t\t</TopToolbar>\n\t);\n};\n\nconst ReconList = (props) => {\n\treturn (<List {...props} exporter={false} actions={<ReconActions />} title='对账单' bulkActionButtons={false} sort={{ field: 'time', order: 'DESC' }}>\n\t\t<ExtendedDatagrid>\n\t\t\t<DateField source=\"time\" label=\"时间\"/>\n\t\t\t<TextField source=\"account\" label=\"供应商\"/>\n\t\t\t<TextField source=\"recon_tag\" label=\"对账标记\"/>\n\t\t\t<NumberField source=\"received\" label=\"收款\"/>\n\t\t\t<NumberField source=\"commission\" label=\"手续费\"/>\n\t\t</ExtendedDatagrid>\n\t</List>);\n}\n\nexport default {\n\tlist:ReconList,\n\tcreate:ReconInitPage\n}","import React, { useState, useEffect} from \"react\";\nimport {Link} from \"react-router-dom\";\nimport { Form, Label} from 'react-final-form';\nimport {Box, Card as MuiCard, CardContent, withStyles, Dialog, DialogTitle, Button as MuiButton, Collapse} from '@material-ui/core';\nimport {DoneAll, CloudUpload,SportsMotorsports} from '@material-ui/icons';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { \n\tList, Toolbar, Button,\n\tTextField, NumberField, DateField,\n\tSelectInput, TopToolbar, DateInput, \n\tFormDataConsumer, SimpleForm,\n\tuseNotify, useDataProvider, useRedirect, useRefresh, useLogout,\n\tsanitizeListRestProps,\n\tFilter, FilterList, FilterListItem, FilterLiveSearch, TextInput, DateTimeInput, FileInput, FileField, \n\tLoading, \n} from 'react-admin';\nimport {ExtendedDatagrid, DateTimeField} from '../extends'\nimport classnames from 'classnames';\nimport {fetchApi} from '../data-provider';\n\nconst _noop=()=>{}\n\nconst useStyles = makeStyles(theme=>({\n\tactionButton: {\n\t\tmarginBottom:'29px',\n\t},\n\tleftIcon: {\n\t\tmarginRight: theme.spacing(1),\n\t},\n}));\n\nconst UploadDialogToolbar =(props)=>{\n\tconst {className,variant = 'contained', disabled, history}=props;\n\tconst logout=useLogout();\n\tconst notify=useNotify();\n\tconst classes = useStyles(props);\n\tconst [err, setErr] =useState();\n\n\treturn (\n\t\t<Toolbar>\n\t\t<FormDataConsumer>\n\t\t{({formData, ...rest})=>(\n\t\t\t<MuiButton varirant=\"contained\" disabled={disabled} type=\"button\" color=\"primary\" \n\t\t\t\tonClick={()=>{\n\t\t\t\t\tconst fmdt = new FormData();\n\t\t\t\t\tfmdt.append(\n\t\t\t\t\t\t\"settlement\",\n\t\t\t\t\t\tformData.file.rawFile,\n\t\t\t\t\t\tformData.file.title\n\t\t\t\t\t);\n\t\t\t\t\tfmdt.append(\"provider\", formData.provider);\n\t\t\t\t\tfetchApi('recon/upload', {\n\t\t\t\t\t\tmethod:'POST',\n\t\t\t\t\t\tbody:fmdt\n\t\t\t\t\t}).then(({headers, json})=>{\n\t\t\t\t\t\tvar {modified}=json;\n\t\t\t\t\t\tnotify(`${modified} records updated`, 'success');\n\t\t\t\t\t}).catch(({message, status})=>{\n\t\t\t\t\t\tif (status === 401 || status === 403) {\n\t\t\t\t\t\t\treturn logout();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (message) {\n\t\t\t\t\t\t\tif (Array.isArray(message)) return history.push({pathname:'/refill-bills', state:{bills:message, provider:formData.provider}})//return setErr(message); return notify(`Orders ${message.map(item=>item.orderId).join(',')} are not exists, add them in bills first`, 'warning')\n\t\t\t\t\t\t\treturn notify(message.toString(), 'warning');\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<CloudUpload\n                    size={18}\n                    thickness={2}\n                    className={classes.leftIcon}\n                />Upload\n\t\t\t</MuiButton>\n\t\t)}\n\t\t</FormDataConsumer>\n\t\t</Toolbar>\n\t)\n}\nconst UploadDialog=({onClose, selectedValue, open, providers, ...rest})=>{\n\tif (!open) return null;\n\treturn (\n\t\t<Dialog onClose={onClose} aria-labelledby=\"upload-dialog\" open={open}>\n\t\t\t<DialogTitle id=\"upload-dialog\">Select settlement file</DialogTitle>\n\t\t\t<SimpleForm handleSubmit={_noop} toolbar={<UploadDialogToolbar {...rest}/>}>\n\t\t\t\t<SelectInput source=\"provider\" choices={[].concat(providers)} variant=\"standard\"/>\n\t\t\t\t<FileInput source=\"file\" accept=\"text/csv\">\n\t\t\t\t\t<FileField source=\"src\" title=\"title\" />\n\t\t\t\t</FileInput>\n\t\t\t</SimpleForm>\n\t\t</Dialog>\n\t)\n}\n\nconst ReconActions = (props) => {\n\tconst {\n\t\tclassName,\n\t\tproviders,\n\t\t...rest\n\t} = props;\n\tconst [open, setOpen]=useState();\n\t// const dp=useDataProvider();\n\t// const [providers, setProviders] =useState();\n\n\t// const notify=useNotify(); \n\n\t// useEffect(()=>{\n\t// \tdp.getList('providers')\n\t// \t.then(({data})=>{\n\t// \t\tsetProviders(data);\n\t// \t}).catch((e)=>{\n\t// \t\tnotify(e.message, 'warning');\n\t// \t})\n\t// }, []);\n\n\t// var classes=useStyles();\n\t// var refresh=useRefresh();\n\n\t// var choices=[{id:null, name:'All'}];\n\t// if (providers) choices=choices.concat(providers);\n\n\tconst openUpload=()=>{\n\t\t// console.log('clicked')\n\t\tsetOpen(true);\n\t}\n\tconst closeUpload=()=>setOpen(false);\n\n\treturn (\n\t\t<>\n\t\t<UploadDialog open={open} onClose={closeUpload} {...props}/>\n\t\t<TopToolbar className={className} {...sanitizeListRestProps(rest)}>\n\t\t\t<Button label=\"upload\" onClick={openUpload}><CloudUpload /></Button>\n\t\t\t<Button onClick={_noop} label=\"batch\"><DoneAll /></Button>\n\t\t</TopToolbar>\n\t\t</>\n\t);\n};\nconst PostBulkActionButtons = props => (\n\t<Button label=\"Settlement\"><DoneAll/></Button>\n);\nconst ProviderFilter =({providers})=>{\n\tvar choices=[];\n\tif (providers) choices=choices.concat(providers);\n\n\treturn (\n\t<FilterList label=\"Providers\" icon={<SportsMotorsports />}>\n\t\t{\n\t\t\tchoices.map(item=>(\n\t\t\t\t<FilterListItem label={item.name} value={{provider:item.id}} />\n\t\t\t))\n\t\t}\n\t</FilterList>)\n}\n\nconst HasReconId =props=>(\n\t<FilterList label=\"unsettled Only\" icon={<DoneAll />}>\n\t\t<FilterListItem label='Yes' value={{unsettled:true}} />\n\t\t<FilterListItem label='No' value={{unsettled:false}} />\n\t</FilterList>)\n\nconst Card = withStyles(theme => ({\n\troot: {\n\t\t[theme.breakpoints.up('sm')]: {\n\t\t\torder: -1, // display on the left rather than on the right of the list\n\t\t\twidth: '15em',\n\t\t\tmarginRight: '1em',\n\t\t},\n\t\t[theme.breakpoints.down('sm')]: {\n\t\t\tdisplay: 'none',\n\t\t},\n\t},\n}))(MuiCard);\n\nconst FilterSidebar = (props) => (\n\t<Card>\n\t\t<CardContent>\n\t\t\t<FilterLiveSearch source=\"id\" />\n\t\t\t<ProviderFilter {...props}/>\n\t\t\t<HasReconId {...props}/>\n\t\t</CardContent>\n\t</Card>\n);\n\nconst Ops=({record, ...rest})=>(\n\trecord.recon_id?null:<Button label=\"Settle\"></Button>\n)\nconst ReconList = (props) => {\n\tconst dp=useDataProvider();\n\tconst [providers, setProviders] =useState();\n\n\tconst notify=useNotify(); \n\n\tuseEffect(()=>{\n\t\tdp.getList('providers')\n\t\t.then(({data})=>{\n\t\t\tsetProviders(data);\n\t\t}).catch((e)=>{\n\t\t\tnotify(e.message, 'warning');\n\t\t})\n\t}, []);\n\t\n\tif (!providers) return <Loading />\n\n\treturn (<List {...props} resource=\"bills\" aside={<FilterSidebar providers={providers} {...props}/>} filterDefaultValues={{unsettled:true}} actions={<ReconActions providers={providers} {...props}/>} bulkActionButtons={<PostBulkActionButtons {...props} />} exporter={false}  title='人工对账' sort={{ field: 'time', order: 'DESC' }}>\n\t\t<ExtendedDatagrid>\n\t\t\t<TextField source=\"id\"/>\n\t\t\t<TextField source=\"merchantName\" label=\"商户\"/>\n\t\t\t<TextField source=\"providerOrderId\" label=\"供应商订单\"/>\n\t\t\t<TextField source=\"provider\" label=\"供应商\"/>\n\t\t\t<NumberField source=\"money\" footerSource=\"money\"/>\n\t\t\t<TextField source=\"currency\"/>\n\t\t\t<DateTimeField source=\"time\" label=\"创建时间\"/>\n\t\t\t<TextField label=\"对账ID\" source=\"recon_id\" alwaysOn={true}/>\n\t\t\t<Ops alwaysOn={true}/>\n\t\t</ExtendedDatagrid>\n\t</List>);\n}\n\nexport default {\n\tlist:ReconList,\n}","import Recon from './recon-page';\nimport ReconManual from './recon-manual';\n\nexport default {\n    Recon:Recon,\n    ReconManual:ReconManual,\n} \n","import React, {useEffect, useState} from 'react'\nimport { \n\tTitle, useDataProvider, useGetIdentity, useRefresh\n} from 'react-admin';\nimport {Button, Card, CardHeader, CardContent, Grid, Typography, Divider, makeStyles, Collapse} from '@material-ui/core';\nimport Alert from '@material-ui/lab/Alert';\n\nconst useStyles = makeStyles((theme) => ({\n  mb2:{\n\t  marginBottom:'2em',\n  },\n  header:{\n\tborderBottom: '1px solid #e9ecef',\n\tdisplay: 'flex',\n    fontSize: '1.25em',\n    margin: '0px',\n    minHeight: '64px',\n    overflow: 'hidden',\n    padding: '0 16px',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    width: '100%'\n  },\n  item: {\n    color: '#333',\n    padding: '15px 40px 0px 30px',\n    'margin-bottom': '15px',\n  },\n  subtitle :{\n\tdisplay: 'block',\n    overflow: 'visible',\n    color: '#333',\n    'margin-bottom': '10px',\n    'margin-top': 0,\n    'font-size': '32px' \n  },\n  paper: {\n    padding: theme.spacing(2),\n    margin: 'auto',\n    maxWidth: 500,\n  },\n  image: {\n    width: 128,\n    height: 128,\n  },\n  img: {\n    margin: 'auto',\n    display: 'block',\n    maxWidth: '100%',\n    maxHeight: '100%',\n  },\n}));\n\nconst DisableDebugMode=({user, ...rest})=>{\n\tconst dp=useDataProvider(), refresh=useRefresh();\n\tconst [disableAlert, setDisableAlert]=useState();\n\tconst action=<Button color=\"inherit\" size=\"small\" onClick={()=>{\n\t\tdp.update('users', {data:{debugMode:false}})\n\t\t.then(()=>{\n\t\t\tsetDisableAlert(true)\n\t\t})\n\t}}>DISABLE DEBUG</Button>\n\treturn <Collapse in={!disableAlert && user && user.debugMode} >\n\t\t<Alert severity=\"warning\" variant=\"filled\" {...rest} action={action}>您正在使用调试接口，在正式上线之前请务必关闭调试模式</Alert>\n\t</Collapse>\n}\nconst DashboardShow =({options, permissions, ...rest})=> {\n\tvar classes=useStyles();\n\tconst { identity } = useGetIdentity();\n\tconst dp=useDataProvider();\n\tvar [user, setUser]=useState();\n\tuseEffect(()=>{\n\t\tif (identity && identity.acl=='merchant') {\n\t\t\tdp.getOne('users', {id:identity.id})\n\t\t\t.then(({data})=>setUser(data))\n\t\t\t.catch(()=>{})\n\t\t}\n\t}, [identity]);\n\n    return (\n\t// <Show {...props} id=\"dummy\" title=\"对接文档\">\n\t// \t{/* <SimpleShowLayout>\n    //         <ReactMarkdown>\n    //             Test\n    //         </ReactMarkdown>\n\t// \t</SimpleShowLayout> */}\n\t// \t<MarkDownView />\n\t// </Show>\n\t<div className=\"show-page\">\n\t\t<DisableDebugMode user={user} className={classes.mb2}/>\n\t\t<Title\n\t\t\tdefaultTitle={options.label}\n\t    />\n\t\t{user?(<Card>\n\t\t\t<CardHeader title=\"Summary\" className={classes.header}/>\n\t\t\t<Grid container direction=\"row\">\n\t\t\t\t<Grid item xs={3} className={classes.item}>\n\t\t\t\t\t<Typography variant=\"subtitle1\" className={classes.subtitle}>{user.balance||0}</Typography>\n\t\t\t\t\t<Typography variant=\"body2\" gutterBottom>Balance</Typography>\n\t\t\t\t</Grid>\n\t\t\t\t<Divider orientation=\"vertical\" flexItem />\n\t\t\t\t<Grid item xs={3} className={classes.item}>\n\t\t\t\t\t<Typography variant=\"subtitle1\" className={classes.subtitle}>{user.count||0}</Typography>\n\t\t\t\t\t<Typography variant=\"body2\" gutterBottom>Total Transaction</Typography>\n\t\t\t\t</Grid>\n\t\t\t\t<Divider orientation=\"vertical\" flexItem />\n\t\t\t\t<Grid item xs={3} className={classes.item}>\n\t\t\t\t\t<Typography variant=\"subtitle1\" className={classes.subtitle}>{user.receivable||0}</Typography>\n\t\t\t\t\t<Typography variant=\"body2\" gutterBottom>Receivable</Typography>\n\t\t\t\t</Grid>\n\t\t\t</Grid>\n\t\t</Card>)\n\t\t:null\n\t\t}\n\t</div>\n)}\n\nexport default {\n\tlist:DashboardShow,\n}","import React, {useEffect, useState} from 'react'\nimport { \n\tSimpleForm, SelectInput, TextInput, useDataProvider, useListContext, useNotify, Toolbar, NumberInput, Loading, Title\n} from 'react-admin';\nimport {useFormState} from 'react-final-form';\nimport {Card, Button, Dialog, DialogContent, DialogTitle, DialogActions, makeStyles} from '@material-ui/core';\nimport QRCode from 'qrcode.react';\nimport md5 from 'md5';\nimport Qs from 'querystring';\nimport url from 'url';\nimport sortObj from 'sort-object';\nimport MonetizationOnIcon from '@material-ui/icons/MonetizationOn';\nimport CropFreeIcon from '@material-ui/icons/CropFree';\n\nconst useStyles = makeStyles((theme) => ({\n  qrcode: {\n    display: 'flex',\n    flexDirection: 'column',\n    margin: 'auto',\n    width: 'fit-content',\n  },\n    leftIcon: {\n        marginRight: theme.spacing(1),\n    },\n}));\n\nconst Go=({providers, users})=>{\n    var {values}=useFormState();\n    const notify=useNotify();\n    const [qr, setQR]=useState();\n    const [open, setOpen] =useState();\n    const classes = useStyles();\n\n    const get_url=(cb)=>{\n        var partner=users.find(u=>u.id==values.partner);\n        if (!partner) return notify('no such partner', 'error');\n        var apiUrl=window.location.origin+'/';\n        if (window.location.search) {\n            var {server}=Qs.parse(window.location.search.slice(1));\n            if (server) apiUrl=url.format({protocol:window.location.protocol, host:server});\n        }\n        var now=new Date();\n        var params={\n            cb_url:apiUrl+'demo/result',\n            currency:'CNY',\n            partnerId:partner.merchantid,\n            money:values.money,\n            outOrderId:'TESTORDER'+now.getTime(),\n            return_url:window.location.href,\n            time:now.getTime(),\n            userId:values.userId,\n            provider:values.provider\n        };\n        if (!params.userId || !params.money) return notify('请正确填写参数', 'warning');\n        var key=partner.key;\n        params.sign=md5(key+Qs.stringify(sortObj(params)));\n        fetch(apiUrl+'forecore/order?'+Qs.stringify(params), {mode: 'cors',})\n        .then(response=>response.json())\n        .then(({err, detail, url})=>{\n            if (err) return notify(detail||err, 'warning');\n            cb(null, url);\n        })\n        .catch((e)=>notify(e.message, 'warning'))\n    }\n\n    const handleClick=()=>{\n        get_url((err, link)=>{\n            window.location.href=link;\n        })\n    }\n    const handleQR=()=>{\n        get_url((err, link)=>{\n            setQR(link);\n            setOpen(true);\n        })\n    }\n    const handleClose=()=>{\n        setQR(null);\n    }\n    return (\n        <>\n        <Dialog open={!!qr} onClose={handleClose} maxWidth=\"sm\">\n            <DialogTitle>Scan me</DialogTitle>\n            <DialogContent><QRCode className={classes.qrcode} value={qr||''} size={256}/></DialogContent>\n            <DialogActions>\n                <Button onClick={handleClose} color=\"primary\">\n                    Close\n                </Button>\n            </DialogActions>\n        </Dialog>\n        <Toolbar>\n            <Button\n                variant=\"contained\"\n                type=\"button\"\n                color=\"primary\"\n                aria-label=\"Recharge\"\n                onClick={handleClick}\n            >\n                <MonetizationOnIcon className={classes.leftIcon}/>Jump to the url\n            </Button>\n            <Button variant=\"contained\" type=\"button\" color=\"primary\" aria-label=\"QRcode\" onClick={handleQR}><CropFreeIcon  className={classes.leftIcon}/>Make a QRCode</Button>\n        </Toolbar>\n        </>\n    )\n}\n\nconst QRDialog=({open, onClose})=>{\n    if (!open) return null;\n    return <Dialog open={open} onClose={onClose}>\n        <DialogContent>ttt</DialogContent>\n    </Dialog>\n}\nconst Demo =({options, permissions, ...rest})=> {\n\tconst dp=useDataProvider();\n\tvar [providers, setProviders]=useState();\n    var [users, setUsers] =useState();\n\n\tuseEffect(()=>{\n        dp.getList('providers')\n        .then(({data})=>setProviders(data))\n        .catch(()=>{})\n\n        dp.getList('users', {filter:{acl:'merchant'}})\n        .then(({data})=>setUsers(data))\n        .catch(()=>{})\n\t}, []);\n\n    return (\n        <>\n        <Card>\n            <Title defaultTitle={options.label} />\n            {\n                (providers==null || users==null)?<Loading />\n                :\n                <SimpleForm toolbar={<Go providers={providers} users={users}/>} submitOnEnter={false}>\n                    <SelectInput source=\"partner\" label=\"Partner\" choices={users}/>\n                    <TextInput source=\"userId\" label=\"UserId\"/>\n                    <NumberInput source=\"money\" label=\"money\" />\n                    {(permissions=='merchant' || permissions=='agent')?\n                        null:\n                        <SelectInput source=\"provider\" label=\"Provider\" choices={providers.map(p=>({id:p.name, name:p.name}))} />\n                    }\n                </SimpleForm>\n            }\n        </Card>\n        </>\n)}\n\nexport default {\n\tlist:Demo,\n}","\nexport default (apiUrl) => ({\n    // called when the user attempts to log in\n    login: ({ username, password}) => {\n        return fetch(apiUrl+'/admin/login', {\n            body:JSON.stringify({u:username, p:password}),\n            method:'PUT',\n            headers: new Headers({\n                'Content-Type': 'application/json'\n            })\n        }).then(res=>res.json())\n        .then(({err, a, o})=>{\n            if (err) return  Promise.reject(err);\n            localStorage.setItem('userInfo', JSON.stringify(o));\n            localStorage.setItem('accToken', a);\n            return Promise.resolve();\n        }).catch((e)=>{\n            if (typeof e==='string') return Promise.reject(e);\n            if (typeof e==='object') {\n                return Promise.reject('the server is unreachable right now')\n            }\n            return Promise.reject(e.toString());\n        })\n    },\n    // called when the user clicks on the logout button\n    logout: () => {\n        localStorage.removeItem('accToken');\n        localStorage.removeItem('userInfo');\n        return Promise.resolve();\n    },\n    // called when the API returns an error\n    checkError: ({ status }) => {\n        if (status === 401 || status === 403) {\n            localStorage.removeItem('accToken');\n            localStorage.removeItem('userInfo');\n            return Promise.reject();\n        }\n        return Promise.resolve();\n    },\n    // called when the user navigates to a new location, to check for authentication\n    checkAuth: () => {\n        return localStorage.getItem('accToken')\n            ? Promise.resolve()\n            : Promise.reject();\n    },\n    // called when the user navigates to a new location, to check for permissions / roles\n    getPermissions: () => {\n        var u=localStorage.getItem('userInfo');\n        try {\n            u=JSON.parse(u);\n            return Promise.resolve(u.acl);\n        } catch(e) {\n            return Promise.reject();\n        }\n    },\n    getIdentity: () =>{\n        var u=localStorage.getItem('userInfo');\n        try {\n            u=JSON.parse(u);\n            return Promise.resolve({fullName:u.name, id:u._id, acl:u.acl})\n        } catch(e) {\n            return Promise.reject()\n        }\n    }\n});","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","export default \"Sinopay 四方接口\\n===========\\n\\n1. 下单\\n---------------\\n>http://**url**/forecore/order\\n\\nparameters:\\n\\n| name | desc |\\n| -------- | ----------------------------------------------- |\\n| cb_url   | 充值结果回调地址，以http或https开头，如 http://mydomain.com/pay/result |\\n| currency | 充值币种，取决于您接入的通道不同，目前支持 CAD，USD, CNY，IDR，THB |\\n| money    | 充值数量，以元为单位，如 1.25，请注意这里直接以当地货币计价，不是人民币 |\\n| country  | 国家/地区，具体参数询问对接小伙伴 |\\n| outOrderId \\t| 你方系统的订单号，必须是唯一的 |\\n| return_url \\t| 充值界面的回跳地址，一般就显示充值成功 |\\n| time \\t| 当前时间，毫秒单位 |c\\n| userId \\t| 你方系统中充值用户的id |\\n| type \\t| 可以是 WECHATPAYH5，ALIPAYH5，UNIONPAYH5，USERSELECT, 不同通道支持不一样，请具体询问对接小伙伴 |\\n\\nreturn\\n```\\n\\terr, 错误，错误可能是字符串，对象，数字等，一般会有可以阅读部分。如果有err，以下参数全部不存在\\n\\toutOrderId, 你方系统的订单\\n\\torderId， Sinopay的订单id\\n\\tproviderOrderId, 提供方的订单id,请注意有的供应商不会给出这个参数\\n\\turl, 支付用地址, 这里有两种可能，\\n\\t\\t 1. 您可以直接跳往这个地址进行具体支付\\n\\t\\t 2. 如果是WECAHATPAYH5，ALIPAYH5，您应该将这个地址显示成二维码提供给用户\\n\\t\\t 3. 具体的处理方式请咨询对接小伙伴\\n```\\n\\n2. 查询\\n---------------\\n>http://**url**/forecore/queryOrder\\n\\nparameters\\n\\n| 参数 | 描述 |\\n| ------- | ----- |\\n| outOrderId | 你方订单id |\\n\\n\\nreturn\\n\\n| 参数 | 描述 |\\n| ------- | ----- |\\n| err | 错误，错误可能是字符串，对象，数字等，一般会有可以阅读部分。如果有err，以下参数全部不存在 |\\n|outOrderId|你方订单id|\\n|orderId| Sinopay订单id|\\n|providerOrderId| 提供方的订单id|\\n|money| 订单要求支付的金额|\\n|received| 用户支付的金额|\\n|currency| 币种|\\n|status| 订单状态|\\n\\n\\n1. 退单\\n---------------\\n>http://**url**/forecore/refund\\n\\n请注意不是每个通道都支持退单\\n\\nparameters\\n| 参数 | 描述 |\\n| ------- | ----- |\\n| outOrderId | 你方订单id |\\n| money | 退款数量，元为单位 |\\n\\n\\nreturn\\n\\n| 参数 | 描述 |\\n| ------- | ----- |\\n|err |错误，错误可能是字符串，对象，数字等，一般会有可以阅读部分。如果有err，以下参数全部不存在\\n|orderId\\t\\t\\t| Sinopay order No.\\n|outOrderId\\t \\t| Original Order No. from your System.\\n|providerOrderId\\t| The provider transaction No.\\n|trans_status\\t| Transaction status \\n|\\t\\t\\t\\t|\\tREFUNDING - transaction created, waiting for refund\\n|\\t\\t\\t\\t|\\tCLOSE - transaction closed, refund failed.\\n|\\t\\t\\t\\t|\\tSUCCESS - Refund success\\n\\n\\n4. 代付\\n-----------------------\\n>http://**url**/forecore/disburse\\n\\n请注意不是每个通道都支持代付\\n\\nparameters\\n| 参数 | 描述 |\\n| ------- | ----- |\\n| outOrderId | 你方订单id |\\n| money | 付款数量，元为单位 |\\n| bank  | 收款银行，如：中国银行 |\\n| branch | 支行  |\\n| owner | 收款人姓名 |\\n| account | 收款账号 |\\n| cb_url | url，代付结果会通知到这个地址 |\\n\\nreturn\\n\\n| 参数 | 描述 |\\n| ------| ---------|\\n| err | 错误，错误可能是字符串，对象，数字等，一般会有可以阅读部分。如果有err，以下参数全部不存在|\\n| orderId\\t\\t| Sinopay Transaction No.|\\n| outOrderId \\t| Original Order No. from your System. |\\n| providerOrderId\\t| The disbursement transaction No. in the provider’s system. |\\n| trans_status\\t| Transaction status \\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t|\\n|\\t\\t\\t\\t|\\tCLOSE - transaction closed, refund failed.\\t\\t\\t\\t\\t\\t|\\n|\\t\\t\\t\\t|\\tSUCCESS - success\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t|\\n|\\t\\t\\t\\t|\\tPENDING - Wait for comfirmation\\t\\t\\t\\t\\t\\t\\t\\t\\t|\\n\\n\\n附录\\n===============================\\ncb_url的说明\\n-------------------------\\n充值成功会以post方式回调这个接口，并且传递以下参数\\n\\n| 参数 | 描述 |\\n| ------- | ----- |\\n| outOrderId\\t| 你方系统产生的订单id |\\n| orderId\\t\\t| Sinopay的订单id |\\n| money\\t\\t| 支付的金额 |\\n| currency\\t| 币种 |\\n| sign\\t\\t| 以md5做的签名 |\\n\\n **注意实际传输的参数可能不止上面列出的5个，所有参数（除了sign）都参与签名** \\n\\n收到这个调用之后，请返回一个json对象，如果有错，返回``` {err:'something wrong'} ```\\n如果正常处理完成，返回任意的json对象，如 ``` {result:'success'} ```\\n\\n**代付的cb_url收到的参数如下**\\n| 参数 | 描述 |\\n|-----|-----|\\n| orderId\\t\\t| Sinopay Transaction No.|\\n| outOrderId \\t| Original Order No. from your System. |\\n| providerOrderId\\t| The disbursement transaction No. in the provider’s system. |\\n| status\\t\\t| SUCCESS - success, the transfer has been delivered |\\n|               | FAILED - transfer failed, 转账金额已退还，不会收取手续费 |\\n返回处理与充值的cb_url一致\\n\\n\\n调用接口\\n-------------------------\\n所有接口都同时支持post或者get方式，如果选择post方式，以application/json方式上传参数。任何接口的返回值都是一个json对象，如果这个json中包含有err字段，那意味着调用出错。\\n\\n调用上述接口中的任何一个，都需要附上公共参数，如下\\n\\n| 参数 | 描述 |\\n| ------- | ----- |\\n|partnerId\\t| 合作商id， Sinopay分配的\\n|sign\\t\\t| 签名，算法见下一节\\n\\n签名算法\\n-------------------------\\n签名是md5\\n\\n我们以一个例子来说明签名的构成。假定我们要传递的参数如下：\\n```outOrderId='abc123', money=1.00, partnerId='p001', type='WECHATPAYH5', currency='USD'```\\n\\n签名的key是``` 123456 ```\\n\\n1. 将所有待传递的参数按照参数名升序排列,得到\\n   ``` currency='USD', money=1.00, outOrderId='abc123', partnerId='p001', type='WECHATPAYH5'  ```\\n2. 所有的值做urlEncode，得到\\n\\t``` currency='USD', money=1.00, outOrderId='abc123', partnerId='p001', type='WECHATPAYH5'  ```\\n3. 输出```key=value```并用&连接成字符串，得到\\n\\t``` currency=USD&money=1.00&outOrderId=abc123&partnerId=p001&type=WECHATPAYH5 ```\\n4. 在字符串前面加上key， 得到\\n\\t``` 123456currency=USD&money=1.00&outOrderId=abc123&partnerId=p001&type=WECHATPAYH5 ```\\n5. 对这个字符串计算md5, 得到\\n   ```a90a66d09bde8a32725c9efde082fae1```\\n6. 把这个结果填给sign，那么最后要传输的数据\\n   ```\\n   {\\n\\t\\toutOrderId:'abc123', \\n\\t\\tmoney:'1.00', \\n\\t\\tpartnerId:'p001', \\n\\t\\ttype:'WECHATPAYH5', \\n\\t\\tcurrency:'USD',\\n\\t\\tsign:'a90a66d09bde8a32725c9efde082fae1'\\n   }\\n   ```\\n\\n关于接口的调试模式\\n---------------------------\\n为了方便对接，商户接口总是以调试模式初始的。在这个模式下，如果sign计算错误，接口会返回正确的sign，并提示你sign是如何计算出来的。\\n```\\n\\\"err\\\":{\\n\\t\\\"err\\\": \\\"签名错误\\\",\\n\\t\\\"wanted\\\": \\\"f7645b2b5eb2fb9c044f61164841d35a\\\",\\n\\t\\\"str\\\": \\\"9923c58d464731817b701dc8b074bd5779d7acd7cb_url=http%3A%2F%2F127.0.0.1%2Ftest&country=ID&currency=IDR&money=1000&outOrderId=111444&partnerId=605c57ce8121da423bc7129f&time=153442&userId=aaa\\\"\\n}\\n```\\nwanted是系统计算的sign，str是用来计算sign的字符串，你可以检查这个字符串和你自己生成的字符串的差异从而快速定位问题。\\n\\n但是，这个操作会暴露你的key，所以在正式上线之前，请务必关闭调试接口。在你的后台的首页上，我们提供了关闭按钮。\\n\\n关于结算货币\\n---------------------------\\n如果下单时使用外币，结算也会结算外币。如果您需要以人民币计价，则必须在下单时按照实时汇率换算，比如美元汇率是6.45，如果要生成100人民币的订单，你应该下100/6.45=15.50美元的支付订单。\\n\\n\\n使用微信支付\\n---------------------------\\n下单外币时系统返回的url只能在微信浏览器中打开付款，如果在chrome之类的系统浏览器中会显示\\n> 请使用微信浏览器打开\\n\\n这显然不是你想看到的。那么处理方式是\\n1. 将这个url显示成二维码，让用户用微信扫码，\\n   - 如果在pc端，直接显示这个二维码\\n   - 如果在手机端，提示用户截屏，在微信里扫一扫，选择相册\\n\\n下单人民币时不存在这个问题\";"],"sourceRoot":""}