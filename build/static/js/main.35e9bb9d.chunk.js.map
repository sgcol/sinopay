{"version":3,"sources":["data-provider.js","extends/fields.js","users.js","managers/create.js","managers/index.js","agents.js","App.js","extends/datagrid/index.js","extends/datagrid/Datagrid.js","extends/pureChip.js","bills.js","providers/index.js","providers/list.js","docs.js","statements.js","financial/recon-page.js","financial/recon-manual.js","financial/index.js","dashboard.js","demo.js","auth.js","serviceWorker.js","index.js","../docs/四方接口.md"],"names":["baseUrl","_id2id","arr","forEach","item","_id","id","undefined","id2_id","obj","myFetchJson","url","options","headers","set","localStorage","getItem","Headers","accToken","fetchUtils","fetchJson","then","result","json","err","Promise","reject","HttpError","resolve","mapResource","name","DateTimeField","t","record","source","Date","toLocaleDateString","toTimeString","replace","EscapedTextField","str","decodeURIComponent","path","require","objPath","SaveWithNoteButton","handleSubmitWithRedirect","acl","props","redirect","form","useForm","handleClick","useCallback","formdata","getState","values","pwd","salt","Math","random","toString","substring","change","md5","Number","share","toFixed","providers","prd","enabled","SaveButton","PostToolbar","Toolbar","label","submitOnEnter","Providers","contents","eles","enable","get","push","BooleanInput","parse","v","format","FormDataConsumer","formData","opt","SelectInput","choices","map","params","p","TextInput","CreateAndEditView","method","dp","useDataProvider","useState","agents","setAgents","setProviders","loading","setLoading","error","setError","useEffect","getList","filter","data","catch","e","Loading","Error","LoginName","TabbedForm","toolbar","FormTab","type","NumberInput","defaultValue","minimumFractionDigits","maximumFractionDigits","UserListActions","basePath","TopToolbar","CreateButton","UserCreator","Create","initialValues","debugMode","UserEdit","Edit","UserShow","Show","SimpleShowLayout","TextField","NumberField","useStyles","makeStyles","theme","message","textAlign","opacity","palette","margin","color","text","primary","icon","width","height","marginTop","Empty","useListContext","classes","useResourceContext","translate","useTranslate","className","Typography","variant","paragraph","list","handleClose","history","this","Fragment","List","exporter","title","actions","empty","Datagrid","rowClick","BooleanField","style","EditButton","ShowButton","match","Drawer","open","anchor","onClose","onCancel","isMatch","location","isExact","basename","pathname","React","Component","SimpleForm","ManagerCreator","ManagerEdit","ListActions","goBack","apiUrl","ExtendedDatagrid","forwardRef","ref","useDatagridStyles","body","DatagridBody","children","expand","hasBulkActions","hover","isRowSelectable","resource","rowStyle","size","footerResource","rest","currentSort","ids","loaded","onSelect","onToggleItem","selectedIds","setSort","version","total","useVersion","updateSort","event","stopPropagation","newField","currentTarget","dataset","field","newOrder","order","handleSelectAll","target","checked","all","concat","includes","dataProvider","footerData","setFooterData","footerLoaded","setFooterLoaded","getOne","filterValues","DatagridLoading","nbChildren","Children","count","shown","sample","i","length","toArray","alwaysOn","hasOwnProperty","Table","classnames","table","sanitizeListRestProps","TableHead","thead","TableRow","row","headerRow","TableCell","padding","headerCell","expandHeader","Checkbox","every","onChange","index","isValidElement","DatagridHeaderCell","isSorting","sortBy","cloneElement","tbody","TableFooter","footerText","footerSource","ChipField","Chip","chip","sanitizeFieldRestProps","BillFilter","notify","useNotify","setMerchants","Filter","DateTimeInput","$ne","OptionButtons","permissions","dispatch","useDispatch","TakeAction","uri","fetchApi","action","JSON","stringify","ButtonGroup","aria-label","Button","onClick","refreshView","filters","bulkActionButtons","sort","show","ArrayField","SingleFieldList","mdsrc","default","header","borderBottom","display","fontSize","minHeight","overflow","textOverflow","whiteSpace","subtitle","paper","spacing","maxWidth","image","img","maxHeight","renderers","code","language","value","dark","identity","useGetIdentity","userKey","setKey","Title","defaultTitle","Card","CardHeader","Grid","container","direction","xs","gutterBottom","key","Divider","orientation","flexItem","merchantid","CardContent","plugins","gfm","renders","withStyles","root","breakpoints","up","marginRight","down","MuiCard","DateField","ReferenceField","reference","link","_noop","actionButton","marginBottom","ReconActions","refresh","useRefresh","onSubmit","handleSubmit","Box","alignItems","mb","component","mr","DateInput","a","date","ret","modified","create","useRedirect","end","CloudUpload","DoneAll","PostBulkActionButtons","ProviderFilter","FilterList","SportsMotorsports","FilterListItem","provider","HasReconId","unsettled","FilterSidebar","FilterLiveSearch","Ops","recon_id","Recon","ReconManual","aside","filterDefaultValues","mb2","DisableDebugMode","user","Alert","severity","setUser","balance","receivable","Go","users","useFormState","console","log","partner","find","u","window","origin","search","server","Qs","slice","protocol","host","now","cb_url","currency","partnerId","money","outOrderId","getTime","return_url","href","time","userId","sign","sortObj","fetch","mode","response","detail","setUsers","spec_server","URLSearchParams","indexOf","hostname","port","httpClient","offset","limit","pagination","page","perPage","query","rows","getMany","getManyReference","update","updateMany","delete","deleteMany","DataProvider","App","Admin","authProvider","login","username","password","res","o","setItem","logout","removeItem","checkError","status","checkAuth","getPermissions","getIdentity","fullName","Resource","SupervisorAccount","Managers","menuParent","Storefront","Users","BusinessCenter","financial","DashbaordPage","Dashboard","Receipt","Bills","Assessment","Statements","Docs","Demo","Boolean","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.35e9bb9d.chunk.js","sourcesContent":["import { stringify } from 'query-string';\nimport { fetchUtils } from 'ra-core';\nimport { HttpError } from 'react-admin';\n\n/**\n * Maps react-admin queries to a my api\n *\n * This REST dialect is similar to the one of FakeRest\n *\n * @see https://github.com/marmelab/FakeRest\n *\n * @example\n *\n * getList     => GET http://my.api.url/posts?sort=title&order=asc&limit=24&offset=0\n * getOne      => GET http://my.api.url/posts/123\n * getMany     => GET http://my.api.url/posts?filter={id:[123,456,789]}\n * update      => PUT http://my.api.url/posts/123\n * create      => POST http://my.api.url/posts\n * delete      => DELETE http://my.api.url/posts/123\n *\n * @example\n *\n * import * as React from \"react\";\n * import { Admin, Resource } from 'react-admin';\n * import dataProvider from './data-provider';\n *\n * import { PostList } from './posts';\n *\n * const App = () => (\n *     <Admin dataProvider={dataProvider('http://path.to.my.api/')}>\n *         <Resource name=\"posts\" list={PostList} />\n *     </Admin>\n * );\n *\n * export default App;\n */\n\nfunction _id2id(arr) {\n    arr.forEach((item)=>{\n        if (item._id!=null) {\n            item.id=item._id;\n            item._id=undefined;\n        }\n    })\n    return arr;\n}\nfunction id2_id(obj) {\n    if (obj.id!=null) {\n        obj._id=obj.id;\n        obj.id=undefined;\n    }\n    return obj;\n}\n\nfunction myFetchJson(url, options) {\n    options=options||{};\n    if (options.headers) {\n        options.headers.set('accToken', localStorage.getItem('accToken'));\n    } else {\n        options.headers=new Headers({\n            accToken:localStorage.getItem('accToken')\n        })\n    }\n    return fetchUtils.fetchJson(url, options).then((result)=>{\n        if (result.json && result.json.err) return Promise.reject(new HttpError(result.json.err, 500, result.json));\n        return Promise.resolve(result)\n    })\n}\nfunction mapResource(name) {\n    switch(name) {\n        case 'managers':\n        case 'agents':\n            return 'users';\n        default:\n            return name;\n    }\n}\n\nvar baseUrl;\nexport const fetchApi=(url, options) =>{\n    if (url[0]==='/') var uri=`${baseUrl}${url}`;\n    else uri=`${baseUrl}/${url}`;\n    return myFetchJson(uri, options);\n};\n/**\n * @param  {} apiUrl\n * @param  {} httpClient=fetchUtils.fetchJson\n * @returns DataProvider\n */\nexport default (apiUrl, httpClient = myFetchJson) => {\n    baseUrl=apiUrl;\n    return {\n        /**\n        * @typedef GetListParams\n        * @type {object}\n        * @property { page: {int} , perPage: {int} } pagination\n        * @property { field: {string}, order: {string} } sort\n        * @property {object} filter\n        * @param  {string} resource\n        * @param  {GetListParams} params\n        */\n        getList: (resource, params) => {\n            var offset,limit, sort, order, filter;\n            if (params) {\n                if (params.pagination) {\n                    const { page, perPage } = params.pagination;\n                    offset=(page - 1) * perPage;\n                    limit=perPage;\n                }\n                if (params.sort) {\n                    sort = params.sort.field;\n                    order = params.sort.order;\n                }\n                if (params.filter) {\n                    filter=JSON.stringify(id2_id(params.filter));\n                }\n            }\n            const query = {\n                offset,\n                limit,\n                sort,\n                order,\n                filter\n            };\n            const url = `${apiUrl}/${mapResource(resource)}?${stringify(query)}`;\n\n            return httpClient(url, {\n                // Chrome doesn't return `Content-Range` header if no `Range` is provided in the request.\n                // headers: new Headers({\n                //     Range: `${mapResource(resource)}=${rangeStart}-${rangeEnd}`,\n                // }),\n            }).then(({ headers, json }) => {\n                // if (!headers.has('content-range')) {\n                //     throw new Error(\n                //         'The Content-Range header is missing in the HTTP Response. The simple REST data provider expects responses for lists of resources to contain this header with the total number of results to build the pagination. If you are using CORS, did you declare Content-Range in the Access-Control-Expose-Headers header?'\n                //     );\n                // }\n                _id2id(json.rows);\n                return {\n                    data: json.rows,\n                    total: json.total,\n                };\n            });\n        },\n        /**\n        * @typedef GetOneParams\n        * @type {object}\n        * @property { string } id\n        * @param  {string} resource\n        * @param  {GetOneParams} params\n        */\n        getOne: (resource, params) => {\n            return httpClient(`${apiUrl}/${mapResource(resource)}?${stringify({filter:JSON.stringify(id2_id(params))})}`).then(({ json }) => {\n                if (json.err) throw new HttpError(json.err, 500, json);\n                var data=json.rows[0];\n                if (!data) return {data:null};\n                data.id=data._id;\n                data._id=undefined;\n                return {data};\n            })\n        },\n\n        getMany: (resource, params) => {\n            var {ids:_id, ...rest}=params\n            const query = {\n                filter: JSON.stringify({_id, ...rest}),\n            };\n            const url = `${apiUrl}/${mapResource(resource)}?${stringify(query)}`;\n            return httpClient(url).then(({ json }) => {\n                // _id2id(json.rows);\n                var ids={};\n                json.rows.forEach(v=>ids[v._id]=v);\n                var data=params.ids.map(id=>({id, ...ids[id]}))\n                return {\n                    data,\n                    total: params.ids.length\n                }\n            }) \n        },\n\n        /**\n        * @typedef GetManyReferenceParams\n        * @property {string} target \n        * @property {mixed} id\n        * @property { {int} page , {int} perPage } pagination\n        * @property { {string} field , {string} order } sort\n        * @property {Object} filter\n        * @param {string} resource\n        * @param {GetManyReferenceParams} params\n        */\n        getManyReference: (resource, params) => {\n            const { page, perPage } = params.pagination;\n            const { field:sort, order } = params.sort;\n            const query = {\n                sort,\n                order,\n                offset: (page - 1) * perPage,\n                limit: perPage,\n                filter: JSON.stringify({\n                    ...id2_id(params.filter),\n                    [params.target]: params.id,\n                }),\n            };\n            const url = `${apiUrl}/${mapResource(resource)}?${stringify(query)}`;\n\n            return httpClient(url).then(({ json }) => {\n                _id2id(json.rows);\n                return {\n                    data: json.rows,\n                    total: json.total,\n                };\n            });\n        },\n\n        update: (resource, params) => {\n            params.data.id=undefined;\n            params.data._id=undefined;\n            return httpClient(`${apiUrl}/${mapResource(resource)}/${params.id}`, {\n                method: 'PUT',\n                body: JSON.stringify(params.data),\n            }).then(({ json }) => { \n                return {data: json} \n            })\n        },\n\n        // simple-rest doesn't handle provide an updateMany route, so we fallback to calling update n times instead\n        updateMany: (resource, params) => {\n            params.data.id=undefined;\n            params.data._id=undefined;\n            return httpClient(`${apiUrl}/${mapResource(resource)}/${JSON.stringify(params.ids)}`, {\n                method: 'PUT',\n                body: JSON.stringify(params.data),\n            }).then(({json}) => { \n                return {data: json}\n            })\n        },\n\n        create: (resource, params) =>\n            httpClient(`${apiUrl}/${mapResource(resource)}`, {\n                method: 'POST',\n                body: JSON.stringify(params.data),\n            }).then(({ json }) => {\n                return {data: { ...params.data, id: json._id }}\n            }),\n\n        delete: (resource, params) => {\n            return httpClient(`${apiUrl}/${mapResource(resource)}/${params.id}`, {\n                method: 'DELETE',\n            }).then(({ json }) => { \n                return {data: json }\n            })\n        },\n\n        // simple-rest doesn't handle filters on DELETE route, so we fallback to calling DELETE n times instead\n        deleteMany: (resource, params) => {\n            return httpClient(`${apiUrl}/${mapResource(resource)}/${JSON.stringify(params.ids)}`, {\n                method: 'DELETE',\n            }).then(({ json }) => {\n                return {data: json} \n            })\n        },\n        actions: (resource, params) =>{\n            var _id=undefined;\n            if (params.id) {\n                _id=decodeURIComponent(params.id);\n                params.id=undefined;\n            }\n            return httpClient(`${apiUrl}/${mapResource(resource)}/${params.method}`, {\n                method:'POST',\n                body:JSON.stringify({_id, ...params})\n            }).then(({json})=>{\n                return {data:json};\n            })\n        },\n    }\n}","import * as React from \"react\";\nimport {TextField} from 'react-admin';\n\nconst timestring =(t)=>{\n\tt=new Date(t);\n\tif (t==='Invalid Date') return 'Invalid Date';\n\treturn t.toLocaleDateString()+' '+ t.toTimeString().replace(/.*(\\d{2}:\\d{2}:\\d{2}).*/, \"$1\");;\n}\nexport const DateTimeField = ({ record = {}, source }) =>\n\t<span>{timestring(record[source])}</span>\n\nexport const EscapedTextField =({record, source, ...rest})=> {\n\tvar str=decodeURIComponent(typeof record==='object'?record[source]:record);\n\t// record={source:str};\n\t// return <TextField record={record} source={source} {...rest} />\t\n\t// return <TextField {...props} />\n\treturn (<span>{str}</span>)\n}\n","import React, { useState, useEffect,useCallback, useResourceContext, useTranslate } from \"react\";\nimport { Drawer, Typography, makeStyles } from '@material-ui/core';\nimport InboxIcon from '@material-ui/icons/Inbox';\nimport { \n\tList, Datagrid, TextField, BooleanField, NumberField, EditButton, ShowButton,\n\tEdit, Create, TabbedForm, FormTab, TextInput, BooleanInput, SelectInput, ReferenceField, NumberInput,\n\tShow, SimpleShowLayout,\n\tLoading, Error,\n\tuseDataProvider, useGetMany,useListContext, \n\tTopToolbar, CreateButton, SaveButton, Toolbar,\n\tFormDataConsumer\n} from 'react-admin';\nimport { useForm } from 'react-final-form';\nimport {DateTimeField, EscapedTextField} from './extends/fields';\nimport { Route } from 'react-router';\nimport md5 from 'md5';\n\nconst path=require('path');\nconst objPath =require('object-path');\n\nconst SaveWithNoteButton = ({ handleSubmitWithRedirect, acl, ...props }) => {\n\t\tconst { redirect } = props;\n\t\tconst form = useForm();\n\t\tconst handleClick = useCallback(() => {\n\t\t\tvar formdata = form.getState().values;\n\t\t\tif (formdata.pwd) {\n\t\t\t\tconst salt= Math.random().toString(36).substring(7);\n\t\t\t\tform.change('salt', salt);\n\t\t\t\tform.change('password', md5(salt+formdata.pwd));\n\t\t\t\tform.change('pwd', undefined);\n\t\t\t}\n\n\t\t\tform.change('share', Number((1-Number(formdata.share)/100).toFixed(4)))\n\n\t\t\tif (acl) form.change('acl', acl)\n\n\t\t\tif (formdata.providers) {\n\t\t\t\tfor (const name in formdata.providers) {\n\t\t\t\t\tvar prd=formdata.providers[name];\n\t\t\t\t\tif (prd.enabled!=null) {\n\t\t\t\t\t\tform.change('providers.'+name+'.disabled', !prd.enabled);\n\t\t\t\t\t\tform.change('providers.'+name+'.enabled', undefined);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\thandleSubmitWithRedirect(redirect);\n\t\t}, [form]);\n\n\t\treturn <SaveButton {...props} handleSubmitWithRedirect={handleClick} />;\n};\nconst PostToolbar = props => {\n\tvar {redirect} =props;\n\treturn (<Toolbar {...props}>\n\t\t\t<SaveWithNoteButton\n\t\t\t\tlabel=\"Save\"\n\t\t\t\tredirect={redirect}\n\t\t\t\tsubmitOnEnter={false}\n\t\t\t\t{...props}\n\t\t\t/>\n\t\t</Toolbar>\n\t);\n}\n\nconst Providers=({contents, ...props}) => {\n\n\tconst form = useForm();\n\tvar formdata = form.getState().values;\n\tvar eles=[];\n\tcontents.providers && contents.providers.forEach((prd)=>{\n\t\tvar enable=!objPath.get(formdata, ['providers', prd.id, 'disabled'], false);\n\t\teles.push((\n\t\t\t<div key={prd.id}>\n\t\t\t<BooleanInput source={`providers.${prd.id}.disabled`} parse={v=>!v} format={v=>!v} label={`${prd.name}`}/>\n\t\t\t<FormDataConsumer>\n\t\t\t\t{\n\t\t\t\t\t({formData, ...rest})=>{\n\t\t\t\t\t\tif (enable) {\n\t\t\t\t\t\t\tvar eles=[];\n\t\t\t\t\t\t\tif (prd.options) {\n\t\t\t\t\t\t\t\tprd.options.forEach((opt)=>{\n\t\t\t\t\t\t\t\t\teles.push((\n\t\t\t\t\t\t\t\t\t\t<SelectInput source={`providers.${prd.id}.${opt.name}`} choices={opt.values.map(v=>({id:v,name:v}))} label={opt.name}/>\n\t\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (prd.params) {\n\t\t\t\t\t\t\t\tprd.params.forEach((p)=>{\n\t\t\t\t\t\t\t\t\teles.push((\n\t\t\t\t\t\t\t\t\t\t<TextInput source={`providers.${prd.id}.${p}`} label={p}/>\n\t\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn eles;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t</FormDataConsumer>\n\t\t\t</div>\n\t\t))\n\t});\n\treturn eles\n}\n\nfunction CreateAndEditView(method, props) {\n\tconst dp=useDataProvider();\n\tconst [agents, setAgents] = useState();\n\tconst [providers, setProviders] =useState();\n\tconst [loading, setLoading] = useState(true);\n\tconst [error, setError] = useState();\n\n\tuseEffect(()=>{\n\t\tdp.getList('users', {filter:{acl:'agent'}})\n\t\t.then(({data})=>{\n\t\t\tsetAgents(data);\n\t\t\tsetLoading(false);\n\t\t})\n\t\t.catch(e=>{\n\t\t\tsetError(e);\n\t\t\tsetLoading(false);\n\t\t});\n\n\t\tdp.getList('providers')\n\t\t.then(({data})=>{\n\t\t\tsetProviders(data);\n\t\t}).catch(e=>{\n\t\t\tsetError(e);\n\t\t})\n\t}, [])\n\tif (loading) return <Loading />\n\tif (error) return <Error />\n\t\n\tif (loading) return <Loading />\n\n\tconst LoginName=(props)=>{\n\t\tif (method==='Create') return <TextInput {...props}/>\n\t\telse return null;\n\t}\n\n\treturn (<TabbedForm toolbar={<PostToolbar />}>\n\t\t\t<FormTab label=\"General\">\n\t\t\t\t<TextInput source=\"name\" label=\"显示名\"/>\n\t\t\t\t<LoginName source=\"id\" label=\"登录名\"/>\n\t\t\t\t<TextInput source=\"pwd\" label=\"密码\" type=\"password\"/>\n\t\t\t\t<BooleanInput source=\"debugMode\" />\n\t\t\t\t<NumberInput source=\"share\" defaultValue={3} options={{ minimumFractionDigits: 2, maximumFractionDigits: 2}}/>\n\t\t\t\t<SelectInput source=\"parent\" choices={agents}/>\n\t\t\t</FormTab>\n\t\t\t<FormTab label=\"Providers\">\n\t\t\t\t<Providers contents={{providers}} />\n\t\t\t</FormTab>\n\t\t</TabbedForm>)\n}\n\nconst UserListActions = ({ basePath }) => (\n  <TopToolbar>\n      <CreateButton basePath={basePath} />\n   </TopToolbar>\n);\n\nexport const UserCreator =props => (<Create {...props} >{CreateAndEditView('Create', {...props, redirect:'list', acl:'merchant', initialValues:{debugMode:true}})}</Create>)\n\nexport const UserEdit = props => (<Edit {...props}>{CreateAndEditView('Edit', {...props, redirect:'list'})}</Edit>)\n\nexport const UserShow =props=> (\n\t<Show {...props}>\n\t\t<SimpleShowLayout>\n\t\t\t<TextField source=\"name\" label=\"显示名\"/>\n\t\t\t<TextField source=\"key\" />\n\t\t\t<TextField label=\"partnerId\" source=\"merchantid\" />\n\t\t\t<NumberField label=\"账户余额\" source=\"balance\" options={{ minimumFractionDigits: 2, maximumFractionDigits: 2}} />\n\t\t\t<NumberField label=\"手续费\" source=\"commission\" options={{ minimumFractionDigits: 2, maximumFractionDigits: 2}}/>\n\t\t</SimpleShowLayout>\n\t</Show>\n)\n\nconst useStyles = makeStyles(\n    theme => ({\n        message: {\n            textAlign: 'center',\n            opacity: theme.palette.type === 'light' ? 0.5 : 0.8,\n            margin: '0 1em',\n            color:\n                theme.palette.type === 'light'\n                    ? 'inherit'\n                    : theme.palette.text.primary,\n        },\n        icon: {\n            width: '9em',\n            height: '9em',\n        },\n        toolbar: {\n            textAlign: 'center',\n            marginTop: '2em',\n        },\n    }),\n    { name: 'RaEmpty' }\n);\n\nconst Empty = props => {\n    const { basePath } = useListContext(props);\n    const resource = useResourceContext(props);\n    const classes = useStyles(props);\n    const translate = useTranslate();\n\n    return (\n        <>\n            <div className={classes.message}>\n                <InboxIcon className={classes.icon} />\n                <Typography variant=\"h4\" paragraph>\n                    {translate(`No partners yet`)}\n                </Typography>\n\t\t\t\t<Typography variant=\"body1\">\n\t\t\t\t\t{translate(``)}\n\t\t\t\t</Typography>\n            </div>\n\t\t\t<div className={classes.toolbar}>\n\t\t\t\t<CreateButton variant=\"contained\" basePath={basePath} />\n\t\t\t</div>\n        </>\n    );\n};\n\nclass UserList extends React.Component {\n\trender() {\n\t\tconst props  = this.props;\n\t\t\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<List {...props} filter={{ acl:'merchant' }} exporter={false} title=\"商户\" actions={<UserListActions />} empty={Empty}>\n\t\t\t\t\t<Datagrid rowClick=\"show\">\n\t\t\t\t\t\t<TextField source=\"name\" label=\"显示名\"/>\n\t\t\t\t\t\t<EscapedTextField source=\"id\" label=\"登录名\"/>\n\t\t\t\t\t\t<DateTimeField source=\"createTime\" label=\"创建时间\"/>\n\t\t\t\t\t\t{/* <TextField source=\"key\" />\n\t\t\t\t\t\t<TextField source=\"merchantid\" /> */}\n\t\t\t\t\t\t<BooleanField source=\"debugMode\" label=\"调试\"/>\n\t\t\t\t\t\t<NumberField source=\"share\" label=\"分成\" options={{style:\"percent\"}}/>\n\t\t\t\t\t\t<NumberField label=\"账户余额\" source=\"balance\" options={{ minimumFractionDigits: 2, maximumFractionDigits: 2}}/>\n\t\t\t\t\t\t<NumberField label=\"手续费\" source=\"commission\" options={{ minimumFractionDigits: 2, maximumFractionDigits: 2}}/>\n\t\t\t\t\t\t<EditButton />\n\t\t\t\t\t\t<ShowButton />\n\t\t\t\t\t</Datagrid>\n\t\t\t\t</List>\n\t\t\t\t<Route path=\"/users/create\">\n\t\t\t\t\t{({ match }) => (\n                        <Drawer\n                            open={!!match}\n                            anchor=\"right\"\n                            onClose={this.handleClose}\n                        >\n                            <UserCreator\n                                // className={classes.drawerContent}\n                                onCancel={this.handleClose}\n                                {...props}\n                            />\n                        </Drawer>\n                    )}\n\t\t\t\t</Route>\n\t\t\t\t<Route path=\"/users/:id/show\">\n\t\t\t\t\t{({match}) => {\n\t\t\t\t\t\tconst id=match && match.params && match.params.id, isMatch=id&&id!=='create';\n\t\t\t\t\t\tif (!isMatch) return null;\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Drawer open={isMatch} anchor=\"right\" onClose={this.handleClose}>\n\t\t\t\t\t\t\t\t{isMatch? <UserShow id={decodeURIComponent(id)} {...props}/>:null}\n\t\t\t\t\t\t\t</Drawer>\n\t\t\t\t\t\t)\n\t\t\t\t\t}}\n\t\t\t\t</Route>\n\n\t\t\t\t<Route path=\"/users/:id\">\n\t\t\t\t\t{({ match , location}) => {\n\t\t\t\t\t\tconst isMatch =\tmatch  && match.params && match.params.id !== 'create';\n\t\t\t\t\t\tif (!isMatch) return null;\n\t\t\t\t\t\tif (!match.isExact && path.basename(location.pathname)!=='1') return null;\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Drawer\n\t\t\t\t\t\t\t\topen={isMatch}\n\t\t\t\t\t\t\t\tanchor=\"right\"\n\t\t\t\t\t\t\t\tonClose={this.handleClose}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{isMatch ? (\n\t\t\t\t\t\t\t\t\t<UserEdit\n\t\t\t\t\t\t\t\t\t\t// className={classes.drawerContent}\n\t\t\t\t\t\t\t\t\t\tid={isMatch ? decodeURIComponent(match.params.id) : null}\n                                        onCancel={this.handleClose}\n\t\t\t\t\t\t\t\t\t\t{...props}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : \n\t\t\t\t\t\t\t\tnull\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</Drawer>\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t</Route>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n\n    handleClose = () => {\n        this.props.history.push('/users');\n    }\n}\n\nexport default {\n\tlist:UserList,\n\t// edit:UserEdit,\n\t// show:UserShow,\n\t// create:UserCreator\n}","import React, { useCallback } from \"react\";\nimport { \n\tEdit, Create, SimpleForm, TextInput, \n\tSaveButton, Toolbar,\n} from 'react-admin';\nimport { useForm } from 'react-final-form';\nimport md5 from 'md5';\n\nconst SaveWithNoteButton = ({ handleSubmitWithRedirect, acl, ...props }) => {\n\t\tconst { redirect } = props;\n\t\tconst form = useForm();\n\t\tconst handleClick = useCallback(() => {\n\t\t\tvar formdata = form.getState().values;\n\t\t\tif (formdata.pwd) {\n\t\t\t\tconst salt= Math.random().toString(36).substring(7);\n\t\t\t\tform.change('salt', salt);\n\t\t\t\tform.change('password', md5(salt+formdata.pwd));\n\t\t\t\tform.change('pwd', undefined);\n\t\t\t}\n\n\t\t\tif (acl) form.change('acl', acl)\n\n\t\t\thandleSubmitWithRedirect(redirect);\n\t\t}, [form]);\n\n\t\treturn <SaveButton {...props} handleSubmitWithRedirect={handleClick} />;\n};\nconst PostToolbar = props => {\n\tvar {redirect} =props;\n\treturn (<Toolbar {...props}>\n\t\t\t<SaveWithNoteButton\n\t\t\t\t\tlabel=\"Save\"\n\t\t\t\t\tredirect={redirect}\n\t\t\t\t\tsubmitOnEnter={false}\n\t\t\t\t\t{...props}\n\t\t\t/>\n\t\t</Toolbar>\n\t);\n}\n\nfunction CreateAndEditView(method, props) {\n\treturn (<SimpleForm toolbar={<PostToolbar />}>\n\t\t\t<TextInput source=\"name\" label=\"显示名\"/>\n\t\t\t{method==='Create'?<TextInput source=\"id\" label=\"登录名\"/>:null}\n\t\t\t<TextInput source=\"pwd\" label=\"密码\" type=\"password\"/>\n\t\t</SimpleForm>)\n}\n\nexport const ManagerCreator =props => (<Create {...props}>{CreateAndEditView('Create', {...props, redirect:'list', acl:'manager', initialValues:{debugMode:true}})}</Create>)\n\nexport const ManagerEdit = props => (<Edit {...props}>{CreateAndEditView('Edit', {...props, redirect:'list'})}</Edit>)\n\n","import React, {Fragment } from \"react\";\nimport { Route } from 'react-router';\nimport { Drawer } from '@material-ui/core';\nimport { \n\tList, Datagrid, TextField, EditButton,\n    TopToolbar, CreateButton,\n} from 'react-admin';\nimport {DateTimeField} from '../extends/fields';\nimport {ManagerCreator, ManagerEdit} from \"./create\"\n\nconst ListActions = ({ basePath }) => (\n    <TopToolbar>\n        <CreateButton basePath={basePath} />\n    </TopToolbar>\n);\n\nclass ManagerList extends React.Component {\n    render() {\n        const { push, classes, ...props } = this.props;\n        return (\n            <Fragment>\n\t\t\t\t<List {...props} filter={{ acl:['admin', 'manager'] }} exporter={false} title=\"管理员\" actions={<ListActions />}>\n\t\t\t\t\t<Datagrid>\n\t\t\t\t\t\t<TextField source=\"name\" label=\"显示名\"/>\n\t\t\t\t\t\t<TextField source=\"id\" label=\"登录名\"/>\n\t\t\t\t\t\t<DateTimeField source=\"createTime\" label=\"创建时间\"/>\n\t\t\t\t\t\t<EditButton />\n\t\t\t\t\t</Datagrid>\n\t\t\t\t</List>\n                <Route path=\"/managers/create\">\n                    {({ match }) => (\n                        <Drawer\n                            open={!!match}\n                            anchor=\"right\"\n                            onClose={this.handleClose}\n                        >\n                            <ManagerCreator\n                                // className={classes.drawerContent}\n                                onCancel={this.handleClose}\n                                {...props}\n                            />\n                        </Drawer>\n                    )}\n                </Route>\n                <Route path=\"/managers/:id\">\n                    {({ match }) => {\n                        const isMatch =\n                            match &&\n                            match.params &&\n                            match.params.id !== 'create';\n\n                        return (\n                            <Drawer\n                                open={isMatch}\n                                anchor=\"right\"\n                                onClose={this.handleClose}\n                            >\n                                {isMatch ? (\n                                    <ManagerEdit\n                                        // className={classes.drawerContent}\n                                        id={isMatch ? decodeURIComponent(match.params.id) : null}\n                                        onCancel={this.handleClose}\n                                        {...props}\n                                    />\n                                ) : \n                                null\n                                }\n                            </Drawer>\n                        );\n                    }}\n                </Route>\n            </Fragment>\n        );\n    }\n\n    handleClose = () => {\n        this.props.history.goBack();\n    };\n}\n\n\nexport default {\n\tlist:ManagerList,\n}","import React, { useState, useEffect,useCallback } from \"react\";\nimport { \n\tList, Datagrid, TextField, NumberField, EditButton,\n\tEdit, Create, SimpleForm, TextInput, SelectInput,\n\tLoading, Error,\n\tuseDataProvider,\n\tSaveButton, Toolbar,\n} from 'react-admin';\nimport { useForm } from 'react-final-form';\nimport {DateTimeField} from './extends/fields';\nimport md5 from 'md5';\n\nconst SaveWithNoteButton = ({ handleSubmitWithRedirect, acl, ...props }) => {\n\t\tconst { redirect } = props;\n\t\tconst form = useForm();\n\t\tconst handleClick = useCallback(() => {\n\t\t\tvar formdata = form.getState().values;\n\t\t\tif (formdata.pwd) {\n\t\t\t\tconst salt= Math.random().toString(36).substring(7);\n\t\t\t\tform.change('salt', salt);\n\t\t\t\tform.change('password', md5(salt+formdata.pwd));\n\t\t\t\tform.change('pwd', undefined);\n\t\t\t}\n\n\t\t\tform.change('share', Number((1-Number(formdata.share)/100).toFixed(4)))\n\n\t\t\tif (acl) form.change('acl', acl)\n\n\t\t\thandleSubmitWithRedirect(redirect);\n\t\t}, [form]);\n\n\t\treturn <SaveButton {...props} handleSubmitWithRedirect={handleClick} />;\n};\nconst PostToolbar = props => {\n\tvar {redirect} =props;\n\treturn (<Toolbar {...props}>\n\t\t\t<SaveWithNoteButton\n\t\t\t\t\tlabel=\"Save\"\n\t\t\t\t\tredirect={redirect}\n\t\t\t\t\tsubmitOnEnter={false}\n\t\t\t\t\t{...props}\n\t\t\t/>\n\t\t</Toolbar>\n\t);\n}\n\nfunction CreateAndEditView(method, props) {\n\tconst dp=useDataProvider();\n\tconst [agents, setAgents] = useState();\n\tconst [loading, setLoading] = useState(true);\n\tconst [error, setError] = useState();\n\n\tuseEffect(()=>{\n\t\tdp.getList('users', {filter:{acl:'agent'}})\n\t\t.then(({data})=>{\n\t\t\tsetAgents(data);\n\t\t\tsetLoading(false);\n\t\t})\n\t\t.catch(e=>{\n\t\t\tsetError(e);\n\t\t\tsetLoading(false);\n\t\t});\n\t}, [])\n\tif (loading) return <Loading />\n\tif (error) return <Error />\n\t\n\tif (loading) return <Loading />\n\n\tconst LoginName=(props)=>{\n\t\tif (method==='Create') return <TextInput {...props}/>\n\t\telse return null;\n\t}\n\n\treturn (<SimpleForm toolbar={<PostToolbar />}>\n\t\t\t<TextInput source=\"name\" label=\"显示名\"/>\n\t\t\t<LoginName source=\"id\" label=\"登录名\"/>\n\t\t\t<TextInput source=\"pwd\" label=\"密码\" type=\"password\"/>\n\t\t\t<TextInput source=\"share\" defaultValue={3}/>\n\t\t\t<SelectInput source=\"parent\" choices={agents}/>\n\t\t</SimpleForm>)\n}\n\nexport const AgentCreator =props => (<Create {...props}>{CreateAndEditView('Create', {...props, redirect:'list', acl:'agent', initialValues:{debugMode:true}})}</Create>)\n\nexport const AgentEdit = props => (<Edit {...props}>{CreateAndEditView('Edit', {...props, redirect:'list'})}</Edit>)\n\nexport const AgentList = props => {\n\treturn (\n\t\t<List {...props} filter={{ acl:'agent' }} exporter={false} title=\"代理\">\n\t\t\t<Datagrid>\n\t\t\t\t<TextField source=\"name\" label=\"显示名\"/>\n\t\t\t\t<TextField source=\"id\" label=\"登录名\"/>\n\t\t\t\t<DateTimeField source=\"createTime\" label=\"创建时间\"/>\n\t\t\t\t<NumberField source=\"share\" label=\"分成\" options={{style:\"percent\"}}/>\n\t\t\t\t<NumberField source=\"daily\" label=\"当日收入\" options={{ minimumFractionDigits: 2, maximumFractionDigits: 2}}/>\n\t\t\t\t<NumberField source=\"profit\" label=\"账户余额\" options={{ minimumFractionDigits: 2, maximumFractionDigits: 2}}/>\n\t\t\t\t<EditButton />\n\t\t\t</Datagrid>\n\t</List>);\n}\n\nexport default {\n\tlist:AgentList,\n\tcreate:AgentCreator,\n\tedit:AgentEdit,\n}","import * as React from \"react\";\nimport { Admin, Resource } from 'react-admin';\n// import TreeMenu from '@bb-tech/ra-treemenu';\nimport DataProvider from './data-provider';\nimport Users from './users';\nimport Managers from './managers';\nimport Agents from './agents';\nimport Bills from './bills';\nimport Providers from './providers';\nimport Docs from './docs';\nimport Statements from './statements';\nimport createAuth from './auth';\nimport financial from './financial';\nimport DashbaordPage from './dashboard';\nimport Demo from './demo';\n\n//icons\nimport {AccountTree, BusinessCenter, SupervisorAccount, Apartment, Storefront, Receipt, Dashboard,Assessment,SportsMotorsports} from '@material-ui/icons';\nvar location=window.location, start_params=new URLSearchParams(location.search), spec_server=start_params.get('server');\nvar apiUrl;\nif (spec_server) {\n\tif (spec_server.indexOf('//')!==0) spec_server='//'+spec_server;\n\tapiUrl=location.protocol+spec_server;\n\tif (apiUrl[apiUrl.length-1]==='/') apiUrl=apiUrl.slice(0, -1);\n} else apiUrl=location.protocol+'//'+location.hostname+(location.port?(':'+location.port):'');\n\nconst dataProvider = DataProvider(apiUrl);\nconst App = () => (\n\t<Admin dataProvider={dataProvider} authProvider={createAuth(apiUrl)} /*layout={(props) => <Layout {...props} menu={TreeMenu}/>}*/>\n\t\t{permissions => {\n\t\t\tvar ret=[];\n\t\t\tif (permissions==='admin'||permissions==='manager') {\n\t\t\t\tret= ret.concat([\n\t\t\t\t// <Resource key=\"userManager\" name=\"userManager\" icon={AccountTree} options={{label:\"用户管理\", isMenuParent:true}} />,\n\t\t\t\t\t<Resource key=\"managers\" name=\"managers\" icon={SupervisorAccount} {...Managers} options={{label:'Administrators', menuParent:'userManager'}}/>,\n\t\t\t\t\t<Resource key=\"users\" name=\"users\" icon={Storefront} {...Users}  options={{label:'Partners', menuParent:'userManager'}}/>,\n\t\t\t\t\t// <Resource key=\"agents\" name=\"agents\" icon={Apartment} {...Agents} options={{label:'代理', menuParent:'userManager'}}/>,\n\t\t\t\t<Resource key=\"providers\" name=\"providers\" icon={SportsMotorsports} {...Providers} options={{label:'Providers'}}/>,\n\t\t\t\t<Resource key=\"financial_recon\" name=\"recon\" icon={BusinessCenter} {...financial.Recon} options={{label:'Reconcilitions'}}/>,\n\t\t\t\t<Resource key=\"financial_recon_manual\" name=\"recon_manual\" icon={BusinessCenter} {...financial.ReconManual} options={{label:'Manual Reconcilition'}}/>,\n\t\t\t\t])\n\t\t\t} else {\n\t\t\t\tret.push((\n\t\t\t\t\t<Resource key=\"dashboard\" name=\"dashboard\" {...DashbaordPage} icon={Dashboard} options={{label:\"Dashboard\"}} />\n\t\t\t\t))\n\t\t\t}\n\t\t\tret.push(<Resource key=\"bills\" name=\"bills\" icon={Receipt} {...Bills} options={{label:'Transactions'}}/>);\n\t\t\tret.push(<Resource key=\"statements\" name=\"statements\" icon={Assessment} {...Statements} options={{label:'Billings'}}/>);\n\t\t\tret.push(<Resource key=\"docs\" name=\"docs\" {...Docs} options={{label:'Integrations'}} />);\n\t\t\tret.push(<Resource key=\"demo\" name=\"demo\" {...Demo} options={{label:'Demo'}} />);\n\t\t\treturn ret;\n\t\t}}\n\t</Admin>\n);\n\nexport default App;","import {Datagrid} from './Datagrid';\n\nexport const ExtendedDatagrid=Datagrid;\n","import React , {useState, useEffect} from 'react';\nimport {\n    isValidElement,\n    Children,\n    cloneElement,\n    useCallback,\n} from 'react';\n// import PropTypes from 'prop-types';\nimport {\n    sanitizeListRestProps,\n    useListContext,\n    useVersion,\n    useDataProvider,\n    DatagridLoading, DatagridBody, DatagridHeaderCell, useDatagridStyles\n} from 'react-admin';\nimport {\n    Checkbox,\n    Table,\n    TableCell,\n    TableHead,\n    TableFooter,\n    TableRow,\n} from '@material-ui/core';\nimport classnames from 'classnames';\n\nexport const Datagrid = React.forwardRef((props, ref) => {\n    const classes = useDatagridStyles(props);\n    const {\n        body = <DatagridBody />,\n        children,\n        classes: classesOverride,\n        className,\n        expand,\n        hasBulkActions = false,\n        hover,\n        isRowSelectable,\n        resource,\n        rowClick,\n        rowStyle,\n        size = 'small',\n        footerResource,\n        ...rest\n    } = props;\n\n    const {\n        basePath,\n        currentSort,\n        data,\n        ids,\n        loaded,\n        onSelect,\n        onToggleItem,\n        selectedIds,\n        setSort,\n        total,\n    } = useListContext(props);\n    const version = useVersion();\n\n    const updateSort = useCallback(\n        event => {\n            event.stopPropagation();\n            const newField = event.currentTarget.dataset.field;\n            const newOrder =\n                currentSort.field === newField\n                    ? currentSort.order === 'ASC'\n                        ? 'DESC'\n                        : 'ASC'\n                    : event.currentTarget.dataset.order;\n\n            setSort(newField, newOrder);\n        },\n        [currentSort.field, currentSort.order, setSort]\n    );\n\n    const handleSelectAll = useCallback(\n        event => {\n            if (event.target.checked) {\n                const all = ids.concat(\n                    selectedIds.filter(id => !ids.includes(id))\n                );\n                onSelect(\n                    isRowSelectable\n                        ? all.filter(id => isRowSelectable(data[id]))\n                        : all\n                );\n            } else {\n                onSelect([]);\n            }\n        },\n        [data, ids, onSelect, isRowSelectable, selectedIds]\n    );\n\n    const dataProvider=useDataProvider();\n    const [footerData, setFooterData]=useState(), [footerLoaded, setFooterLoaded]=useState(false);\n    useEffect(()=>{\n        if (footerResource) {\n            dataProvider.getOne(footerResource, props.filterValues).then(({data})=>{\n                setFooterData(data);\n                setFooterLoaded(true);\n            }).catch(err=>{\n                setFooterData([]);\n                setFooterLoaded(true);\n            })\n        } else setFooterLoaded(true);\n    }, [props.filterValues]);\n    /**\n     * if loaded is false, the list displays for the first time, and the dataProvider hasn't answered yet\n     * if loaded is true, the data for the list has at least been returned once by the dataProvider\n     * if loaded is undefined, the Datagrid parent doesn't track loading state (e.g. ReferenceArrayField)\n     */\n    if (loaded === false || footerLoaded === false) {\n        return (\n            <DatagridLoading\n                classes={classes}\n                className={className}\n                expand={expand}\n                hasBulkActions={hasBulkActions}\n                nbChildren={React.Children.count(children)}\n                size={size}\n            />\n        );\n    }\n\n    /**\n     * Once loaded, the data for the list may be empty. Instead of\n     * displaying the table header with zero data rows,\n     * the datagrid displays nothing in this case.\n     */\n    // if (loaded && (ids.length === 0 || total === 0)) {\n    //     return null;\n    // }\n\n    const all = isRowSelectable\n        ? ids.filter(id => isRowSelectable(data[id]))\n        : ids;\n\n    const shown = (()=>{\n        if (ids[0]==null) return children;\n        var sample=data[ids[0]];\n        for (var i=1; i<ids.length; i++) sample={...sample, ...data[ids[i]]};\n        return Children.toArray(children).filter(field=>(field.props.alwaysOn || sample.hasOwnProperty(field.props.source)));\n    })();\n\n    /**\n     * After the initial load, if the data for the list isn't empty,\n     * and even if the data is refreshing (e.g. after a filter change),\n     * the datagrid displays the current data.\n     */\n    return (\n        <Table\n            ref={ref}\n            className={classnames(classes.table, className)}\n            size={size}\n            {...sanitizeListRestProps(rest)}\n        >\n            <TableHead className={classes.thead}>\n                <TableRow\n                    className={classnames(classes.row, classes.headerRow)}\n                >\n                    {expand && (\n                        <TableCell\n                            padding=\"none\"\n                            className={classnames(\n                                classes.headerCell,\n                                classes.expandHeader\n                            )}\n                        />\n                    )}\n                    {hasBulkActions && (\n                        <TableCell\n                            padding=\"checkbox\"\n                            className={classes.headerCell}\n                        >\n                            <Checkbox\n                                className=\"select-all\"\n                                color=\"primary\"\n                                checked={\n                                    selectedIds.length > 0 &&\n                                    all.length > 0 &&\n                                    all.every(id => selectedIds.includes(id))\n                                }\n                                onChange={handleSelectAll}\n                            />\n                        </TableCell>\n                    )}\n                    {shown.map((field, index) =>\n                        isValidElement(field) ? (\n                            <DatagridHeaderCell\n                                className={classes.headerCell}\n                                currentSort={currentSort}\n                                field={field}\n                                isSorting={\n                                    currentSort.field ===\n                                    ((field.props).sortBy ||\n                                        (field.props).source)\n                                }\n                                key={(field.props).source || index}\n                                resource={resource}\n                                updateSort={updateSort}\n                            />\n                        ) : null\n                    )}\n                </TableRow>\n            </TableHead>\n            {cloneElement(\n                body,\n                {\n                    basePath,\n                    className: classes.tbody,\n                    classes,\n                    expand,\n                    rowClick,\n                    data,\n                    hasBulkActions,\n                    hover,\n                    ids,\n                    onToggleItem,\n                    resource,\n                    rowStyle,\n                    selectedIds,\n                    isRowSelectable,\n                    version,\n                },\n                shown\n            )}\n            {footerResource?\n                (\n                <TableFooter>\n                    <TableRow key=\"__footer\">\n                        {React.Children.map(shown, field => (\n                            <TableCell key={`footer-${props.id}-${field.props.source}`}>\n                                {(()=>{\n                                    if (!footerData) return null;\n                                    if (field.props.footerText) return field.props.footerText;\n                                    if (field.props.footerSource) return footerData[field.props.footerSource];\n                                    return null\n                                })()}\n                            </TableCell>\n                        ))}\n                    </TableRow>\n                </TableFooter>\n                )\n                :null\n            }\n        </Table>\n    );\n});\n\n// Datagrid.propTypes = {\n//     basePath: PropTypes.string,\n//     body: PropTypes.element,\n//     children: PropTypes.node.isRequired,\n//     classes: PropTypes.object,\n//     className: PropTypes.string,\n//     currentSort: PropTypes.shape({\n//         field: PropTypes.string,\n//         order: PropTypes.string,\n//     }),\n//     data: PropTypes.object,\n//     // @ts-ignore\n//     expand: PropTypes.oneOfType([PropTypes.element, PropTypes.elementType]),\n//     hasBulkActions: PropTypes.bool,\n//     hover: PropTypes.bool,\n//     ids: PropTypes.arrayOf(PropTypes.any),\n//     loading: PropTypes.bool,\n//     onSelect: PropTypes.func,\n//     onToggleItem: PropTypes.func,\n//     resource: PropTypes.string,\n//     rowClick: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n//     rowStyle: PropTypes.func,\n//     selectedIds: PropTypes.arrayOf(PropTypes.any),\n//     setSort: PropTypes.func,\n//     total: PropTypes.number,\n//     version: PropTypes.number,\n//     isRowSelectable: PropTypes.func,\n// };\n\n// type RowClickFunction = (\n//     id: Identifier,\n//     basePath: string,\n//     record: Record\n// ) => string;\n\n// export interface DatagridProps extends Omit<TableProps, 'size' | 'classes'> {\n//     body?: ReactElement;\n//     classes?: ClassesOverride<typeof useDatagridStyles>;\n//     className?: string;\n//     expand?:\n//         | ReactElement\n//         | FC<{\n//               basePath: string;\n//               id: Identifier;\n//               record: Record;\n//               resource: string;\n//           }>;\n//     hasBulkActions?: boolean;\n//     hover?: boolean;\n//     isRowSelectable?: (record: Record) => boolean;\n//     optimized?: boolean;\n//     rowClick?: string | RowClickFunction;\n//     rowStyle?: (record: Record, index: number) => any;\n//     size?: 'medium' | 'small';\n// }\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport get from 'lodash/get';\nimport Chip from '@material-ui/core/Chip';\nimport { withStyles } from '@material-ui/core/styles';\nimport classnames from 'classnames';\nimport {sanitizeFieldRestProps} from 'react-admin';\n\nconst styles = {\n    chip: { margin: 4 },\n};\n\nexport const ChipField = ({\n    className,\n    classes = {},\n    source,\n    record,\n    ...rest\n}) => {\n    return (\n        <Chip\n            className={classnames(classes.chip, className)}\n            label={source !== null && source !== undefined ? get(record, source) : record}\n            {...sanitizeFieldRestProps(rest)}\n        />\n    );\n};\n\nChipField.propTypes = {\n    className: PropTypes.string,\n    classes: PropTypes.object,\n    elStyle: PropTypes.object,\n    sortBy: PropTypes.string,\n    source: PropTypes.string,\n    record: PropTypes.object,\n};\n\n","import React, {useState, useEffect} from \"react\";\nimport {ButtonGroup, Button, Chip} from '@material-ui/core';\nimport { \n\tList, TextField, NumberField,\n\tTextInput, SelectInput,\n\tShow, SimpleShowLayout,\n\tuseNotify, useDataProvider, \n\tFilter,\n\tDateTimeInput,\n} from 'react-admin';\nimport {DateTimeField} from './extends/fields';\nimport { useDispatch } from 'react-redux';\nimport { refreshView } from 'ra-core';\nimport {fetchApi} from './data-provider';\nimport {ExtendedDatagrid} from './extends'\n\nexport const BillShow =props=> (\n\t<Show {...props}>\n\t\t<SimpleShowLayout>\n\t\t\t<TextField source=\"name\" label=\"显示名\"/>\n\t\t\t<TextField source=\"key\" />\n\t\t\t<TextField source=\"merchantid\" />\n\t\t\t<NumberField source=\"daily\" label=\"当日收入\" options={{ minimumFractionDigits: 2, maximumFractionDigits: 2}}/>\n\t\t\t<NumberField source=\"profit\" label=\"账户余额\" options={{ minimumFractionDigits: 2, maximumFractionDigits: 2}}/>\n\t\t</SimpleShowLayout>\n\t</Show>\n)\n\n// const QuickFilter = ({ label }) => {\n//     return <Chip label={label} />;\n// };\n\nconst BillFilter =props=>{\n\tconst dp=useDataProvider(), notify=useNotify();\n\tvar [merchants, setMerchants]=useState();\n\tuseEffect(()=>{\n\t\tdp.getList('users', {filter:{acl:'merchant'}})\n\t\t.then(({data})=>setMerchants(data))\n\t\t.catch(e=>notify(e.message, 'warning'))\n\t}, []);\n\treturn (\n\t<Filter {...props}>\n\t\t<TextInput label=\"订单id\" source=\"id\"/>\n\t\t<TextInput label=\"商户订单\" source=\"merchantOrderId\" alwaysOn/>\n\t\t<TextInput label=\"供应商订单\" source=\"providerOrderId\"/>\n\t\t<TextInput label=\"商户\" source=\"merchantName\" alwaysOn/>\n\t\t<DateTimeInput label=\"开始日期\" source=\"startTime\"/>\n\t\t<DateTimeInput label=\"结束日期\" source=\"endTime\"/>\n\t\t<SelectInput label=\"订单状态\" source=\"used\" choices={[\n\t\t\t{id:true, name:'已完成'},\n\t\t\t{id:{$ne:true}, name:'未完成'},\n\t\t\t{id:undefined, name:'全部'},\n\t\t]} />\n\t\t<TextInput label=\"供应商\" source=\"provider\"/>\n\t</Filter>)\n}\n\nconst OptionButtons =({permissions, ...props})=>{\n\tconst {record}=props;\n\tvar dispatch = useDispatch();\n\tconst notify=useNotify();\n\n\tfunction TakeAction(resource, params) {\n\t\treturn fetchApi(`${resource}/${params.action}`, {\n\t\t\tmethod:'POST',\n\t\t\tbody:JSON.stringify({_id:decodeURIComponent(params.id)})\n\t\t}).then(({json})=>{\n\t\t\tnotify('done', 'info');\n\t\t\treturn {data:json};\n\t\t}).catch((e)=>{\n\t\t\tnotify(e.message, 'warning');\n\t\t})\n\t}\n\n\treturn (\n\t\t<ButtonGroup variant=\"text\" color=\"primary\" aria-label=\"text primary button group\">\n\t\t\t<Button onClick={()=>{TakeAction('bills', {action:'notify', id:record.id})}}>notify</Button>\n\t\t\t{permissions==='admin'?<Button onClick={()=>{TakeAction('bills', {action:'debugBill', id:record.id}).then(()=>{dispatch(refreshView())})}}>debug</Button>:null}\n\t\t\t{permissions==='admin'?<Button onClick={()=>{TakeAction('bills', {action:'adminUseBill', id:record.id}).then(()=>{dispatch(refreshView())})}}>force</Button>:null}\n\t\t\t<Button onClick={()=>{TakeAction('bills', {action:'refund', id:record.id}).then(()=>{dispatch(refreshView())})}}>refund</Button>\n\t\t</ButtonGroup>\n\t)\n}\n\nexport const BillList = ({permissions, ...props}) => {\n\treturn (\n\t\t<List {...props} filters={<BillFilter/>} exporter={false} title=\"充值订单\" bulkActionButtons={false} sort={{ field: 'time', order: 'DESC' }}>\n\t\t\t<ExtendedDatagrid footerResource=\"billsSummary\">\n\t\t\t\t<TextField source=\"id\" footerText=\"Total\"/>\n\t\t\t\t<TextField source=\"merchantName\" label=\"商户\"/>\n\t\t\t\t<TextField source=\"merchantOrderId\" label=\"商户订单\"/>\n\t\t\t\t<TextField source=\"providerOrderId\" label=\"供应商订单\"/>\n\t\t\t\t<TextField source=\"provider\" label=\"供应商\"/>\n\t\t\t\t<NumberField source=\"share\" label=\"分成\" options={{style:\"percent\"}}/>\n\t\t\t\t<NumberField source=\"money\" footerSource=\"money\"/>\n\t\t\t\t<TextField source=\"currency\"/>\n\t\t\t\t<DateTimeField source=\"time\" label=\"创建时间\"/>\n\t\t\t\t<TextField source=\"status\" />\n\t\t\t\t<OptionButtons permissions={permissions} alwaysOn={true}/>\n\t\t\t</ExtendedDatagrid>\n\t\t</List>\n\t);\n}\n\nexport default {\n\tlist:BillList,\n\tshow:BillShow,\n}","import list from './list'\n\nexport default {\n    list\n}","import React from \"react\";\nimport { \n\tList, Datagrid, TextField, BooleanField, ArrayField, SingleFieldList\n} from 'react-admin';\nimport {ChipField} from '../extends'\n\nexport default props => (\n\t<List {...props} exporter={false} title=\"供应商\" bulkActionButtons={false}>\n\t\t<Datagrid rowClick=\"expand\">\n\t\t\t<TextField source=\"name\" />\n\t\t\t<BooleanField source=\"forecore\" label=\"四方\"/>\n\t\t\t<BooleanField source=\"withdrawal\" label=\"支持提款\"/>\n\t\t\t<BooleanField source=\"reconciliation\" label=\"自动对账\"/>\n\t\t\t<ArrayField source=\"supportedMethods\" label=\"支付方式\">\n\t\t\t\t<SingleFieldList>\n\t\t\t\t\t<ChipField />\n\t\t\t\t</SingleFieldList>\n\t\t\t</ArrayField>\n\t\t</Datagrid>\n\t</List>\n);","import React, {useEffect, useState} from 'react'\nimport { \n\tTitle, SimpleShowLayout, TextField, useDataProvider, useGetIdentity\n} from 'react-admin';\nimport {Card, CardHeader, CardContent, Grid, Typography, Divider, makeStyles} from '@material-ui/core';\nimport ReactMarkdown  from 'react-markdown'\nimport gfm from 'remark-gfm'\nimport {Prism as SyntaxHighlighter} from 'react-syntax-highlighter'\nimport { dark } from 'react-syntax-highlighter/dist/esm/styles/prism'\n/* eslint import/no-webpack-loader-syntax: off */\nconst mdsrc =require('!raw-loader!./四方接口.md').default;\n// const objPath =require('object-path')\n\nconst useStyles = makeStyles((theme) => ({\n  header:{\n\tborderBottom: '1px solid #e9ecef',\n\tdisplay: 'flex',\n    fontSize: '1.25em',\n    margin: 0,\n    minHeight: '64px',\n    overflow: 'hidden',\n    padding: '0 16px',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    width: '100%'\n  },\n  item: {\n    color: '#333',\n    padding: '15px 40px 0px 30px',\n    'margin-bottom': '15px',\n  },\n  subtitle :{\n\tdisplay: 'block',\n    overflow: 'visible',\n    color: '#333',\n    'margin-bottom': '10px',\n    'margin-top': 0,\n    'font-size': '32px' \n  },\n  paper: {\n    padding: theme.spacing(2),\n    margin: 'auto',\n    maxWidth: 500,\n  },\n  image: {\n    width: 128,\n    height: 128,\n  },\n  img: {\n    margin: 'auto',\n    display: 'block',\n    maxWidth: '100%',\n    maxHeight: '100%',\n  },\n}));\n\nconst renderers = {\n  code: ({language, value}) => {\n    return (<SyntaxHighlighter style={dark} language=\"javascript\">\n\t\t{value}\n\t\t</SyntaxHighlighter>\n\t)\n  }\n}\n\nconst DocShow =({options, permissions, ...rest})=> {\n\tvar classes=useStyles();\n\tconst { identity } = useGetIdentity();\n\tconst dp=useDataProvider();\n\tvar [userKey, setKey]=useState();\n\tuseEffect(()=>{\n\t\tif (identity && identity.acl=='merchant') {\n\t\t\tdp.getOne('users', {id:identity.id})\n\t\t\t.then(({data})=>setKey(data))\n\t\t\t.catch(()=>{})\n\t\t}\n\t}, [identity]);\n\n    return (\n\t// <Show {...props} id=\"dummy\" title=\"对接文档\">\n\t// \t{/* <SimpleShowLayout>\n    //         <ReactMarkdown>\n    //             Test\n    //         </ReactMarkdown>\n\t// \t</SimpleShowLayout> */}\n\t// \t<MarkDownView />\n\t// </Show>\n\t<div className=\"show-page\">\n\t\t<Title\n\t\t\tdefaultTitle={options.label}\n\t    />\n\t\t{userKey?(<Card>\n\t\t\t<CardHeader title=\"对接参数\" className={classes.header}/>\n\t\t\t<Grid container direction=\"row\">\n\t\t\t\t<Grid item xs={4} className={classes.item}>\n\t\t\t\t\t<Typography variant=\"subtitle1\">MD5 Key</Typography>\n\t\t\t\t\t<Typography variant=\"body2\" gutterBottom>{userKey.key}</Typography>\n\t\t\t\t</Grid>\n\t\t\t\t<Divider orientation=\"vertical\" flexItem />\n\t\t\t\t<Grid item xs={4} className={classes.item}>\n\t\t\t\t\t<Typography variant=\"subtitle1\">PartnerId</Typography>\n\t\t\t\t\t<Typography variant=\"body2\" gutterBottom>{userKey.merchantid}</Typography>\n\t\t\t\t</Grid>\n\t\t\t</Grid>\n\t\t</Card>)\n\t\t:null\n\t\t}\n\t\t<Card>\n\t\t\t<CardContent>\n\t\t\t\t<ReactMarkdown plugins={[gfm]} renders={renderers} >\n\t\t\t\t\t{mdsrc}\n\t\t\t\t</ReactMarkdown>\n\t\t\t</CardContent>\n\t\t</Card>\n\t</div>\n)}\n\nexport default {\n\tlist:DocShow,\n}","import React from \"react\";\nimport { Card as MuiCard, CardContent, withStyles } from '@material-ui/core';\nimport AccessTimeIcon from '@material-ui/icons/AccessTime';\nimport {\n\tList, TextField, NumberField, DateField, ReferenceField,\n    FilterList, FilterListItem,\n} from 'react-admin';\nimport {ExtendedDatagrid} from './extends'\n\n// const BillFilter =props=>(\n// \t<Filter {...props}>\n// \t\t<TextInput label=\"订单id\" source=\"id\"/>\n// \t\t<TextInput label=\"商户订单\" source=\"merchantOrderId\" alwaysOn/>\n// \t\t<TextInput label=\"供应商订单\" source=\"providerOrderId\"/>\n// \t\t<TextInput label=\"商户\" source=\"merchantName\" alwaysOn/>\n// \t\t<DateTimeInput label=\"开始日期\" source=\"startTime\"/>\n// \t\t<DateTimeInput label=\"结束日期\" source=\"endTime\"/>\n// \t\t<SelectInput label=\"订单状态\" source=\"used\" choices={[\n// \t\t\t{id:true, name:'已完成'},\n// \t\t\t{id:{$ne:true}, name:'未完成'},\n// \t\t\t{id:undefined, name:'全部'},\n// \t\t]} />\n// \t\t<TextInput label=\"供应商\" source=\"provider\"/>\n// \t</Filter>\n// )\n\nconst StatementPeriod =()=>(\n    <FilterList label=\"Statistics\" icon={<AccessTimeIcon />}>\n        <FilterListItem label=\"by day\" value={{period:'day'}} />\n        <FilterListItem label=\"by week\" value={{period:'week'}} />\n        <FilterListItem label=\"by month\" value={{period:'month'}} />\n    </FilterList>\n)\nconst Card = withStyles(theme => ({\n    root: {\n        [theme.breakpoints.up('sm')]: {\n            order: -1, // display on the left rather than on the right of the list\n            width: '15em',\n            marginRight: '1em',\n        },\n        [theme.breakpoints.down('sm')]: {\n            display: 'none',\n        },\n    },\n}))(MuiCard);\n\nconst FilterSidebar = () => (\n    <Card>\n        <CardContent>\n            <StatementPeriod />\n        </CardContent>\n    </Card>\n);\nexport const StatementsList = ({permissions, ...props}) => {\n\treturn (\n\t\t<List {...props} title=\"报表\" bulkActionButtons={false} sort={{ field: 'time', order: 'DESC' }}>\n\t\t\t<ExtendedDatagrid footerResource=\"statementsSummary\">\n\t\t\t\t<DateField source=\"time\" footerText=\"Total\" />\n                <ReferenceField label=\"商户\" source=\"account\" reference=\"users\" link={false}>\n\t\t\t\t    <TextField source=\"name\" />\n                </ReferenceField>\n\t\t\t\t<NumberField source=\"balance\" label=\"收入\" options={{ maximumFractionDigits: 2 }} footerSource=\"balance\"/>\n\t\t\t\t<NumberField source=\"commission\" label=\"手续费\" footerSource=\"money\" options={{ maximumFractionDigits: 2 }} footerSource=\"commission\"/>\n                <NumberField source=\"count\" label=\"交易笔数\" footerSource=\"money\" options={{ maximumFractionDigits: 0 }}/>\n\t\t\t</ExtendedDatagrid>\n\t\t</List>\n\t);\n}\n\nexport default {\n\tlist:StatementsList,\n}","import React, { useState, useEffect } from \"react\";\nimport { Form, Label} from 'react-final-form';\nimport { Box} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { \n\tList, Button, Toolbar, \n\tTextField, NumberField, DateField,\n\tSelectInput, TopToolbar, DateInput, \n\tFormDataConsumer, SimpleForm,\n\tuseNotify, useDataProvider, useRedirect, useRefresh, \n\tsanitizeListRestProps\n} from 'react-admin';\nimport {ExtendedDatagrid, DateTimeField} from '../extends'\nimport {fetchApi} from '../data-provider';\n\nconst _noop=()=>{}\n\nconst useStyles = makeStyles({\n  actionButton: {\n\t  marginBottom:'29px',\n  },\n});\n\nconst ReconInitPage =(props)=> {\n\tconst redirect=useRedirect();\n\tconst dp=useDataProvider(), notify=useNotify();\n\treturn (<Form onSubmit={_noop}>\n\t\t{({ handleSubmit }) => (\n\t\t\t<form onSubmit={handleSubmit}>\n\t\t\t\t<p>选择初始对账的日期</p>\n\t\t\t\t<DateInput label=\"日期\" source=\"date\"/>\n\t\t\t\t<FormDataConsumer>\n\t\t\t\t{({formData, ...rest})=>(\n\t\t\t\t\t<Toolbar>\n\t\t\t\t\t<Button variant=\"contained\" size=\"medium\" label=\"初始化对账数据\"\n\t\t\t\t\tonClick={\n\t\t\t\t\t\tasync ()=>{\n\t\t\t\t\t\t\tif (!formData.date) return notify('Date must be specified', 'error');\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tvar ret=await dp.actions('recon', {method:'check', end:new Date(), ...formData});\n\t\t\t\t\t\t\t\tif (!ret) return;\n\t\t\t\t\t\t\t\tif (ret.data.modified===0) return notify('no data received, system will check data per 30 mins. you will see the results if ', 'warning');\n\t\t\t\t\t\t\t\tredirect('/recon');\n\t\t\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\t\t\tnotify(e.message, 'warning');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t</Toolbar>\n\t\t\t\t)}\n\t\t\t\t</FormDataConsumer>\n\t\t\t</form>\n\t\t)}\n\t</Form>)\n}\nconst ReconActions = (props) => {\n\tconst {\n\t\tclassName,\n\t\t...rest\n\t} = props;\n\tconst dp=useDataProvider();\n\tconst [providers, setProviders] =useState();\n\n\tconst notify=useNotify(); \n\n\tuseEffect(()=>{\n\t\tdp.getList('providers')\n\t\t.then(({data})=>{\n\t\t\tsetProviders(data);\n\t\t}).catch((e)=>{\n\t\t\tnotify(e.message, 'warning');\n\t\t})\n\t}, []);\n\n\tvar classes=useStyles();\n\tvar refresh=useRefresh();\n\n\tvar choices=[{id:null, name:'All'}];\n\tif (providers) choices=choices.concat(providers);\n\treturn (\n\t\t<TopToolbar className={className} {...sanitizeListRestProps(rest)}>\n\t\t\t<Form onSubmit={_noop}>\n\t\t\t\t{({ handleSubmit }) => (\n\t\t            <form onSubmit={handleSubmit}>\n\t\t\t\t\t\t<Box display=\"flex\" alignItems=\"flex-end\" mb={1}>\n\t\t\t\t\t\t\t<Box component=\"span\" mr={2}>\n\t\t\t\t\t\t\t\t<SelectInput label=\"供应商\" choices={choices} source=\"provider\" />\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t<Box component=\"span\" mr={2}>\n\t\t\t\t\t\t\t\t<DateInput label=\"日期\" source=\"date\"/>\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t<Box component=\"span\" mr={2}>\n\t\t\t\t\t\t\t<FormDataConsumer>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t({formData, ...rest})=><Button className={classes.actionButton} variant=\"contained\" size=\"medium\"\n\t\t\t\t\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\t\t\t\t\tif (!formData.date) return notify('Date must be specified', 'error');\n\t\t\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\t\t\tvar ret=await dp.actions('recon', {method:'check', ...formData});\n\t\t\t\t\t\t\t\t\t\t\t\tif (!ret) return;\n\t\t\t\t\t\t\t\t\t\t\t\trefresh();\n\t\t\t\t\t\t\t\t\t\t\t\tnotify(`${ret.data.modified} records updated`, 'info');\n\t\t\t\t\t\t\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\t\t\t\t\t\t\tnotify(e.message, 'warning');\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tlabel=\"重新对账\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</FormDataConsumer>\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</form>\n\t\t\t\t)}\n\t\t\t</Form>\n\t\t</TopToolbar>\n\t);\n};\n\nconst ReconList = (props) => {\n\treturn (<List {...props} exporter={false} actions={<ReconActions />} title='对账单' bulkActionButtons={false} sort={{ field: 'time', order: 'DESC' }}>\n\t\t<ExtendedDatagrid>\n\t\t\t<DateField source=\"time\" label=\"时间\"/>\n\t\t\t<TextField source=\"account\" label=\"供应商\"/>\n\t\t\t<TextField source=\"recon_tag\" label=\"对账标记\"/>\n\t\t\t<NumberField source=\"received\" label=\"收款\"/>\n\t\t\t<NumberField source=\"commission\" label=\"手续费\"/>\n\t\t</ExtendedDatagrid>\n\t</List>);\n}\n\nexport default {\n\tlist:ReconList,\n\tcreate:ReconInitPage\n}","import React, { useState, useEffect } from \"react\";\nimport { Form, Label} from 'react-final-form';\nimport {Box, Card as MuiCard, CardContent, withStyles} from '@material-ui/core';\nimport {DoneAll, CloudUpload,SportsMotorsports} from '@material-ui/icons';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { \n\tList, Toolbar, Button,\n\tTextField, NumberField, DateField,\n\tSelectInput, TopToolbar, DateInput, \n\tFormDataConsumer, SimpleForm,\n\tuseNotify, useDataProvider, useRedirect, useRefresh, \n\tsanitizeListRestProps,\n    Filter, FilterList, FilterListItem, FilterLiveSearch, TextInput, DateTimeInput,\n} from 'react-admin';\nimport {ExtendedDatagrid, DateTimeField} from '../extends'\nimport {fetchApi} from '../data-provider';\n\nconst _noop=()=>{}\n\nconst useStyles = makeStyles({\n  actionButton: {\n\t  marginBottom:'29px',\n  },\n});\n\nconst ReconActions = (props) => {\n\tconst {\n\t\tclassName,\n\t\t...rest\n\t} = props;\n\t// const dp=useDataProvider();\n\t// const [providers, setProviders] =useState();\n\n\t// const notify=useNotify(); \n\n\t// useEffect(()=>{\n\t// \tdp.getList('providers')\n\t// \t.then(({data})=>{\n\t// \t\tsetProviders(data);\n\t// \t}).catch((e)=>{\n\t// \t\tnotify(e.message, 'warning');\n\t// \t})\n\t// }, []);\n\n\t// var classes=useStyles();\n\t// var refresh=useRefresh();\n\n\t// var choices=[{id:null, name:'All'}];\n\t// if (providers) choices=choices.concat(providers);\n\treturn (\n\t\t<TopToolbar className={className} {...sanitizeListRestProps(rest)}>\n            <Button onClick={_noop} label=\"UPLOAD\"><CloudUpload /></Button>\n            <Button onClick={_noop} label=\"BATCH\"><DoneAll /></Button>\n\t\t</TopToolbar>\n\t);\n};\nconst PostBulkActionButtons = props => (\n    <Button label=\"Settlement\"><DoneAll/></Button>\n);\nconst ProviderFilter =props=>{\n\tconst dp=useDataProvider();\n\tconst [providers, setProviders] =useState();\n\n\tconst notify=useNotify(); \n\n\tuseEffect(()=>{\n\t\tdp.getList('providers')\n\t\t.then(({data})=>{\n\t\t\tsetProviders(data);\n\t\t}).catch((e)=>{\n\t\t\tnotify(e.message, 'warning');\n\t\t})\n\t}, []);\n\n    var choices=[];\n\tif (providers) choices=choices.concat(providers);\n\n\treturn (\n    <FilterList label=\"Providers\" icon={<SportsMotorsports />}>\n        {\n            choices.map(item=>(\n                <FilterListItem label={item.name} value={{provider:item.id}} />\n            ))\n        }\n    </FilterList>)\n}\n\nconst HasReconId =props=>(\n    <FilterList label=\"unsettled Only\" icon={<DoneAll />}>\n        <FilterListItem label='Yes' value={{unsettled:true}} />\n        <FilterListItem label='No' value={{unsettled:false}} />\n    </FilterList>)\n\nconst Card = withStyles(theme => ({\n    root: {\n        [theme.breakpoints.up('sm')]: {\n            order: -1, // display on the left rather than on the right of the list\n            width: '15em',\n            marginRight: '1em',\n        },\n        [theme.breakpoints.down('sm')]: {\n            display: 'none',\n        },\n    },\n}))(MuiCard);\n\nconst FilterSidebar = () => (\n    <Card>\n        <CardContent>\n            <FilterLiveSearch source=\"id\" />\n            <ProviderFilter />\n            <HasReconId />\n        </CardContent>\n    </Card>\n);\n\nconst Ops=({record, ...rest})=>(\n    record.recon_id?null:<Button label=\"Settle\"></Button>\n)\nconst ReconList = (props) => {\n\treturn (<List {...props} resource=\"bills\" aside={<FilterSidebar />} filterDefaultValues={{unsettled:true}} actions={<ReconActions />} bulkActionButtons={<PostBulkActionButtons />} exporter={false}  title='人工对账' sort={{ field: 'time', order: 'DESC' }}>\n        <ExtendedDatagrid>\n            <TextField source=\"id\"/>\n            <TextField source=\"merchantName\" label=\"商户\"/>\n            <TextField source=\"providerOrderId\" label=\"供应商订单\"/>\n            <TextField source=\"provider\" label=\"供应商\"/>\n            <NumberField source=\"money\" footerSource=\"money\"/>\n            <TextField source=\"currency\"/>\n            <DateTimeField source=\"time\" label=\"创建时间\"/>\n            <TextField label=\"对账ID\" source=\"recon_id\" alwaysOn={true}/>\n            <Ops alwaysOn={true}/>\n        </ExtendedDatagrid>\n\t</List>);\n}\n\nexport default {\n\tlist:ReconList,\n}","import Recon from './recon-page';\nimport ReconManual from './recon-manual';\n\nexport default {\n    Recon:Recon,\n    ReconManual:ReconManual,\n} \n","import React, {useEffect, useState} from 'react'\nimport { \n\tTitle, useDataProvider, useGetIdentity\n} from 'react-admin';\nimport {Button, Card, CardHeader, CardContent, Grid, Typography, Divider, makeStyles} from '@material-ui/core';\nimport Alert from '@material-ui/lab/Alert';\n\nconst useStyles = makeStyles((theme) => ({\n  mb2:{\n\t  marginBottom:'2em',\n  },\n  header:{\n\tborderBottom: '1px solid #e9ecef',\n\tdisplay: 'flex',\n    fontSize: '1.25em',\n    margin: '0px',\n    minHeight: '64px',\n    overflow: 'hidden',\n    padding: '0 16px',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    width: '100%'\n  },\n  item: {\n    color: '#333',\n    padding: '15px 40px 0px 30px',\n    'margin-bottom': '15px',\n  },\n  subtitle :{\n\tdisplay: 'block',\n    overflow: 'visible',\n    color: '#333',\n    'margin-bottom': '10px',\n    'margin-top': 0,\n    'font-size': '32px' \n  },\n  paper: {\n    padding: theme.spacing(2),\n    margin: 'auto',\n    maxWidth: 500,\n  },\n  image: {\n    width: 128,\n    height: 128,\n  },\n  img: {\n    margin: 'auto',\n    display: 'block',\n    maxWidth: '100%',\n    maxHeight: '100%',\n  },\n}));\n\nconst DisableDebugMode=({user, ...rest})=>{\n\tconst action=<Button color=\"inherit\" size=\"small\">DISABLE DEBUG</Button>\n\treturn (user && user.debugMode)? (\n\t\t<Alert severity=\"warning\" variant=\"filled\" {...rest} action={action}>您正在使用调试接口，在正式上线之前请务必关闭调试模式</Alert>\n\t):null\n}\nconst DashboardShow =({options, permissions, ...rest})=> {\n\tvar classes=useStyles();\n\tconst { identity } = useGetIdentity();\n\tconst dp=useDataProvider();\n\tvar [user, setUser]=useState();\n\tuseEffect(()=>{\n\t\tif (identity && identity.acl=='merchant') {\n\t\t\tdp.getOne('users', {id:identity.id})\n\t\t\t.then(({data})=>setUser(data))\n\t\t\t.catch(()=>{})\n\t\t}\n\t}, [identity]);\n\n    return (\n\t// <Show {...props} id=\"dummy\" title=\"对接文档\">\n\t// \t{/* <SimpleShowLayout>\n    //         <ReactMarkdown>\n    //             Test\n    //         </ReactMarkdown>\n\t// \t</SimpleShowLayout> */}\n\t// \t<MarkDownView />\n\t// </Show>\n\t<div className=\"show-page\">\n\t\t<DisableDebugMode user={user} className={classes.mb2}/>\n\t\t<Title\n\t\t\tdefaultTitle={options.label}\n\t    />\n\t\t{user?(<Card>\n\t\t\t<CardHeader title=\"Summary\" className={classes.header}/>\n\t\t\t<Grid container direction=\"row\">\n\t\t\t\t<Grid item xs={3} className={classes.item}>\n\t\t\t\t\t<Typography variant=\"subtitle1\" className={classes.subtitle}>{user.balance||0}</Typography>\n\t\t\t\t\t<Typography variant=\"body2\" gutterBottom>Balance</Typography>\n\t\t\t\t</Grid>\n\t\t\t\t<Divider orientation=\"vertical\" flexItem />\n\t\t\t\t<Grid item xs={3} className={classes.item}>\n\t\t\t\t\t<Typography variant=\"subtitle1\" className={classes.subtitle}>{user.count||0}</Typography>\n\t\t\t\t\t<Typography variant=\"body2\" gutterBottom>Total Transaction</Typography>\n\t\t\t\t</Grid>\n\t\t\t\t<Divider orientation=\"vertical\" flexItem />\n\t\t\t\t<Grid item xs={3} className={classes.item}>\n\t\t\t\t\t<Typography variant=\"subtitle1\" className={classes.subtitle}>{user.receivable||0}</Typography>\n\t\t\t\t\t<Typography variant=\"body2\" gutterBottom>Receivable</Typography>\n\t\t\t\t</Grid>\n\t\t\t</Grid>\n\t\t</Card>)\n\t\t:null\n\t\t}\n\t</div>\n)}\n\nexport default {\n\tlist:DashboardShow,\n}","import React, {useEffect, useState} from 'react'\nimport { \n\tSimpleForm, SelectInput, TextInput, useDataProvider, useListContext, useNotify, Toolbar, Button, NumberInput, Loading, Title\n} from 'react-admin';\nimport {useFormState} from 'react-final-form';\nimport {Card} from '@material-ui/core';\nimport md5 from 'md5';\nimport Qs from 'querystring';\nimport url from 'url';\nimport sortObj from 'sort-object';\n\nconst Go=({providers, users})=>{\n    var {values}=useFormState();\n    const notify=useNotify();\n\n    return (\n        <Toolbar>\n            <Button variant=\"contained\" label=\"Jump to the recharge page\" onClick={()=>{\n                console.log(values);\n                var partner=users.find(u=>u.id==values.partner);\n                if (!partner) return notify('no such partner', 'error');\n                var apiUrl=window.location.origin;\n                if (window.location.search) {\n                    var {server}=Qs.parse(window.location.search.slice(1));\n                    if (server) apiUrl=url.format({protocol:window.location.protocol, host:server});\n                }\n                var now=new Date();\n                var params={\n                    cb_url:apiUrl+'/demo/result',\n                    currency:'CNY',\n                    partnerId:partner.merchantid,\n                    money:values.money,\n                    outOrderId:'TESTORDER'+now.getTime(),\n                    return_url:window.location.href,\n                    time:now.getTime(),\n                    userId:values.userId,\n                    provider:values.provider\n                };\n                if (!params.userId || !params.money) return notify('请正确填写参数', 'warning');\n                var key=partner.key;\n                params.sign=md5(key+Qs.stringify(sortObj(params)));\n                fetch(apiUrl+'/forecore/order?'+Qs.stringify(params), {mode: 'cors',})\n                .then(response=>response.json())\n                .then(({err, detail, url})=>{\n                    if (err) return notify(detail, 'warning');\n                    window.location.href=url;\n                })\n                .catch((e)=>notify(e.message, 'warning'))\n            }}/>\n        </Toolbar>\n    )\n}\n\nconst Demo =({options, permissions, ...rest})=> {\n\tconst dp=useDataProvider();\n\tvar [providers, setProviders]=useState();\n    var [users, setUsers] =useState();\n\tuseEffect(()=>{\n        dp.getList('providers')\n        .then(({data})=>setProviders(data))\n        .catch(()=>{})\n\n        dp.getList('users', {filter:{acl:'merchant'}})\n        .then(({data})=>setUsers(data))\n        .catch(()=>{})\n\t}, []);\n\n    return (\n        <Card>\n            <Title defaultTitle={options.label} />\n            {\n                (providers==null || users==null)?<Loading />\n                :\n                <SimpleForm toolbar={<Go providers={providers} users={users} />} submitOnEnter={false}>\n                    <SelectInput source=\"partner\" label=\"Partner\" choices={users}/>\n                    <TextInput source=\"userId\" label=\"UserId\"/>\n                    <NumberInput source=\"money\" label=\"money\" />\n                    {(permissions=='merchant' || permissions=='agent')?\n                        null:\n                        <SelectInput source=\"provider\" label=\"Provider\" choices={providers.map(p=>({id:p.name, name:p.name}))} />\n                    }\n                </SimpleForm>\n            }\n        </Card>\n)}\n\nexport default {\n\tlist:Demo,\n}","\nexport default (apiUrl) => ({\n    // called when the user attempts to log in\n    login: ({ username, password}) => {\n        return fetch(apiUrl+'/admin/login', {\n            body:JSON.stringify({u:username, p:password}),\n            method:'PUT',\n            headers: new Headers({\n                'Content-Type': 'application/json'\n            })\n        }).then(res=>res.json())\n        .then(({err, a, o})=>{\n            if (err) return  Promise.reject(err);\n            localStorage.setItem('userInfo', JSON.stringify(o));\n            localStorage.setItem('accToken', a);\n            return Promise.resolve();\n        })\n    },\n    // called when the user clicks on the logout button\n    logout: () => {\n        localStorage.removeItem('accToken');\n        localStorage.removeItem('userInfo');\n        return Promise.resolve();\n    },\n    // called when the API returns an error\n    checkError: ({ status }) => {\n        if (status === 401 || status === 403) {\n            localStorage.removeItem('accToken');\n            localStorage.removeItem('userInfo');\n            return Promise.reject();\n        }\n        return Promise.resolve();\n    },\n    // called when the user navigates to a new location, to check for authentication\n    checkAuth: () => {\n        return localStorage.getItem('accToken')\n            ? Promise.resolve()\n            : Promise.reject();\n    },\n    // called when the user navigates to a new location, to check for permissions / roles\n    getPermissions: () => {\n        var u=localStorage.getItem('userInfo');\n        try {\n            u=JSON.parse(u);\n            return Promise.resolve(u.acl);\n        } catch(e) {\n            Promise.reject();\n        }\n    },\n    getIdentity: () =>{\n        var u=localStorage.getItem('userInfo');\n        try {\n            u=JSON.parse(u);\n            return Promise.resolve({fullName:u.name, id:u._id, acl:u.acl})\n        } catch(e) {\n            return Promise.reject()\n        }\n    }\n});","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","export default \"Sinopay 四方接口\\n===========\\n\\n1. 下单\\n---------------\\n>http://**url**/forecore/order\\n\\nparameters:\\n\\n| name | desc |\\n| -------- | ----------------------------------------------- |\\n| cb_url   | 充值结果回调地址，以http或https开头，如 http://mydomain.com/pay/result |\\n| currency | 充值币种，取决于您接入的通道不同，目前支持 CAD，USD, CNY，IDR，THB |\\n| money    | 充值数量，以元为单位，如 1.25，请注意这里直接以当地货币计价，不是人民币 |\\n| country  | 国家/地区，具体参数询问对接小伙伴 |\\n| outOrderId \\t| 你方系统的订单号，必须是唯一的 |\\n| return_url \\t| 充值界面的回跳地址，一般就显示充值成功 |\\n| time \\t| 当前时间，毫秒单位 |c\\n| userId \\t| 你方系统中充值用户的id |\\n| type \\t| 可以是 WECHATPAYH5，ALIPAYH5，UNIONPAYH5，USERSELECT, 不同通道支持不一样，请具体询问对接小伙伴 |\\n\\nreturn\\n```\\n\\terr, 错误，错误可能是字符串，对象，数字等，一般会有可以阅读部分。如果有err，以下参数全部不存在\\n\\toutOrderId, 你方系统的订单\\n\\torderId， Sinopay的订单id\\n\\tproviderOrderId, 提供方的订单id,请注意有的供应商不会给出这个参数\\n\\turl, 支付用地址, 这里有两种可能，\\n\\t\\t 1. 您可以直接跳往这个地址进行具体支付\\n\\t\\t 2. 如果是WECAHATPAYH5，ALIPAYH5，您应该将这个地址显示成二维码提供给用户\\n\\t\\t 3. 具体的处理方式请咨询对接小伙伴\\n```\\n\\n2. 查询\\n---------------\\n>http://**url**/forecore/queryOrder\\n\\nparameters\\n\\n| 参数 | 描述 |\\n| ------- | ----- |\\n| outOrderId | 你方订单id |\\n\\n\\nreturn\\n```\\n\\terr, 错误，错误可能是字符串，对象，数字等，一般会有可以阅读部分。如果有err，以下参数全部不存在\\n\\toutOrderId, 你方订单id\\n\\torderId， Sinopay订单id\\n\\tproviderOrderId, 提供方的订单id\\n\\tmoney， 订单要求支付的金额\\n\\treceived， 用户支付的金额\\n\\tcurrency, 币种\\n\\tstatus， 订单状态\\n```\\n\\n3. 退单\\n---------------\\n>http://**url**/forecore/refund\\n\\n请注意不是每个通道都支持退单\\n\\nparameters\\n| 参数 | 描述 |\\n| ------- | ----- |\\n| outOrderId | 你方订单id |\\n| money | 退款数量，元为单位 |\\n\\n\\nreturn\\n```\\nerr, 错误，错误可能是字符串，对象，数字等，一般会有可以阅读部分。如果有err，以下参数全部不存在\\norderId\\t\\t\\t| Sinopay order No.\\noutOrderId\\t \\t| Original Order No. from your System.\\nproviderOrderId\\t| The provider transaction No.\\ntrans_status\\t| Transaction status \\n\\t\\t\\t\\t\\tREFUNDING - transaction created, waiting for refund\\n\\t\\t\\t\\t\\tCLOSE - transaction closed, refund failed.\\n\\t\\t\\t\\t\\tSUCCESS - Refund success\\n```\\n\\n4. 代付\\n-----------------------\\n>http://**url**/forecore/disburse\\n\\n请注意不是每个通道都支持代付\\n\\nparameters\\n| 参数 | 描述 |\\n| ------- | ----- |\\n| outOrderId | 你方订单id |\\n| money | 付款数量，元为单位 |\\n| bank  | 收款银行，如：中国银行 |\\n| branch | 支行  |\\n| owner | 收款人姓名 |\\n| account | 收款账号 |\\n\\nreturn\\n\\n| 参数 | 描述 |\\n| ------| ---------|\\n| err | 错误，错误可能是字符串，对象，数字等，一般会有可以阅读部分。如果有err，以下参数全部不存在|\\n| orderId\\t\\t| Sinopay Transaction No.|\\n| outOrderId \\t| Original Order No. from your System. |\\n| providerOrderId\\t| The disbursement transaction No. in the provider’s system. |\\n| trans_status\\t| Transaction status \\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t|\\n|\\t\\t\\t\\t|\\tCLOSE - transaction closed, refund failed.\\t\\t\\t\\t\\t\\t|\\n|\\t\\t\\t\\t|\\tSUCCESS - success\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t|\\n|\\t\\t\\t\\t|\\tPENDING - Wait for comfirmation\\t\\t\\t\\t\\t\\t\\t\\t\\t|\\n```\\n\\n附录\\n===============================\\ncb_url的说明\\n-------------------------\\n充值成功会以post方式回调这个接口，并且传递以下参数\\n\\n| 参数 | 描述 |\\n| ------- | ----- |\\n| outOrderId\\t| 你方系统产生的订单id |\\n| orderId\\t\\t| Sinopay的订单id |\\n| money\\t\\t| 支付的金额 |\\n| currency\\t| 币种 |\\n| sign\\t\\t| 以md5做的签名 |\\n\\n **注意实际传输的参数可能不止上面列出的5个，所有参数（除了sign）都参与签名** \\n\\n收到这个调用之后，请返回一个json对象，如果有错，返回``` {err:'something wrong'} ```\\n如果正常处理完成，返回任意的json对象，如 ``` {result:'success'} ```\\n\\n调用接口\\n-------------------------\\n所有接口都同时支持post或者get方式，如果选择post方式，以application/json方式上传参数。任何接口的返回值都是一个json对象，如果这个json中包含有err字段，那意味着调用出错。\\n\\n调用上述接口中的任何一个，都需要附上公共参数，如下\\n\\n| 参数 | 描述 |\\n| ------- | ----- |\\npartnerId\\t| 合作商id， Sinopay分配的\\nsign\\t\\t| 签名，算法见下一节\\n\\n签名算法\\n-------------------------\\n签名是md5\\n\\n我们以一个例子来说明签名的构成。假定我们要传递的参数如下：\\n```outOrderId='abc123', money=1.00, partnerId='p001', type='WECHATPAYH5', currency='USD'```\\n\\n签名的key是``` 123456 ```\\n\\n1. 将所有待传递的参数按照参数名升序排列,得到\\n   ``` currency='USD', money=1.00, outOrderId='abc123', partnerId='p001', type='WECHATPAYH5'  ```\\n2. 所有的值做urlEncode，得到\\n\\t``` currency='USD', money=1.00, outOrderId='abc123', partnerId='p001', type='WECHATPAYH5'  ```\\n3. 输出```key=value```并用&连接成字符串，得到\\n\\t``` currency=USD&money=1.00&outOrderId=abc123&partnerId=p001&type=WECHATPAYH5 ```\\n4. 在字符串前面加上key， 得到\\n\\t``` 123456currency=USD&money=1.00&outOrderId=abc123&partnerId=p001&type=WECHATPAYH5 ```\\n5. 对这个字符串计算md5, 得到\\n   ```a90a66d09bde8a32725c9efde082fae1```\\n6. 把这个结果填给sign，那么最后要传输的数据\\n   ```\\n   {\\n\\t\\toutOrderId:'abc123', \\n\\t\\tmoney:'1.00', \\n\\t\\tpartnerId:'p001', \\n\\t\\ttype:'WECHATPAYH5', \\n\\t\\tcurrency:'USD',\\n\\t\\tsign:'a90a66d09bde8a32725c9efde082fae1'\\n   }\\n   ```\\n\\n关于结算货币\\n---------------------------\\n如果下单时使用外币，结算也会结算外币。如果您需要以人民币计价，则必须在下单时按照实时汇率换算，比如美元汇率是6.45，如果要生成100人民币的订单，你应该下100/6.45=15.50美元的支付订单。\\n\\n\\n使用微信支付\\n---------------------------\\n下单外币时系统返回的url只能在微信浏览器中打开付款，如果在chrome之类的系统浏览器中会显示\\n> 请使用微信浏览器打开\\n\\n这显然不是你想看到的。那么处理方式是\\n1. 将这个url显示成二维码，让用户用微信扫码，\\n   - 如果在pc端，直接显示这个二维码\\n   - 如果在手机端，提示用户截屏，在微信里扫一扫，选择相册\\n\\n下单人民币时不存在这个问题\";"],"sourceRoot":""}